import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{u as d,q as f}from"./query-client.zrB8z_yM.js";import{r as s}from"./index.Z3BHPS3u.js";import{A as x}from"./AICourseCard.X3AzuuIY.js";import{A as P}from"./AITutorHeader.T1FhyRrb.js";import{U as h}from"./UpgradeAccountModal.Bl29I556.js";import{l as C}from"./ai-course.m2sFB2uK.js";import{g as j,s as b,d as y}from"./browser.3c2kCsRM.js";import{P as n}from"./Pagination.DomnIFR-.js";import{A,a as N}from"./AITutorTallMessage.BWFj9o8p.js";import{h as E}from"./number.DnDLgi2j.js";import{L as w}from"./loader-circle.DfB4mNyf.js";import{B as I}from"./book-open.Dsgc4gH7.js";import"./use-outside-click.DYGsxgbd.js";import"./use-keydown.r409VyJJ.js";import"./use-toast.BdCcSTJE.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";import"./useMutation.BxVH4XRI.js";import"./query-http.Bohx3EqF.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.CznIeghd.js";import"./jwt.1xGNZsvU.js";import"./ellipsis-vertical.Di0fjBX0.js";import"./createLucideIcon.BSLrQS80.js";import"./play.-yCdF7S0.js";import"./trash-2.CIQaIo_h.js";import"./date.2wIYh-wy.js";import"./classname.y9b8gBZq.js";import"./billing.Dog7Gwv_.js";import"./plus.CstxCH0M.js";import"./Modal.NtjGPDbq.js";import"./x.BOdyWiWF.js";import"./UpdatePlanConfirmation.NT5hFl0c.js";import"./VerifyUpgrade.B0n18ihL.js";import"./circle-check-big.CnV0y9bI.js";import"./zap.BNbCfd_G.js";import"./message-circle.C1uJbl19.js";import"./map.DuWy2ZcB.js";import"./ellipsis.BcvtAoad.js";import"./use-debounce.CXZLeMbB.js";import"./search.CUAljTEc.js";function Pe(){const[p,c]=s.useState(!0),[u,l]=s.useState(!1),[o,a]=s.useState({perPage:"42",currPage:"1",query:""}),{data:r,isFetching:g,isRefetching:S}=d(C(o),f);s.useEffect(()=>{c(!1)},[r]);const i=r?.data??[],m=g||p;return s.useEffect(()=>{const t=j();a({...o,currPage:t?.p||"1"})},[]),s.useEffect(()=>{o?.currPage!=="1"?b({p:o?.currPage||"1"}):y("p")},[o]),e.jsxs(e.Fragment,{children:[u&&e.jsx(h,{onClose:()=>l(!1)}),e.jsx(P,{title:"Explore Courses",subtitle:"Explore the AI courses created by community",onUpgradeClick:()=>l(!0)}),e.jsx(A,{value:o?.query||"",onChange:t=>{a({...o,query:t,currPage:"1"})},disabled:m}),m&&e.jsxs("p",{className:"mb-4 flex flex-row items-center gap-2 text-sm text-gray-500",children:[e.jsx(w,{className:"h-4 w-4 animate-spin"}),"Loading courses..."]}),!m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Community has generated"," ",E(r?.totalCount||0)," courses"]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(n,{variant:"minimal",totalCount:r?.totalCount||0,totalPages:r?.totalPages||0,currPage:Number(r?.currPage||1),perPage:Number(r?.perPage||21),onPageChange:t=>{a({...o,currPage:String(t)})},className:""})})]}),i&&i.length>0&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2 lg:grid-cols-3",children:i.map(t=>e.jsx(x,{course:t,showActions:!1,showProgress:!1,variant:"column"},t._id))}),e.jsx(n,{totalCount:r?.totalCount||0,totalPages:r?.totalPages||0,currPage:Number(r?.currPage||1),perPage:Number(r?.perPage||21),onPageChange:t=>{a({...o,currPage:String(t)})},className:"rounded-lg border border-gray-200 bg-white p-4"})]}),i.length===0&&e.jsx(N,{title:"No courses found",subtitle:"Try a different search or check back later.",icon:I,buttonText:"Create your first course",onButtonClick:()=>{window.location.href="/ai"}})]})]})}export{Pe as AIExploreCourseListing};
