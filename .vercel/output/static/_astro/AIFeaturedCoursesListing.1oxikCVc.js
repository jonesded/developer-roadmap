import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{u as d,q as g}from"./query-client.zrB8z_yM.js";import{c as f}from"./ai-course.DbIkPj3f.js";import{r as a}from"./index.Z3BHPS3u.js";import{g as x,s as h,d as c}from"./browser.3c2kCsRM.js";import{A as P}from"./AICourseCard.B1pK0FJn.js";import{P as j}from"./Pagination.DomnIFR-.js";import{A as y}from"./AITutorHeader.Bt2gThCV.js";import{U as b}from"./UpgradeAccountModal.fZmxo5nD.js";import{A as C,a as A}from"./AITutorTallMessage.BWFj9o8p.js";import{L as N}from"./loader-circle.DfB4mNyf.js";import{B as q}from"./book-open.Dsgc4gH7.js";import"./query-http.BQfMbvYq.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.CznIeghd.js";import"./jwt.1xGNZsvU.js";import"./use-outside-click.DYGsxgbd.js";import"./use-keydown.r409VyJJ.js";import"./use-toast.BdCcSTJE.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";import"./useMutation.BxVH4XRI.js";import"./ellipsis-vertical.Di0fjBX0.js";import"./createLucideIcon.BSLrQS80.js";import"./play.-yCdF7S0.js";import"./trash-2.CIQaIo_h.js";import"./date.2wIYh-wy.js";import"./classname.y9b8gBZq.js";import"./number.DnDLgi2j.js";import"./ellipsis.BcvtAoad.js";import"./billing.D5yrowA9.js";import"./plus.CstxCH0M.js";import"./Modal.NtjGPDbq.js";import"./x.BOdyWiWF.js";import"./UpdatePlanConfirmation.CPFKRCnq.js";import"./VerifyUpgrade.ButUjaV5.js";import"./circle-check-big.CnV0y9bI.js";import"./zap.BNbCfd_G.js";import"./message-circle.C1uJbl19.js";import"./map.DuWy2ZcB.js";import"./use-debounce.CXZLeMbB.js";import"./search.CUAljTEc.js";function w(o){const{title:m,subtitle:i}=o;return e.jsxs("div",{className:"flex flex-grow w-full flex-col items-center justify-center gap-4 rounded-lg border border-gray-200 bg-white p-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"size-12 animate-spin text-gray-300"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"size-4 rounded-full bg-white"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:m}),i&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i})]})]})}function fe(){const[o,m]=a.useState(!0),[i,p]=a.useState(!1),[r,l]=a.useState({perPage:"42",currPage:"1",query:""}),{data:s,isFetching:n}=d(f(r),g);a.useEffect(()=>{m(!1)},[s]);const u=s?.data??[];return a.useEffect(()=>{const t=x();l({...r,currPage:t?.p||"1",query:t?.q||""})},[]),a.useEffect(()=>{r?.currPage!=="1"||r?.query!==""?h({p:r?.currPage||"1",q:r?.query||""}):(c("p"),c("q"))},[r]),e.jsxs(e.Fragment,{children:[i&&e.jsx(b,{onClose:()=>p(!1)}),e.jsx(y,{title:"Staff Picks",subtitle:"Explore our hand-picked courses generated by AI",onUpgradeClick:()=>p(!0),children:e.jsx(C,{value:r?.query||"",onChange:t=>{l({...r,query:t,currPage:"1"})}})}),(n||o)&&e.jsx(w,{title:"Loading featured courses",subtitle:"This may take a moment..."}),!n&&!o&&u.length>0&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2 lg:grid-cols-3",children:u.map(t=>e.jsx(P,{course:t,showActions:!1,showProgress:!1,variant:"column"},t._id))}),e.jsx(j,{totalCount:s?.totalCount||0,totalPages:s?.totalPages||0,currPage:Number(s?.currPage||1),perPage:Number(s?.perPage||10),onPageChange:t=>{l({...r,currPage:String(t)})},className:"rounded-lg border border-gray-200 bg-white p-4"})]}),!n&&!o&&u.length===0&&e.jsx(A,{title:"No featured courses",subtitle:"There are no featured courses available at the moment.",icon:q,buttonText:"Browse all courses",onButtonClick:()=>{window.location.href="/ai"}})]})}export{fe as AIFeaturedCoursesListing};
