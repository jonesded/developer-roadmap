import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.Z3BHPS3u.js";import{i as p}from"./jwt.1xGNZsvU.js";import{s as N}from"./popup.CdCAhVM2.js";import{U as I}from"./UpgradeAccountModal.fZmxo5nD.js";import{b as O}from"./billing.D5yrowA9.js";import{c as A,s as E}from"./ai-questions.CsV5uBnQ.js";import{Q as D}from"./QuestionAnswerChat.C4o_FL4A.js";import{u as G}from"./use-toast.BdCcSTJE.js";import{c as P}from"./classname.y9b8gBZq.js";import{g as $}from"./browser.3c2kCsRM.js";import{F as B}from"./FormatItem.N0eJiqfi.js";import{u as C,q as T}from"./query-client.zrB8z_yM.js";import{a as R}from"./ai-course.DbIkPj3f.js";import{s as V}from"./subscription.45pDVsS0.js";import{L as W}from"./list-todo.DNwZsq61.js";import{F as _}from"./file-text.BpqfdBL4.js";import{L as J}from"./list.CXlwBFwN.js";import{S as K}from"./sparkles.DB73Rui2.js";import"./js.cookie.Cz0CWeBA.js";import"./useMutation.BxVH4XRI.js";import"./query-http.BQfMbvYq.js";import"./fp.esm.CznIeghd.js";import"./Modal.NtjGPDbq.js";import"./use-outside-click.DYGsxgbd.js";import"./use-keydown.r409VyJJ.js";import"./x.BOdyWiWF.js";import"./createLucideIcon.BSLrQS80.js";import"./UpdatePlanConfirmation.CPFKRCnq.js";import"./VerifyUpgrade.ButUjaV5.js";import"./circle-check-big.CnV0y9bI.js";import"./loader-circle.DfB4mNyf.js";import"./zap.BNbCfd_G.js";import"./message-circle.C1uJbl19.js";import"./map.DuWy2ZcB.js";import"./index.BlPpvBlM.js";import"./index.Bbp-6C1p.js";import"./CheckIcon.D4OhQ5l1.js";import"./Tooltip.CCudSue-.js";import"./refresh-ccw.C3KtdZ75.js";import"./trash-2.CIQaIo_h.js";import"./send.BVE6djDn.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";function Pe(){const[L,r]=s.useState(!1),f=G(),[a,k]=s.useState(""),[l,x]=s.useState("mcq"),[c,g]=s.useState(!1),[h,q]=s.useState([]),{data:d,isLoading:b,refetch:H}=C(R(),T),{data:z,isLoading:w}=C(O(),T),y=(d?.used||0)>=(d?.limit||0),n=z?.status==="active",i=d?.quiz,S=!n&&!w&&!b&&p(),j=s.useId(),v=s.useId();s.useEffect(()=>{const o=$().format;o&&u.find(U=>U.value===o)&&x(o)},[]);const u=[{label:"Multi-Choice",formatTitle:"Multiple Choice Question",icon:W,value:"mcq"},{label:"Open-Ended",formatTitle:"Open-Ended Question",icon:_,value:"open-ended"},{label:"Mixed",formatTitle:"Mixed Question (MCQ + Open-Ended)",icon:J,value:"mixed"}],F=()=>{if(!p()){N();return}if(!n&&y){r(!0);return}if(!n&&i&&i?.used>=i?.limit){V();return}let t="";c&&(A(),t=E(h)),window.location.href=`/ai/quiz/search?term=${a}&format=${l}&id=${t}`};s.useEffect(()=>{window?.fireEvent({action:"tutor_user",category:"ai_tutor",label:"Visited AI Quiz Generator Page"})},[]);const m=a.trim(),M=m&&m.length>=3,Q=u.find(t=>t.value===l)?.formatTitle;return e.jsxs("div",{className:"mx-auto flex w-full max-w-2xl flex-grow flex-col pt-4 md:justify-center md:pt-10 lg:pt-28 lg:pb-24",children:[e.jsxs("div",{className:"relative",children:[L&&e.jsx(I,{onClose:()=>r(!1)}),S&&e.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 -translate-y-8 text-gray-500 max-md:hidden",children:[i?.used," of ",i?.limit," quizzes",e.jsx("button",{onClick:()=>r(!0),className:"ml-2 rounded-xl bg-yellow-600 px-2 py-1 text-sm text-white hover:opacity-80",children:"Need more? Upgrade"})]}),e.jsx("h1",{className:"mb-0.5 text-center text-4xl font-semibold max-md:text-left max-md:text-xl lg:mb-3",children:"Test your Knowledge"}),e.jsx("p",{className:"text-center text-lg text-balance text-gray-600 max-md:text-left max-md:text-sm",children:"Create a personalized quiz to test your understanding of any topic"})]}),e.jsxs("form",{className:"mt-10 space-y-4",onSubmit:t=>{t.preventDefault(),F()},children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:j,className:"inline-block text-gray-500",children:"What topic would you like to quiz yourself on?"}),e.jsx("input",{type:"text",id:j,placeholder:"e.g., JavaScript Variables, Go Routines, System Design",value:a,onChange:t=>{k(t.target.value),g(!1)},className:"block w-full rounded-xl border border-gray-200 bg-white p-4 outline-none placeholder:text-gray-500 focus:border-gray-500",required:!0,minLength:3})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"inline-block text-gray-500",children:"Choose the format"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:u.map(t=>{const o=t.value===l;return e.jsx(B,{label:t.label,onClick:()=>x(t.value),icon:t.icon,isSelected:o},t.value)})})]}),e.jsxs("label",{className:P("flex cursor-pointer items-center gap-2 rounded-xl border border-gray-200 bg-white p-4 transition-all"),htmlFor:v,children:[e.jsx("input",{type:"checkbox",id:v,checked:c,onChange:t=>{if(!p()){N();return}if(!n&&y){r(!0);return}if(!m){f.error("Please enter a topic first");return}if(m.length<3){f.error("Topic must be at least 3 characters long");return}g(t.target.checked)}}),e.jsx("span",{className:"max-sm:hidden",children:"Answer the following questions for a better result"}),e.jsx("span",{className:"sm:hidden",children:"Customize your quiz"})]}),c&&e.jsx(D,{term:a,format:Q||l,questionAnswerChatMessages:h,setQuestionAnswerChatMessages:q,from:"quiz"}),e.jsxs("button",{type:"submit",className:"flex h-[56px] w-full items-center justify-center gap-2 rounded-xl bg-black p-4 text-white focus:outline-none disabled:cursor-not-allowed disabled:opacity-80",disabled:!M||b||w,children:[e.jsx(K,{className:"size-4"}),"Generate Quiz"]})]})]})}export{Pe as AIQuizGenerator};
