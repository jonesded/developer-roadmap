import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as N}from"./index.Z3BHPS3u.js";import{g as C}from"./date.2wIYh-wy.js";import{L as S}from"./list.CXlwBFwN.js";import"./js.cookie.Cz0CWeBA.js";import{M as R}from"./Modal.NtjGPDbq.js";import{A as $}from"./arrow-up-right.CWJoE-FU.js";import{C as T}from"./check.DflWYpXj.js";import{B as I}from"./book-open.Dsgc4gH7.js";import{A as b,C as _,a as q}from"./ActivityTopicTitles.DLMiyJNa.js";import{c as z}from"./classname.y9b8gBZq.js";function F(){return e.jsx("div",{className:"rounded-md",children:e.jsxs("div",{className:"flex flex-col items-center p-7 text-center",children:[e.jsx(S,{className:"mb-4 h-14 w-14 opacity-10"}),e.jsx("h2",{className:"text-lg font-bold sm:text-xl",children:"No Activity"}),e.jsx("p",{className:"my-1 max-w-[400px] text-balance text-sm text-gray-500 sm:my-2 sm:text-base",children:"Activities will appear here as you start tracking your progress."})]})})}function D(x){const{resourceId:s,resourceType:n,isCustomResource:m,topicTitles:a=[],topicCount:y,actionType:t,onClose:u}=x;let i="";return n==="roadmap"?i=m?`/r/${s}`:`/${s}`:n==="best-practice"?i=`/best-practices/${s}`:i=`/questions/${s}`,e.jsx(R,{onClose:()=>{u()},children:e.jsxs("div",{className:"popup-body relative rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("span",{className:"mb-2 flex items-center justify-between text-lg font-semibold capitalize",children:[e.jsx("span",{className:"flex items-center gap-2",children:t.replace("_"," ")}),e.jsxs("a",{href:i,target:"_blank",className:"flex items-center gap-1 rounded-md border border-transparent py-0.5 pl-2 pr-1 text-sm font-normal text-gray-400 transition-colors hover:border-black hover:bg-black hover:text-white",children:["Visit Page"," ",e.jsx($,{size:16,strokeWidth:2,className:"relative top-px"})]})]}),e.jsx("ul",{className:"flex max-h-[50vh] flex-col gap-1 overflow-y-auto max-md:max-h-full",children:a.map(r=>{const c=t==="done"?T:t==="in_progress"?I:T;return e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(c,{strokeWidth:3,className:"relative top-[4px] text-green-500",size:16}),r]},r)})})]})})}function J(x){const{activities:s,className:n,onResourceClick:m}=x,[a,y]=N.useState(!1),[t,u]=N.useState(null),i=s.filter(r=>r?.topicTitles&&r.topicTitles.length>0).sort((r,c)=>new Date(c.updatedAt).getTime()-new Date(r.updatedAt).getTime()).slice(0,a?s.length:10);return e.jsxs("div",{className:z("mx-0 px-0 py-5 md:-mx-10 md:px-8 md:py-8",n),children:[s.length>0&&e.jsx("h2",{className:"mb-3 text-xs uppercase text-gray-400",children:"Learning Activity"}),t&&e.jsx(D,{onClose:()=>u(null),activityId:t._id,resourceId:t.resourceId,resourceType:t.resourceType,isCustomResource:t.isCustomResource,topicTitles:t.topicTitles||[],topicCount:t.topicTitles?.length||0,actionType:t.actionType}),s.length>0?e.jsx("ul",{className:"divide-y divide-gray-100",children:i.map(r=>{const{_id:c,resourceType:l,resourceId:p,resourceTitle:f,actionType:h,updatedAt:w,topicTitles:d,isCustomResource:v,resourceSlug:A}=r,k=l==="question"?`/questions/${p}`:l==="best-practice"?`/best-practices/${p}`:v&&l==="roadmap"?`/r/${A}`:`/${p}`,g=m&&l!=="question"?e.jsx("button",{className:"font-medium underline transition-colors hover:cursor-pointer hover:text-black",onClick:()=>m(p,l,v),children:f}):e.jsx("a",{className:"font-medium underline transition-colors hover:cursor-pointer hover:text-black",target:"_blank",href:k,children:f}),o=d?.length||0,j=e.jsx("span",{className:"ml-1 text-xs text-gray-400",children:C(new Date(w).toISOString())});return e.jsxs("li",{className:"py-2 text-sm text-gray-600",children:[h==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-1",children:["Started ",o," topic",o>1?"s":""," in ",g," ",j]}),e.jsx(b,{topicTitles:d||[]})]}),h==="done"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-1",children:["Completed ",o," topic",o>1?"s":""," in ",g," ",j]}),e.jsx(b,{topicTitles:d||[]})]}),h==="answered"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-1",children:["Answered ",o," question",o>1?"s":""," in ",g," ",j]}),e.jsx(b,{topicTitles:d||[]})]})]},c)})}):e.jsx(F,{}),s.length>10&&e.jsx("button",{className:"mt-3 flex items-center gap-2 rounded-md border border-black py-1 pl-1.5 pr-2 text-xs uppercase tracking-wide text-black transition-colors hover:border-black hover:bg-black hover:text-white",onClick:()=>y(!a),children:a?e.jsxs(e.Fragment,{children:[e.jsx(_,{size:14}),"Show less"]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{size:14}),"Show more"]})})]})}export{J as A};
