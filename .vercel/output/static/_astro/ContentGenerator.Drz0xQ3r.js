import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.Z3BHPS3u.js";import{F as L}from"./FormatItem.N0eJiqfi.js";import{i as j}from"./jwt.1xGNZsvU.js";import{s as M}from"./popup.CdCAhVM2.js";import{U as T}from"./UpgradeAccountModal.Bl29I556.js";import{u as $}from"./billing.Dog7Gwv_.js";import{c as A,s as E}from"./ai-questions.CsV5uBnQ.js";import{Q as P}from"./QuestionAnswerChat.BBebMkga.js";import{u as O}from"./use-toast.BdCcSTJE.js";import{c as Q}from"./classname.y9b8gBZq.js";import{g as q}from"./browser.3c2kCsRM.js";import{u as R}from"./use-params.CJbNPQqJ.js";import{u as G,q as z}from"./query-client.zrB8z_yM.js";import{a as W}from"./ai-course.m2sFB2uK.js";import{s as B}from"./subscription.45pDVsS0.js";import{B as V}from"./book-open.Dsgc4gH7.js";import{F as _}from"./file-text.BpqfdBL4.js";import{M as D}from"./map.DuWy2ZcB.js";import{S as H}from"./sparkles.DB73Rui2.js";import"./js.cookie.Cz0CWeBA.js";import"./useMutation.BxVH4XRI.js";import"./query-http.Bohx3EqF.js";import"./fp.esm.CznIeghd.js";import"./Modal.NtjGPDbq.js";import"./use-outside-click.DYGsxgbd.js";import"./use-keydown.r409VyJJ.js";import"./x.BOdyWiWF.js";import"./createLucideIcon.BSLrQS80.js";import"./UpdatePlanConfirmation.NT5hFl0c.js";import"./VerifyUpgrade.B0n18ihL.js";import"./circle-check-big.CnV0y9bI.js";import"./loader-circle.DfB4mNyf.js";import"./zap.BNbCfd_G.js";import"./message-circle.C1uJbl19.js";import"./index.BlPpvBlM.js";import"./index.Bbp-6C1p.js";import"./CheckIcon.D4OhQ5l1.js";import"./Tooltip.CCudSue-.js";import"./refresh-ccw.C3KtdZ75.js";import"./trash-2.CIQaIo_h.js";import"./send.BVE6djDn.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";function qe(){const[y,d]=r.useState(!1),{isPaidUser:p,isLoading:v}=$(),u=R(),f=O(),[i,C]=r.useState(""),[s,l]=r.useState("course"),{data:N,isLoading:x}=G(W(),z);r.useEffect(()=>{const t=c.find(o=>o.value===u.format);l(t?t.value:"course")},[u.format]);const[m,h]=r.useState(!1),[g,I]=r.useState([]),b=r.useId(),w=r.useId();r.useEffect(()=>{const o=q().format;o&&c.find(k=>k.value===o)&&l(o)},[]);const c=[{label:"Course",icon:V,value:"course"},{label:"Guide",icon:_,value:"guide"},{label:"Roadmap",icon:D,value:"roadmap"}],a=N?.[s],F=!p&&!v&&!x&&j(),U=()=>{if(!j()){M();return}if(!p&&a&&a?.used>=a?.limit){B();return}let t="";m&&(A(),t=E(g));const o=i.trim();s==="course"?window.location.href=`/ai/course?term=${encodeURIComponent(o)}&id=${t}&format=${s}`:s==="guide"?window.location.href=`/ai/guide?term=${encodeURIComponent(o)}&id=${t}&format=${s}`:s==="roadmap"&&(window.location.href=`/ai/roadmap?term=${encodeURIComponent(o)}&id=${t}&format=${s}`)};r.useEffect(()=>{window?.fireEvent({action:"tutor_user",category:"ai_tutor",label:"Visited AI Course Page"})},[]);const n=i.trim(),S=n&&n.length>=3;return e.jsxs("div",{className:"mx-auto flex w-full max-w-2xl flex-grow flex-col pt-4 md:justify-center md:pt-10 lg:pt-28 lg:pb-24",children:[e.jsxs("div",{className:"relative",children:[y&&e.jsx(T,{onClose:()=>d(!1)}),F&&e.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 -translate-y-8 text-gray-500 max-md:hidden",children:[a?.used," of ",a?.limit," ",s,"s",e.jsx("button",{onClick:()=>d(!0),className:"ml-2 rounded-xl bg-yellow-600 px-2 py-1 text-sm text-white hover:opacity-80",children:"Need more? Upgrade"})]}),e.jsx("h1",{className:"mb-0.5 text-center text-4xl font-semibold max-md:text-left max-md:text-xl lg:mb-3",children:"What can I help you learn?"}),e.jsx("p",{className:"text-center text-lg text-balance text-gray-600 max-md:text-left max-md:text-sm",children:"Enter a topic below to generate a personalized course for it"})]}),e.jsxs("form",{className:"mt-10 space-y-4",onSubmit:t=>{t.preventDefault(),U()},children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:b,className:"inline-block text-gray-500",children:"What can I help you learn?"}),e.jsx("input",{type:"text",id:b,placeholder:"Enter a topic",value:i,onChange:t=>{C(t.target.value),h(!1)},className:"block w-full rounded-xl border border-gray-200 bg-white p-4 outline-none placeholder:text-gray-500 focus:border-gray-500",required:!0,minLength:3})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"inline-block text-gray-500",children:"Choose the format"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:c.map(t=>{const o=t.value===s;return e.jsx(L,{label:t.label,onClick:()=>l(t.value),icon:t.icon,isSelected:o},t.value)})})]}),e.jsxs("label",{className:Q("flex cursor-pointer items-center gap-2 rounded-xl border border-gray-200 bg-white p-4 transition-all"),htmlFor:w,children:[e.jsx("input",{type:"checkbox",id:w,checked:m,onChange:t=>{if(!n){f.error("Please enter a topic first");return}if(n.length<3){f.error("Topic must be at least 3 characters long");return}h(t.target.checked)}}),e.jsxs("span",{className:"max-sm:hidden",children:["Answer the following questions for a better ",s]}),e.jsxs("span",{className:"sm:hidden",children:["Customize your ",s]})]}),m&&e.jsx(P,{term:i,format:s,questionAnswerChatMessages:g,setQuestionAnswerChatMessages:I}),e.jsxs("button",{type:"submit",className:"flex w-full items-center justify-center gap-2 rounded-xl bg-black p-4 text-white focus:outline-none disabled:cursor-not-allowed disabled:opacity-80",disabled:!S||x,children:[e.jsx(H,{className:"size-4"}),"Generate"]})]})]})}export{qe as ContentGenerator};
