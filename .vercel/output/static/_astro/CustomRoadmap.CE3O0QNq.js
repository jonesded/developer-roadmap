import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.Z3BHPS3u.js";import{g as Z}from"./browser.3c2kCsRM.js";import{c as R}from"./classname.y9b8gBZq.js";import{u as I}from"./index.BlfZEqDn.js";import{c as B,a as C,t as X}from"./roadmap.DwTTnFhR.js";import{S as W}from"./ShareOptionsModal.sS-OMsnI.js";import{c as T}from"./createLucideIcon.BSLrQS80.js";import{p as D}from"./page.DyYQD7MX.js";import{a as H,h as ee,c as se,d as te}from"./http.BJhNQusg.js";import"./js.cookie.Cz0CWeBA.js";/* empty css                       */import{u as M}from"./use-toast.BdCcSTJE.js";import{u as ae}from"./use-outside-click.DYGsxgbd.js";import{E as re}from"./ellipsis-vertical.Di0fjBX0.js";import{S as ne}from"./square-pen.CCkK4Twl.js";import{L as oe}from"./lock.C0C-BW9S.js";import{T as ie}from"./trash-2.CIQaIo_h.js";import{ShareRoadmapButton as le}from"./ShareRoadmapButton.C32XbsMw.js";import{C as ce}from"./CreateRoadmapModal.CA3sOjAy.js";import{R as de}from"./RoadmapAlert.rjvsIjnq.js";import{R as F}from"./Rating.DEITR7Qp.js";import{M as Y}from"./Modal.NtjGPDbq.js";import{f as me}from"./number.DnDLgi2j.js";import{i as $}from"./jwt.1xGNZsvU.js";import{s as G}from"./popup.CdCAhVM2.js";import{S as K}from"./Spinner.CPY-6wbR.js";import{L as A}from"./loader-circle.DfB4mNyf.js";import{g as pe}from"./date.2wIYh-wy.js";import{P as ue}from"./Pagination.DomnIFR-.js";import{S as he,F as xe}from"./server-crash.HXmtFCvs.js";import{M as ge}from"./message-circle.C1uJbl19.js";import{S as L}from"./star.B-cQRnHp.js";import{u as fe}from"./useMutation.BxVH4XRI.js";import{q as _,u as be}from"./query-client.zrB8z_yM.js";import{a as je,h as ye,F as we}from"./query-http.DnxAGGjD.js";import{D as z}from"./datetime.BHfGb2kO.js";import{S as Ne}from"./send.BVE6djDn.js";import{F as ve}from"./frown.DZolOWqV.js";import{E as ke}from"./eye.mqNm1dCT.js";import{T as Re}from"./TopicDetail.DRhNu48g.js";import{ReadonlyEditor as Se}from"./index.Dgut0sTl.js";import{a as Ce,u as Ie,r as Fe,b as Te}from"./resource-progress.Ow4RVjGh.js";import{S as $e}from"./shapes.Dk0DUUzC.js";import"./index.BHh4vvK5.js";import"./index.3whys8t3.js";import"./use-copy-text.D2rWbbuk.js";import"./user-round-plus.DKfQoNU2.js";import"./check.DflWYpXj.js";import"./copy.CgTXj779.js";import"./users-round.D8eM98xM.js";import"./team.D9_M1CfW.js";import"./earth.ApD3nwNq.js";import"./users.DjpFdpTD.js";import"./circle-check-big.CnV0y9bI.js";import"./twitter.BGXl0Xk3.js";import"./facebook.Diu2wQCs.js";import"./linkedin.DR3T_WSD.js";import"./fp.esm.CznIeghd.js";import"./toast.DlejBBdi.js";import"./TwitterIcon.D4xHZP6Y.js";import"./heart-handshake.ChP6KiKS.js";import"./use-keydown.r409VyJJ.js";import"./x.BOdyWiWF.js";import"./ellipsis.BcvtAoad.js";import"./markdown.CL3gtrVM.js";import"./preload-helper.BlTxHScW.js";import"./GitHubIcon.NZCYHAdm.js";import"./vue.BIhB9hsv.js";import"./transition.MUZrSsh7.js";import"./head.CbjsIJ-A.js";import"./dom.B_TnKQIa.js";import"./wand-sparkles.8eLpe3am.js";import"./index.BlPpvBlM.js";import"./index.Bbp-6C1p.js";import"./react-textarea-autosize.browser.esm.CREEQHIU.js";import"./ai.DmXEK0i3.js";import"./index.browser.OxPLOBIU.js";import"./ai-course.JYmLWeiN.js";import"./billing.D4Dkc83P.js";import"./roadmap-tree.CoWuXctO.js";import"./AICourseLessonChat.B9dL22TW.js";/* empty css                        */import"./user-round.D2mOPNuO.js";import"./bot.CQ2bIWO6.js";import"./AILimitsPopup.BeTRJ95q.js";import"./gift.C1ExsHI3.js";import"./list.CXlwBFwN.js";import"./book-open-text.BTmii8Os.js";import"./brain.DU33CjMf.js";import"./chevron-down.pBq1owZr.js";import"./chevron-right.B-RYTm0N.js";import"./UpgradeAccountModal.BrBqMRqO.js";import"./UpdatePlanConfirmation.DdkG8Ov0.js";import"./VerifyUpgrade.CWI1EYmA.js";import"./zap.BNbCfd_G.js";import"./map.DuWy2ZcB.js";import"./file-text.BpqfdBL4.js";import"./ban.BRPE8iYC.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Le=T("circle-help",Me);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]],_e=T("circle-slash",De);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M15.8 9.2a2.5 2.5 0 0 0-3.5 0l-.3.4-.35-.3a2.42 2.42 0 1 0-3.2 3.6l3.6 3.5 3.6-3.5c1.2-1.2 1.1-2.7.2-3.7",key:"43lnbm"}]],Pe=T("message-circle-heart",Ee);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]],U=T("shield-ban",Ae);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Ue=T("smile",ze);function Oe(o){const{isSecondaryBanner:s=!1}=o,[t,a]=i.useState(!1),r=I(B),n=I(C);return e.jsxs(e.Fragment,{children:[t&&r&&n&&e.jsx(W,{roadmapSlug:n?.slug,isDiscoverable:n.isDiscoverable,description:n?.description,visibility:n?.visibility,teamId:n?.teamId,roadmapId:n?._id,sharedFriendIds:n?.sharedFriendIds||[],sharedTeamMemberIds:n?.sharedTeamMemberIds||[],onClose:()=>a(!1),onShareSettingsUpdate:l=>{C.set({...n,...l})}}),e.jsxs("div",{"data-progress-nums-container":"",className:R("striped-loader relative z-50 hidden items-center justify-between bg-white px-2 py-1.5 sm:flex",{"rounded-bl-md rounded-br-md":s,"rounded-md":!s}),children:[e.jsxs("p",{className:"flex text-sm opacity-0 transition-opacity duration-300","data-progress-nums":"",children:[e.jsxs("span",{className:"mr-2.5 rounded-xs bg-yellow-200 px-1 py-0.5 text-xs font-medium uppercase text-yellow-900",children:[e.jsx("span",{"data-progress-percentage":"",children:"0"}),"% Done"]}),e.jsxs("span",{className:"itesm-center hidden md:flex",children:[e.jsxs("span",{children:[e.jsx("span",{"data-progress-done":"",children:"0"})," completed"]}),e.jsx("span",{className:"mx-1.5 text-gray-400",children:"·"}),e.jsxs("span",{children:[e.jsx("span",{"data-progress-learning":"",children:"0"})," in progress"]}),e.jsx("span",{className:"mx-1.5 text-gray-400",children:"·"}),e.jsxs("span",{children:[e.jsx("span",{"data-progress-skipped":"",children:"0"})," skipped"]}),e.jsx("span",{className:"mx-1.5 text-gray-400",children:"·"}),e.jsxs("span",{children:[e.jsx("span",{"data-progress-total":"",children:"0"})," Total"]})]}),e.jsxs("span",{className:"md:hidden",children:[e.jsx("span",{"data-progress-done":"",children:"0"})," of"," ",e.jsx("span",{"data-progress-total":"",children:"0"})," Done"]})]}),e.jsx("div",{className:"flex items-center gap-3 opacity-0 transition-opacity duration-300","data-progress-nums":"",children:e.jsxs("button",{"data-popup":"progress-help",className:"flex items-center gap-1 text-sm font-medium text-gray-500 opacity-0 transition-opacity hover:text-black","data-progress-nums":"",children:[e.jsx(Le,{className:"h-3.5 w-3.5 stroke-[2.5px]"}),"Track Progress"]})})]}),e.jsx("div",{"data-progress-nums-container":"",className:"striped-loader relative -mb-2 flex items-center justify-between rounded-md border bg-white px-2 py-1.5 text-sm text-gray-700 sm:hidden",children:e.jsxs("span",{"data-progress-nums":"",className:"text-gray-500 opacity-0 transition-opacity duration-300",children:[e.jsx("span",{"data-progress-done":"",children:"0"})," of"," ",e.jsx("span",{"data-progress-total":"",children:"0"})," Done"]})})]})}function qe(o){const{roadmapTitle:s,roadmapId:t}=o;return e.jsx("div",{className:R("mb-0 mt-4 rounded-md border-0 sm:-mb-[65px] sm:mt-7 sm:border"),children:e.jsx(Oe,{isSecondaryBanner:!1,resourceId:t,resourceType:"roadmap"})})}function Be(o){const{onDelete:s,onUpdateSharing:t,onCustomize:a}=o,r=i.useRef(null),[n,l]=i.useState(!1);return ae(r,()=>{l(!1)}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{disabled:!1,onClick:()=>l(!n),className:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white py-1.5 pl-2 pr-2 text-xs font-medium text-black hover:border-gray-300 hover:bg-gray-300 sm:pl-1.5 sm:pr-3 sm:text-sm",children:[e.jsx(re,{className:"mr-0 h-4 w-4 stroke-[2.5] sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Actions"})]}),n&&e.jsx("div",{ref:r,className:"align-right absolute right-0 top-full z-9999 mt-1 w-[140px] rounded-md bg-slate-800 px-2 py-2 text-white shadow-md",children:e.jsxs("ul",{children:[a&&e.jsx("li",{children:e.jsxs("button",{onClick:()=>{l(!1),a()},className:"flex w-full cursor-pointer items-center rounded-sm p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(ne,{size:14,className:"mr-2"}),"Edit"]})}),t&&e.jsx("li",{children:e.jsxs("button",{onClick:()=>{l(!1),t()},className:"flex w-full cursor-pointer items-center rounded-sm p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(oe,{size:14,className:"mr-2"}),"Sharing"]})}),s&&e.jsx("li",{children:e.jsxs("button",{onClick:()=>{l(!1),s()},className:"flex w-full cursor-pointer items-center rounded-sm p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(ie,{size:14,className:"mr-2"}),"Delete"]})})]})})]})}function We(){const[o,s]=i.useState(!1);return e.jsxs(e.Fragment,{children:[o&&e.jsx(ce,{onClose:()=>{s(!1)}}),e.jsx(de,{title:"Community Roadmaps",description:e.jsxs(e.Fragment,{children:["This is a custom roadmap made by a community member and is not verified by ",e.jsx("span",{className:"font-semibold",children:"roadmap.sh"})]}),floatingIcon:Pe,className:"mb-5 mt-0 sm:-mt-6 sm:mb-7"})]})}function He(o){const{ratings:s,canManage:t=!1,roadmapSlug:a}=o,{breakdown:r={},average:n}=s||{},l=n||0,h=[5,4,3,2,1],p=h.reduce((f,v)=>f+r?.[v]||0,0),m=l>0||t,g=M(),[N,y]=i.useState(!0),[u,w]=i.useState(!1),[j,x]=i.useState(!m),[c,d]=i.useState(),[b,S]=i.useState(0),[k,E]=i.useState(""),Q=async()=>{if(t){y(!1);return}const{response:f,error:v}=await H(`https://api.hnmdevs.com/v1-get-my-roadmap-rating/${a}`);if(!f||v){g.error(v?.message||"Something went wrong"),y(!1);return}d(f?.id),S(f?.rating),E(f?.feedback||""),y(!1)},V=async()=>{if(b<=0){g.error("At least give it a star");return}w(!0);const f=c?"v1-update-custom-roadmap-rating":"v1-rate-custom-roadmap",{response:v,error:P}=await ee(`https://api.hnmdevs.com/${f}/${a}`,{rating:b,feedback:k});if(!v||P){g.error(P?.message||"Something went wrong"),w(!1);return}window.location.reload()};return i.useEffect(()=>{if(!$()||!a){y(!1);return}Q().then()},[a]),e.jsxs("div",{className:"flex flex-col gap-3",children:[m&&!j&&e.jsx(e.Fragment,{children:e.jsx("ul",{className:"flex flex-col gap-1 rounded-lg bg-white p-5",children:h.map(f=>{const v=p<=0?0:(r?.[f]||0)/p*100;return e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"shrink-0",children:[f," star"]}),e.jsxs("div",{className:"relative h-8 w-full overflow-hidden rounded-md border",children:[e.jsx("div",{className:"h-full bg-yellow-300",style:{width:`${v}%`}}),v>0&&e.jsx("span",{className:"absolute right-3 top-1/2 flex -translate-y-1/2 items-center justify-center text-xs text-black",children:me(r?.[f]||0)})]}),e.jsxs("span",{className:"w-[35px] shrink-0 text-xs text-gray-500",children:[parseInt(`${v}`,10),"%"]})]},`rating-${f}`)})})}),!t&&!j&&e.jsxs("div",{className:"relative min-h-[100px] rounded-lg bg-white p-4",children:[N&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(K,{isDualRing:!1,className:"h-5 w-5"})}),!N&&!j&&!c&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-2 text-center text-sm font-medium",children:"Rate and share your thoughts with the roadmap creator."}),e.jsx("button",{className:"flex h-10 w-full items-center justify-center rounded-full bg-black p-2.5 text-sm font-medium text-white disabled:opacity-60",onClick:()=>{if(!$()){G();return}x(!0)},disabled:N,children:N?e.jsx(A,{className:"size-4 animate-spin"}):"Rate Roadmap"})]}),!N&&!j&&c&&e.jsxs("div",{children:[e.jsxs("h3",{className:"mb-2.5 flex items-center justify-between text-base font-semibold",children:["Your Feedback",e.jsx("button",{className:"ml-2 text-sm font-medium text-blue-500 underline underline-offset-2",onClick:()=>{x(!0)},children:"Edit Rating"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{rating:b,starSize:19,readOnly:!0})," (",b,")"]}),k&&e.jsx("p",{className:"mt-2 text-sm",children:k})]})]}),!t&&j&&e.jsxs("div",{className:"rounded-lg bg-white p-5",children:[e.jsx("h3",{className:"font-semibold",children:"Rate this roadmap"}),e.jsx("p",{className:"mt-1 text-sm",children:"Share your thoughts with the roadmap creator."}),e.jsxs("form",{className:"mt-4",onSubmit:f=>{f.preventDefault(),V().then()},children:[e.jsx(F,{rating:b,onRatingChange:f=>{S(f)},starSize:32}),e.jsxs("div",{className:"mt-3 flex flex-col gap-1",children:[e.jsxs("label",{htmlFor:"rating-feedback",className:"block text-sm font-medium",children:["Feedback to Creator"," ",e.jsx("span",{className:"font-normal text-gray-400",children:"(Optional)"})]}),e.jsx("textarea",{id:"rating-feedback",className:"min-h-24 rounded-md border p-2 text-sm outline-hidden focus:border-gray-500",placeholder:"Share your thoughts with the roadmap creator",value:k,onChange:f=>{E(f.target.value)}})]}),e.jsxs("div",{className:R("mt-4 grid grid-cols-2 gap-1"),children:[e.jsx("button",{className:"h-10 w-full rounded-full border p-2.5 text-sm font-medium disabled:opacity-60",onClick:()=>{x(!1)},type:"button",disabled:u,children:"Cancel"}),e.jsx("button",{className:"flex h-10 w-full items-center justify-center rounded-full bg-black p-2.5 text-sm font-medium text-white disabled:opacity-60",type:"submit",disabled:u,children:u?e.jsx(A,{className:"size-4 animate-spin"}):c?"Update Rating":"Submit Rating"})]})]})]})]})}function Ye(o){const{roadmapSlug:s,ratings:t}=o,a=Object.keys(t.breakdown||{}).reduce((u,w)=>u+t.breakdown[w],0),r=t.average,[n,l]=i.useState(!0),[h,p]=i.useState(""),[m,g]=i.useState(null),N=async(u=1)=>{l(!0);const{response:w,error:j}=await H(`https://api.hnmdevs.com/v1-list-roadmap-ratings/${s}`,{currPage:u});if(!w||j){p(j?.message||"Something went wrong"),l(!1);return}g(w),p(""),l(!1)};if(i.useEffect(()=>{$()&&N().then()},[]),h)return e.jsxs("div",{className:"flex flex-col items-center justify-center bg-white py-10",children:[e.jsx(he,{className:"size-12 text-red-500"}),e.jsx("p",{className:"mt-3 text-lg text-red-500",children:h})]});const y=m?.data||[];return e.jsxs("div",{className:"relative min-h-[100px] overflow-auto rounded-lg bg-white p-2 md:max-h-[550px]",children:[n&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(K,{isDualRing:!1})}),!n&&y.length>0&&e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"sticky top-1.5 mb-2 flex items-center justify-center gap-1 rounded-lg bg-yellow-50 px-2 py-1.5 text-sm text-yellow-900",children:[e.jsxs("span",{children:["Rated"," ",e.jsx("span",{className:"font-medium",children:r.toFixed(1)})]}),e.jsx(F,{starSize:15,rating:r,readOnly:!0}),"by"," ",e.jsxs("span",{className:"font-medium",children:[a," user",a>1&&"s"]})]}),e.jsx("div",{className:"mb-3 flex flex-col",children:y.map(u=>{const w=u?.avatar?`https://dodrc8eu8m09s.cloudfront.net/avatars/${u.avatar}`:"/images/default-avatar.png",j=y[y.length-1]._id===u._id;return e.jsxs("div",{className:R("px-2 py-2.5",{"border-b":!j}),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:w,alt:u.name,className:"h-4 w-4 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:u.name})]}),e.jsx("span",{className:"text-xs text-gray-400",children:pe(u.createdAt)})]}),e.jsxs("div",{className:"mt-2.5",children:[e.jsx(F,{rating:u.rating,readOnly:!0}),u.feedback&&e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:u.feedback})]})]},u._id)})}),e.jsx(ue,{variant:"minimal",totalCount:m?.totalCount||1,currPage:m?.currPage||1,totalPages:m?.totalPages||1,perPage:m?.perPage||1,onPageChange:u=>{N(u).then()}})]}),!n&&y.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[e.jsx(ge,{className:"size-12 text-gray-200"}),e.jsx("p",{className:"mt-3 text-base text-gray-600",children:"No Feedbacks"})]})]})}function Ge(o){const{onClose:s,ratings:t,roadmapSlug:a,canManage:r=!1}=o,[n,l]=i.useState(r?"feedback":"ratings");return e.jsxs(Y,{onClose:s,bodyClassName:"bg-transparent shadow-none",wrapperClassName:"h-auto",overlayClassName:"items-start md:items-center",children:[n==="ratings"&&e.jsx(He,{ratings:t,roadmapSlug:a,canManage:r}),n==="feedback"&&e.jsx(Ye,{ratings:t,roadmapSlug:a})]})}function Ke(o){const{ratings:s,roadmapSlug:t,canManage:a,unseenRatingCount:r}=o,n=s?.average||0,l=Object.keys(s?.breakdown||{}).reduce((m,g)=>m+s?.breakdown[g],0),[h,p]=i.useState(!1);return e.jsxs(e.Fragment,{children:[h&&e.jsx(Ge,{roadmapSlug:t,onClose:()=>{p(!1)},ratings:s,canManage:a}),n===0&&e.jsxs(e.Fragment,{children:[!a&&e.jsxs("button",{className:"flex h-[34px] items-center gap-2 rounded-md border border-gray-300 bg-white py-1 pl-2 pr-3 text-sm font-medium hover:border-black",onClick:()=>{if(!$()){G();return}p(!0)},children:[e.jsx(L,{className:"size-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"hidden md:block",children:"Rate this roadmap"}),e.jsx("span",{className:"block md:hidden",children:"Rate"})]}),a&&e.jsxs("span",{className:"flex h-[34px] cursor-default items-center gap-2 rounded-md border border-gray-300 bg-white py-1 pl-2 pr-3 text-sm font-medium opacity-50",children:[e.jsx(L,{className:"size-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"hidden md:block",children:"No ratings yet"}),e.jsx("span",{className:"block md:hidden",children:"Rate"})]})]}),n>0&&e.jsxs("button",{className:"relative flex h-[34px] items-center gap-2 rounded-md border border-gray-300 bg-white py-1 pl-2 pr-3 text-sm font-medium hover:border-black",onClick:()=>{p(!0)},children:[n.toFixed(1),e.jsx("span",{className:"hidden lg:block",children:e.jsx(F,{starSize:16,rating:n,className:"pointer-events-none gap-px",readOnly:!0})}),e.jsx("span",{className:"lg:hidden",children:e.jsx(L,{className:"size-5 fill-yellow-400 text-yellow-400"})}),"(",l,")",a&&r>0&&e.jsx("span",{className:"absolute right-0 top-0 flex size-4 -translate-y-1/2 translate-x-1/2 items-center justify-center rounded-full bg-red-500 text-[10px] font-medium leading-none text-white",children:r})]})]})}function J(o){const{onClose:s}=o,t=M(),a=I(C),r=fe({mutationFn:async()=>je(`/v1-submit-for-showcase/${a?._id}`,{}),onSuccess:()=>{_.invalidateQueries({queryKey:["get-roadmap"]}),s()},onError:m=>{t.error(m?.message||"Something went wrong")}},_),{showcaseStatus:n,showcaseRejectedReason:l,showcaseRejectedAt:h,updatedAt:p}=a||{};return e.jsx(Y,{onClose:s,children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:n==="rejected_with_reason"?"Rejected with Reason":"Feature Your Roadmap"}),e.jsxs("p",{className:"mt-2 text-sm",children:[n==="rejected_with_reason"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"block rounded-md bg-red-100 px-2 py-1.5 text-red-700",children:l}),e.jsx("span",{className:"block mt-3",children:"Feel free to make changes to your roadmap and resubmit."})]}),!n&&e.jsxs(e.Fragment,{children:["We will review your roadmap and if accepted, we will make it public and show it on the community roadmap listing."," ",e.jsx("span",{className:"mt-4 block font-medium",children:"Are you sure to submit?"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[e.jsx("button",{className:"grow cursor-pointer rounded-lg bg-gray-200 py-2 text-center text-sm hover:bg-gray-300",onClick:s,disabled:r.isPending,children:"Cancel"}),e.jsx("button",{className:"w-full rounded-lg bg-gray-900 py-2 text-sm text-white hover:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-60",disabled:r.isPending,onClick:()=>{const m=p&&z.fromJSDate(new Date(p)),g=h&&z.fromJSDate(new Date(h));if(g&&m&&m<g){t.error("You need to make changes to your roadmap before resubmitting.");return}r.mutate()},children:r.isPending?"Submitting...":n==="rejected_with_reason"?"Resubmit":"Submit"})]})]})})}function Je(o){const{currentRoadmap:s}=o,{showcaseStatus:t}=s,[a,r]=i.useState(!1);return!s||t||s.aiRoadmapId?null:e.jsxs(e.Fragment,{children:[a&&e.jsx(J,{onClose:()=>{r(!1)}}),e.jsxs("button",{className:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white py-1.5 pl-2 pr-2 text-xs font-medium text-black hover:border-gray-300 hover:bg-gray-300 sm:pl-1.5 sm:pr-3 sm:text-sm",onClick:()=>{r(!0)},disabled:!!t,children:[e.jsx(Ne,{className:"mr-0 h-4 w-4 stroke-[2.5] sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Apply to be Featured"})]})]})}function Qe(o){const{currentRoadmap:s}=o,[t,a]=i.useState(!1),{showcaseStatus:r}=s;if(!r)return null;const l={submitted:{icon:ke,label:"We are currently reviewing your roadmap, please wait for our response.",className:"bg-blue-100 text-blue-600 border-blue-200"},approved:{icon:Ue,label:"Hooray! Your roadmap is now visible on the community page.",className:"text-green-600 bg-green-100 border-green-300"},rejected:{icon:ve,label:"Sorry, we are unable to feature your roadmap at this time.",className:"text-red-600 bg-red-100 border-red-300"},rejected_with_reason:{icon:xe,label:e.jsxs(e.Fragment,{children:["Your roadmap could not be featured at this time"," ",e.jsx("button",{className:"font-medium underline underline-offset-2 hover:text-red-800",onClick:()=>{a(!0)},children:"click here to see why"})]}),className:"text-red-800 bg-red-200 border-red-200"}}[r];if(!l)return null;const{icon:h,label:p,className:m}=l;return e.jsxs(e.Fragment,{children:[t&&e.jsx(J,{onClose:()=>{a(!1)}}),e.jsx("div",{className:R("z-10 border-b -mb-4",l.className),children:e.jsx("div",{className:"container relative flex items-center justify-center py-2 text-sm",children:e.jsxs("div",{className:R("flex items-center gap-2",m),children:[e.jsx(h,{className:"h-4 w-4 shrink-0 stroke-[2.5]"}),e.jsx("div",{children:p})]})})})]})}function Ve(o){const s=I(B),t=I(C),{title:a,description:r,_id:n,slug:l,creator:h,team:p,visibility:m,ratings:g,unseenRatingCount:N,showcaseStatus:y}=I(C)||{},[u,w]=i.useState(!1),j=M();async function x(){D.set("Deleting roadmap");const d=t?.teamId,b="https://api.hnmdevs.com";let S,k;if(d?{error:S,response:k}=await se(`${b}/v1-delete-team-resource-config/${d}`,{resourceId:n,resourceType:"roadmap"}):{error:S,response:k}=await te(`${b}/v1-delete-roadmap/${n}`),S||!k){j.error(S?.message||"Something went wrong");return}j.success("Roadmap removed"),d?window.location.href=`/team/roadmaps?t=${d}`:window.location.href="/account/roadmaps"}const c=h?.avatar?`https://dodrc8eu8m09s.cloudfront.net/avatars/${h?.avatar}`:"/images/default-avatar.png";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative border-b",children:[t&&s&&e.jsx(Qe,{currentRoadmap:t}),e.jsxs("div",{className:"container relative py-5 sm:py-12",children:[!s&&e.jsx(We,{}),h?.name&&e.jsxs("div",{className:"-mb-1 flex items-center gap-1.5 text-sm text-gray-500",children:[e.jsx("img",{alt:h.name,src:c,className:"h-5 w-5 rounded-full"}),e.jsxs("span",{children:["Created by ",e.jsx("span",{className:"font-semibold text-gray-900",children:h?.name}),p&&e.jsxs(e.Fragment,{children:[" from ",e.jsx("span",{className:"font-semibold text-gray-900",children:p?.name})]})]})]}),e.jsxs("div",{className:"mb-3 mt-4 sm:mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold sm:mb-2 sm:text-4xl",children:a}),e.jsx("p",{className:"mt-0.5 text-sm text-gray-500 sm:text-lg",children:r})]}),e.jsxs("div",{className:"flex justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{className:"flex justify-stretch gap-1 sm:gap-2",children:[e.jsxs("a",{href:"/community",className:"rounded-md bg-gray-500 px-3 py-1.5 text-xs font-medium text-white hover:bg-gray-600 sm:text-sm","aria-label":"Back to All Roadmaps",children:["←",e.jsx("span",{className:"hidden sm:inline",children:" Discover more"})]}),e.jsx(le,{roadmapId:n,description:r,pageUrl:`https://roadmap.sh/r/${l}`,allowEmbed:!0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsxs(e.Fragment,{children:[u&&t&&e.jsx(W,{roadmapSlug:t?.slug,isDiscoverable:t.isDiscoverable,description:t?.description,visibility:t?.visibility,teamId:t?.teamId,roadmapId:t?._id,sharedFriendIds:t?.sharedFriendIds||[],sharedTeamMemberIds:t?.sharedTeamMemberIds||[],onClose:()=>w(!1),onShareSettingsUpdate:d=>{C.set({...t,...d})}}),t&&e.jsx(Je,{currentRoadmap:t}),e.jsx(Be,{onUpdateSharing:()=>w(!0),onCustomize:()=>{window.location.href=`https://draw.hnmdevs.com/${t?._id}`},onDelete:()=>{window.confirm("Are you sure you want to delete this roadmap?")&&x().finally(()=>null)}})]}),y==="approved"&&e.jsx(Ke,{roadmapSlug:l,ratings:g,canManage:s,unseenRatingCount:N||0})]})]}),e.jsx(qe,{roadmapTitle:a,roadmapId:n})]})]})})}function Ze(o){const{error:s}=o;return s.status===404?e.jsx(O,{icon:e.jsx(U,{className:"h-16 w-16"}),title:"Roadmap not found",message:"The roadmap you are looking for does not exist or has been deleted."}):e.jsx(O,{icon:e.jsx(U,{className:"h-16 w-16"}),title:"Restricted Access",message:s?.message})}function O(o){const{title:s,message:t,icon:a}=o;return e.jsxs("div",{className:"flex grow flex-col items-center justify-center",children:[a,e.jsx("h2",{className:"mt-4 text-2xl font-semibold",children:s}),e.jsx("p",{children:t||"This roadmap is not available for public access."}),e.jsx("a",{href:"/",className:"mt-4 font-medium underline underline-offset-2 hover:no-underline",children:"← Go back to home"})]})}function Xe(o){const{roadmapId:s,canManage:t,className:a}=o,r=`https://draw.hnmdevs.com/${s}`;return e.jsx("div",{className:R("flex h-full items-center justify-center",a),children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(_e,{className:"mx-auto h-20 w-20 text-gray-400"}),e.jsx("h3",{className:"mt-2",children:"This roadmap is currently empty."}),t&&e.jsxs("a",{href:r,className:"mt-4 flex items-center rounded-md bg-gray-500 px-4 py-2 font-medium text-white hover:bg-gray-600",children:[e.jsx($e,{className:"mr-2 inline-block h-4 w-4"}),"Edit Roadmap"]})]})})}function es(o){const{roadmap:s,isEmbed:t=!1}=o,a=String(s._id),[r,n]=i.useState(!1),l=i.useRef(null),h=M();async function p(x,c){t||(D.set("Updating progress"),Ie({resourceId:a,resourceType:"roadmap",topicId:x},c).then(()=>{Fe(x,c)}).catch(d=>{h.error("Something went wrong, please try again."),console.error(d)}).finally(()=>{D.set(""),Te()}))}const m=i.useCallback((x,c)=>{const d=c?.type==="todo"?document.querySelector(`[data-id="${c.id}"]`):x?.currentTarget;if(!d)return;const b=d?.classList.contains("done");p(c.id,b?"pending":"done")},[]),g=i.useCallback((x,c)=>{const d=x?.currentTarget;if(!d)return;const b=d?.classList.contains("learning");p(c.id,b?"pending":"learning")},[]),N=i.useCallback((x,c)=>{const d=x?.currentTarget;if(!d)return;const b=d?.classList.contains("skipped");p(c.id,b?"pending":"skipped")},[]),y=i.useCallback((x,c)=>{x?.currentTarget&&window.dispatchEvent(new CustomEvent("roadmap.node.click",{detail:{topicId:c.id,resourceId:a,resourceType:"roadmap",isCustomResource:!0}}))},[]),u=i.useCallback((x,c)=>{if(!c)return;c.startsWith("http")?window.open(c,"_blank"):window.location.href=c},[]),w=i.useCallback((x,c)=>{const d=x?.currentTarget;if(!d)return;const b=d?.classList.contains("done");p(c,b?"pending":"done")},[]),j=i.useCallback((x,c)=>{const d=x?.currentTarget;if(!d)return;const b=d?.classList.contains("done");p(c,b?"pending":"done")},[]);return e.jsxs(e.Fragment,{children:[r&&e.jsx(Xe,{roadmapId:a,canManage:s.canManage||!1,className:"grow"}),e.jsx(Se,{ref:l,roadmap:s,className:R(s?.nodes?.length===0?"grow":"min-h-0 max-md:min-h-[1000px]"),onRendered:()=>{Ce("roadmap",a).then(()=>{X.set(s?.nodes?.filter(x=>["topic","subtopic"].includes(x.type)).length||0),s?.nodes?.length===0&&(n(!0),l?.current?.classList.add("hidden"))})},onTopicClick:y,onTopicRightClick:m,onTopicShiftClick:g,onTopicAltClick:N,onButtonNodeClick:u,onLinkClick:u,onChecklistCheckboxClick:w,onChecklistLableClick:j,fontFamily:"Balsamiq Sans",fontURL:"/fonts/balsamiq.woff2"})]})}function ss(o){const{slug:s,id:t,secret:a}=o;return be({queryKey:["get-roadmap",{slug:s,id:t}],queryFn:async()=>{try{const r=s?new URL(`https://api.hnmdevs.com/v1-get-roadmap-by-slug/${s}`):new URL(`https://api.hnmdevs.com/v1-get-roadmap/${t}`);return a&&r.searchParams.set("secret",a),await ye(r.toString())}catch(r){throw r instanceof SyntaxError?new we(404,"Roadmap not found"):r}},retry:!1,enabled:!!(s||t)},_)}function q(){const o=document.querySelector("[data-roadmap-loader]");o&&o.remove()}function Gt(o){const{isEmbed:s=!1,slug:t}=o,{id:a,secret:r}=Z(),[n,l]=i.useState(!0),[h,p]=i.useState(null),{data:m,error:g}=ss({id:a,secret:r,slug:t});return i.useEffect(()=>{m&&(document.title=`${m.title} - roadmap.sh`,p(m),C.set(m),l(!1),q())},[m]),i.useEffect(()=>{g&&(l(!1),q())},[g]),n?null:g?e.jsx(Ze,{error:g}):e.jsxs(e.Fragment,{children:[!s&&e.jsx(Ve,{}),e.jsx(es,{isEmbed:s,roadmap:h}),e.jsx(Re,{resourceId:h._id,resourceTitle:h.title,resourceType:"roadmap",renderer:"editor",isEmbed:s,canSubmitContribution:!1})]})}export{Gt as CustomRoadmap};
