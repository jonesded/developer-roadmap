import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.Z3BHPS3u.js";import{d as m}from"./http.BJhNQusg.js";import{l as f}from"./auth.Blx_4y9V.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.CznIeghd.js";import"./jwt.1xGNZsvU.js";function w(){const[a,o]=s.useState(!1),[c,r]=s.useState(""),[n,i]=s.useState("");s.useEffect(()=>{r(""),i("")},[]);const l=async t=>{if(t.preventDefault(),o(!0),r(""),n.toUpperCase()!=="DELETE"){r("Verification text does not match"),o(!1);return}const{response:p,error:d}=await m("https://api.roadmap.sh/v1-delete-account");if(d||!p){o(!1),r(d?.message||"Something went wrong");return}f()},u=()=>{o(!1),r(""),i("");const t=document.getElementById("delete-account-popup");t?.classList.add("hidden"),t?.classList.remove("flex")};return e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{className:"my-4",children:[e.jsx("input",{type:"text",name:"delete-account",id:"delete-account",className:"mt-2 block w-full rounded-md border border-gray-300 px-3 py-2 outline-hidden placeholder:text-gray-400 focus:border-gray-400",placeholder:'Type "delete" to confirm',required:!0,autoFocus:!0,value:n,onInput:t=>i(t.target.value)}),c&&e.jsx("p",{className:"mt-2 rounded-lg bg-red-100 p-2 text-red-700",children:c})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:a,onClick:u,className:"grow cursor-pointer rounded-lg bg-gray-200 py-2 text-center",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a||n.toUpperCase()!=="DELETE",className:"grow cursor-pointer rounded-lg bg-red-500 py-2 text-white disabled:opacity-40",children:a?"Please wait ..":"Confirm"})]})]})}export{w as DeleteAccountForm};
