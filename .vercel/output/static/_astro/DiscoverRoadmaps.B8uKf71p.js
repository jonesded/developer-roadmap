import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{P as C}from"./Pagination.DomnIFR-.js";import{r as o}from"./index.Z3BHPS3u.js";import{u as R}from"./use-debounce.CXZLeMbB.js";import{S}from"./Spinner.CPY-6wbR.js";import{S as k}from"./search.CUAljTEc.js";import{C as w}from"./CreateRoadmapModal.CA3sOjAy.js";import{M as j}from"./map.DuWy2ZcB.js";import{W as P}from"./wand-sparkles.8eLpe3am.js";import{R as T}from"./Rating.DEITR7Qp.js";import{g as L,s as A,d as f}from"./browser.3c2kCsRM.js";import{L as I}from"./LoadingRoadmaps.BFltfG4F.js";import{a as B}from"./http.BJhNQusg.js";import{u as D}from"./use-toast.BdCcSTJE.js";import{u as E}from"./use-outside-click.DYGsxgbd.js";import{C as F}from"./chevron-down.pBq1owZr.js";import{C as O}from"./check.DflWYpXj.js";import{S as V}from"./shapes.Dk0DUUzC.js";import"./classname.y9b8gBZq.js";import"./number.DnDLgi2j.js";import"./ellipsis.BcvtAoad.js";import"./createLucideIcon.BSLrQS80.js";import"./Modal.NtjGPDbq.js";import"./use-keydown.r409VyJJ.js";import"./x.BOdyWiWF.js";import"./loader-circle.DfB4mNyf.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.CznIeghd.js";import"./jwt.1xGNZsvU.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";function q(c){const{total:l,value:s,onValueChange:r,isLoading:i}=c,[m,n]=o.useState(s),a=R(m,500);return o.useEffect(()=>{n(s)},[s]),o.useEffect(()=>{a&&a.length<3||a!==s&&r(a)},[a]),e.jsxs("div",{className:"relative flex w-full items-center gap-3",children:[e.jsxs("form",{className:"relative flex w-full max-w-[310px] items-center",onSubmit:d=>{d.preventDefault(),r(m)},children:[e.jsx("label",{className:"absolute left-3 flex h-full items-center text-gray-500",htmlFor:"search",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx("input",{id:"q",name:"q",type:"text",minLength:3,placeholder:"Type 3 or more characters to search...",className:"w-full rounded-md border border-gray-200 px-3 py-2 pl-9 text-sm transition-colors focus:border-black focus:outline-hidden",value:m,onChange:d=>n(d.target.value)}),i&&e.jsx("span",{className:"absolute right-3 top-0 flex h-full items-center text-gray-500",children:e.jsx(S,{isDualRing:!1,className:"h-3 w-3"})})]}),l>0&&e.jsxs("p",{className:"hidden shrink-0 text-sm text-gray-500 sm:block",children:[Intl.NumberFormat("en-US",{notation:"compact"}).format(l)," ","result",l>1?"s":""," found"]})]})}function U(){const[c,l]=o.useState(!1),s=c&&e.jsx(w,{onClose:()=>l(!1),onCreated:r=>{window.location.href=`https://draw.hnmdevs.com/${r?._id}`}});return e.jsxs(e.Fragment,{children:[s,e.jsxs("div",{className:"flex min-h-[250px] flex-col items-center justify-center rounded-xl border px-5 py-3 sm:px-0 sm:py-20 bg-white",children:[e.jsx(j,{className:"mb-4 h-8 w-8 opacity-10 sm:h-14 sm:w-14"}),e.jsx("h2",{className:"mb-1 text-lg font-semibold sm:text-xl",children:"No Roadmaps Found"}),e.jsx("p",{className:"mb-3 text-balance text-center text-xs text-gray-800 sm:text-sm",children:"Try searching for something else or create a new roadmap."}),e.jsxs("div",{className:"flex flex-col items-center gap-1 sm:flex-row sm:gap-1.5",children:[e.jsxs("button",{className:"flex w-full items-center gap-1.5 rounded-md bg-gray-900 px-3 py-1.5 text-xs text-white sm:w-auto sm:text-sm",type:"button",onClick:()=>{l(!0)},children:[e.jsx(P,{className:"h-4 w-4"}),"Create your Roadmap"]}),e.jsxs("a",{href:"/roadmaps",className:"flex w-full items-center gap-1.5 rounded-md bg-gray-300 px-3 py-1.5 text-xs text-black hover:bg-gray-400 sm:w-auto sm:text-sm",children:[e.jsx(j,{className:"h-4 w-4"}),"Visit Official Roadmaps"]})]})]})]})}const y=[{label:"Newest",value:"createdAt"},{label:"Oldest",value:"-createdAt"},{label:"Highest Rated",value:"rating"},{label:"Lowest Rated",value:"-rating"}];function M(c){const{sortBy:l,onSortChange:s}=c,[r,i]=o.useState(!1),m=o.useRef(null),n=y.find(a=>a.value===l);return E(m,()=>{i(!1)}),e.jsxs("div",{className:"min-auto relative flex shrink-0 sm:min-w-[140px]",ref:m,children:[e.jsxs("button",{className:"flex w-full items-center justify-between gap-2 rounded-md border bg-white px-2 text-sm",onClick:()=>i(!r),children:[e.jsx("span",{children:n?.label}),e.jsx("span",{children:e.jsx(F,{className:"ml-4 h-3.5 w-3.5"})})]}),r&&e.jsx("div",{className:"absolute top-10 right-0 z-10 min-w-40 overflow-hidden rounded-md border border-gray-200 bg-white shadow-lg",children:y.map(a=>e.jsxs("button",{className:"flex w-full items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100",onClick:()=>{s(a.value),i(!1)},children:[e.jsx("span",{children:a.label}),a.value===l&&e.jsx(O,{className:"ml-auto h-4 w-4"})]},a.value))})]})}function je(c){const l=D(),[s,r]=o.useState({searchTerm:"",sortBy:"createdAt",currentPage:0}),[i,m]=o.useState(!0),[n,a]=o.useState(null);o.useEffect(()=>{const t=L();r({searchTerm:t.q||"",sortBy:t.s||"createdAt",currentPage:+(t.p||"1")})},[]),o.useEffect(()=>{m(!0),s.currentPage&&(s.currentPage!==1||s.searchTerm!==""||s.sortBy!=="createdAt"?A({q:s.searchTerm,s:s.sortBy,p:String(s.currentPage)}):(f("q"),f("s"),f("p")),d(s.currentPage,s.searchTerm,s.sortBy).finally(()=>{m(!1)}))},[s]);const d=async(t=1,x="",p="createdAt")=>{const{response:u,error:g}=await B("https://api.hnmdevs.com/v1-list-showcase-roadmap",{currPage:t,...x&&{searchTerm:x},...p&&{sortBy:p}});if(g||!u){l.error(g?.message||"Something went wrong");return}a(u)},[N,b]=o.useState(!1),h=n?.data||[],v=i&&e.jsx(I,{});return e.jsxs(e.Fragment,{children:[N&&e.jsx(w,{onClose:()=>{b(!1)}}),e.jsx("div",{className:"border-b bg-white pt-10 pb-7",children:e.jsx("div",{className:"container text-left",children:e.jsxs("div",{className:"flex flex-col items-start bg-white",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold sm:text-4xl",children:"Community Roadmaps"}),e.jsx("p",{className:"mb-5 text-base text-gray-500",children:"A selected list of community-created roadmaps"}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-1.5",children:[e.jsx("span",{className:"group relative normal-case",children:e.jsx("button",{className:"rounded-md bg-black px-3.5 py-1.5 text-sm font-medium text-white transition-colors hover:bg-black",onClick:()=>{b(!0)},children:"Create your own roadmap"})}),e.jsx("span",{className:"group relative normal-case",children:e.jsx("a",{href:"/roadmaps",className:"inline-block rounded-md bg-gray-300 px-3.5 py-1.5 text-sm text-black sm:py-1.5 sm:text-sm",children:"Visit our official roadmaps"})})]})})]})})}),e.jsx("div",{className:"bg-gray-50 py-3",children:e.jsxs("section",{className:"container mx-auto py-3",children:[e.jsxs("div",{className:"mb-3.5 flex items-stretch justify-between gap-2.5",children:[e.jsx(q,{total:n?.totalCount||0,value:s.searchTerm,isLoading:i,onValueChange:t=>{r({...s,searchTerm:t,currentPage:1})}}),e.jsx(M,{sortBy:s.sortBy,onSortChange:t=>{r({...s,sortBy:t})}})]}),v,h.length===0&&!i&&e.jsx(U,{}),h.length>0&&!i&&e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"mb-4 grid grid-cols-1 items-stretch gap-3 sm:grid-cols-2 lg:grid-cols-3",children:h.map(t=>{const x=`/r/${t.slug}`,p=Object.keys(t.ratings?.breakdown||[]).reduce((u,g)=>u+t.ratings.breakdown[g],0);return e.jsx("li",{className:"h-full min-h-[175px]",children:e.jsxs("a",{href:x,className:"flex h-full flex-col rounded-lg border bg-white p-3.5 transition-colors hover:border-gray-300 hover:bg-gray-50",target:"_blank",children:[e.jsxs("div",{className:"grow",children:[e.jsx("h2",{className:"text-balance text-base font-bold leading-tight",children:t.title}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:t.description})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-400",children:[e.jsx(V,{size:15,className:"inline-block"}),Intl.NumberFormat("en-US",{notation:"compact"}).format(t.topicCount)," "]}),e.jsx(T,{rating:t?.ratings?.average||0,readOnly:!0,starSize:16,total:p})]})]},t._id)},t._id)})}),e.jsx(C,{currPage:n?.currPage||1,totalPages:n?.totalPages||1,perPage:n?.perPage||0,totalCount:n?.totalCount||0,onPageChange:t=>{r({...s,currentPage:t})}})]})]})})]})}export{je as DiscoverRoadmaps};
