import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as m}from"./index.Z3BHPS3u.js";import{u as N}from"./use-toast.BdCcSTJE.js";import{a as v}from"./http.BJhNQusg.js";import{A as S}from"./AIRoadmapAlert.D0uIaTNH.js";import{u as P}from"./use-outside-click.DYGsxgbd.js";import{C as A}from"./chevron-down.pBq1owZr.js";import{C}from"./check.DflWYpXj.js";import{g as R,s as k,d}from"./browser.3c2kCsRM.js";import{P as I}from"./Pagination.DomnIFR-.js";import{L as E}from"./LoadingRoadmaps.BFltfG4F.js";import{W as h}from"./wand-sparkles.8eLpe3am.js";import{M as T}from"./map.DuWy2ZcB.js";import{g as L}from"./date.2wIYh-wy.js";import{E as B}from"./eye.mqNm1dCT.js";import{u as F}from"./use-debounce.CXZLeMbB.js";import{S as O}from"./Spinner.CPY-6wbR.js";import{S as U}from"./search.CUAljTEc.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.CznIeghd.js";import"./jwt.1xGNZsvU.js";import"./RoadmapAlert.rjvsIjnq.js";import"./classname.y9b8gBZq.js";import"./createLucideIcon.BSLrQS80.js";import"./heart-handshake.ChP6KiKS.js";import"./bot.CQ2bIWO6.js";import"./number.DnDLgi2j.js";import"./ellipsis.BcvtAoad.js";const j=[{label:"Most Viewed",value:"viewCount"},{label:"Newest",value:"createdAt"},{label:"Oldest",value:"-createdAt"}];function V(i){const{sortBy:s,onSortChange:n}=i,[t,r]=m.useState(!1),o=m.useRef(null),c=j.find(a=>a.value===s);return P(o,()=>{r(!1)}),e.jsxs("div",{className:"min-auto relative flex shrink-0 sm:min-w-[140px]",ref:o,children:[e.jsxs("button",{className:"flex w-full items-center justify-between gap-2 rounded-md border px-2 text-sm",onClick:()=>r(!t),children:[e.jsx("span",{children:c?.label}),e.jsx("span",{children:e.jsx(A,{className:"ml-4 h-3.5 w-3.5"})})]}),t&&e.jsx("div",{className:"absolute top-10 right-0 z-10 min-w-40 overflow-hidden rounded-md border border-gray-200 bg-white shadow-lg",children:j.map(a=>e.jsxs("button",{className:"flex w-full items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100",onClick:()=>{n(a.value),r(!1)},children:[e.jsx("span",{children:a.label}),a.value===s&&e.jsx(C,{className:"ml-auto h-4 w-4"})]},a.value))})]})}function q(){return e.jsxs("div",{className:"flex min-h-[250px] flex-col items-center justify-center rounded-xl border px-5 py-3 sm:px-0 sm:py-20",children:[e.jsx(h,{className:"mb-4 h-8 w-8 opacity-10 sm:h-14 sm:w-14"}),e.jsx("h2",{className:"mb-1 text-lg font-semibold sm:text-xl",children:"No Roadmaps Found"}),e.jsx("p",{className:"mb-3 text-balance text-center text-xs text-gray-800 sm:text-sm",children:"Try searching for something else or create a new roadmap with AI."}),e.jsxs("div",{className:"flex flex-col items-center gap-1 sm:flex-row sm:gap-1.5",children:[e.jsxs("a",{href:"/ai-roadmaps",className:"flex w-full items-center gap-1.5 rounded-md bg-gray-900 px-3 py-1.5 text-xs text-white sm:w-auto sm:text-sm",children:[e.jsx(h,{className:"h-4 w-4"}),"Create one with AI"]}),e.jsxs("a",{href:"/roadmaps",className:"flex w-full items-center gap-1.5 rounded-md bg-yellow-400 px-3 py-1.5 text-xs text-black hover:bg-yellow-500 sm:w-auto sm:text-sm",children:[e.jsx(T,{className:"h-4 w-4"}),"Visit Official Roadmaps"]})]})]})}function D(i){const{response:s}=i;if(!s)return null;const n=s.data||[];return e.jsx("ul",{className:"mb-4 grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-3",children:n.map(t=>{const r=`/ai-roadmaps/${t.slug}`;return e.jsxs("a",{href:r,className:"flex min-h-[95px] flex-col rounded-md border transition-colors hover:bg-gray-100",target:"_blank",children:[e.jsx("h2",{className:"grow px-2.5 py-2.5 text-base font-medium leading-tight",children:t.title}),e.jsxs("div",{className:"flex items-center justify-between gap-2 px-2.5 py-2",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-gray-400",children:[e.jsx(B,{size:15,className:"inline-block"}),Intl.NumberFormat("en-US",{notation:"compact"}).format(t.viewCount)," ","views"]}),e.jsx("span",{className:"flex items-center gap-1.5 text-xs text-gray-400",children:L(String(t?.createdAt))})]})]},t._id)})})}function M(i){const{onSubmit:s,isLoading:n=!1,total:t,value:r}=i,[o,c]=m.useState(r),a=F(o,500);return m.useEffect(()=>{c(r)},[r]),m.useEffect(()=>{a&&a.length<3||a!==r&&s(a)},[a]),e.jsxs("div",{className:"relative flex w-full items-center gap-3",children:[e.jsxs("div",{className:"relative flex w-full max-w-[310px] items-center",children:[e.jsx("label",{className:"absolute left-3 flex h-full items-center text-gray-500",htmlFor:"search",children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx("input",{id:"search",name:"search",type:"text",placeholder:"Type 3 or more characters to search...",className:"w-full rounded-md border border-gray-200 px-3 py-2 pl-9 text-sm transition-colors focus:border-black focus:outline-hidden",value:o,onChange:p=>c(p.target.value)}),n&&e.jsx("span",{className:"absolute right-3 top-0 flex h-full items-center text-gray-500",children:e.jsx(O,{isDualRing:!1,className:"h-3 w-3"})})]}),t>0&&e.jsxs("p",{className:"shrink-0 text-sm text-gray-500 hidden sm:block",children:[Intl.NumberFormat("en-US",{notation:"compact"}).format(t)," ","results found"]})]})}function je(){const i=N(),[s,n]=m.useState({searchTerm:"",sortBy:"createdAt",currentPage:0});m.useEffect(()=>{const l=R();n({searchTerm:l.q||"",sortBy:l.s||"createdAt",currentPage:+(l.p||"1")})},[]),m.useEffect(()=>{r(!0),s.currentPage&&(s.currentPage!==1||s.searchTerm!==""||s.sortBy!=="createdAt"?k({q:s.searchTerm,s:s.sortBy,p:String(s.currentPage)}):(d("q"),d("s"),d("p")),a(s.currentPage,s.searchTerm,s.sortBy).finally(()=>{r(!1)}))},[s]);const[t,r]=m.useState(!0),[o,c]=m.useState(null),a=async(l=1,u="",x="createdAt")=>{const{response:f,error:g}=await v("https://api.roadmap.sh/v1-list-ai-roadmaps",{currPage:l,...u&&{term:u},...x&&{sortBy:x}});if(g||!f){i.error(g?.message||"Something went wrong");return}c(f)},p=o?.data||[],b=t&&e.jsx(E,{}),y=!t&&p.length===0&&e.jsx(q,{}),w=!t&&p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(D,{response:o}),e.jsx(I,{currPage:o?.currPage||1,totalPages:o?.totalPages||1,perPage:o?.perPage||0,isDisabled:t,totalCount:o?.totalCount||0,onPageChange:l=>{n({...s,currentPage:l})}})]});return e.jsxs("section",{className:"container mx-auto py-3 sm:py-6",children:[e.jsx(S,{isListing:!0}),e.jsxs("div",{className:"my-3.5 flex items-stretch justify-between gap-2.5",children:[e.jsx(M,{total:o?.totalCount||0,isLoading:t,value:s.searchTerm,onSubmit:l=>{n({...s,searchTerm:l,currentPage:1})}}),e.jsx(V,{sortBy:s.sortBy,onSortChange:l=>{n({...s,sortBy:l,currentPage:1})}})]}),b,y,w]})}export{je as ExploreAIRoadmap};
