import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.Z3BHPS3u.js";import{g as F}from"./browser.3c2kCsRM.js";import{i as O}from"./jwt.1xGNZsvU.js";import{g as G,A as Q}from"./generate-ai-course.DNd-WJtD.js";import{u as C,q as h}from"./query-client.zrB8z_yM.js";import{a as R,g as T}from"./ai-course.DbIkPj3f.js";import{g as v}from"./ai-questions.CsV5uBnQ.js";import{u as D}from"./billing.D5yrowA9.js";import{U as Y}from"./UpgradeAccountModal.fZmxo5nD.js";import"./js.cookie.Cz0CWeBA.js";import"./classname.y9b8gBZq.js";import"./ErrorIcon.BTBCVae1.js";import"./useMutation.BxVH4XRI.js";import"./ai.DmXEK0i3.js";import"./index.browser.OxPLOBIU.js";import"./markdown.CL3gtrVM.js";import"./preload-helper.BlTxHScW.js";import"./query-http.BQfMbvYq.js";import"./fp.esm.CznIeghd.js";import"./slugger.rj1cS6co.js";/* empty css                        */import"./use-outside-click.DYGsxgbd.js";import"./UpdatePreferences.ltxZElUq.js";import"./Modal.NtjGPDbq.js";import"./use-keydown.r409VyJJ.js";import"./x.BOdyWiWF.js";import"./createLucideIcon.BSLrQS80.js";import"./QuestionAnswerChat.C4o_FL4A.js";import"./index.BlPpvBlM.js";import"./index.Bbp-6C1p.js";import"./CheckIcon.D4OhQ5l1.js";import"./Tooltip.CCudSue-.js";import"./loader-circle.DfB4mNyf.js";import"./refresh-ccw.C3KtdZ75.js";import"./trash-2.CIQaIo_h.js";import"./send.BVE6djDn.js";import"./popup.CdCAhVM2.js";import"./square-pen.CCkK4Twl.js";import"./frown.DZolOWqV.js";import"./chevron-left.DdnmjL-W.js";import"./chevron-right.B-RYTm0N.js";import"./circle-x.BL3YVBBU.js";import"./circle.D81F4kBU.js";import"./AICourseLessonChat.BF6UaYaU.js";import"./react-textarea-autosize.browser.esm.CREEQHIU.js";import"./use-toast.BdCcSTJE.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";import"./Spinner.CPY-6wbR.js";import"./user-round.D2mOPNuO.js";import"./bot.CQ2bIWO6.js";import"./lock.C0C-BW9S.js";import"./message-circle.C1uJbl19.js";import"./check.DflWYpXj.js";import"./number.DnDLgi2j.js";import"./info.Cr2knUfd.js";import"./gift.C1ExsHI3.js";import"./chevron-down.pBq1owZr.js";import"./AILimitsPopup.D5vT42pW.js";/* empty css                        */import"./index.Dgut0sTl.js";import"./dom.B_TnKQIa.js";import"./resource-progress.DnX2IG6-.js";import"./http.BJhNQusg.js";import"./roadmap.DwTTnFhR.js";import"./index.BHh4vvK5.js";import"./copy.CgTXj779.js";import"./use-auth.Bw1nhFr_.js";import"./menu.B2j5jEPR.js";import"./map.DuWy2ZcB.js";import"./circle-alert.DQNBwVc5.js";import"./UpdatePlanConfirmation.CPFKRCnq.js";import"./VerifyUpgrade.ButUjaV5.js";import"./circle-check-big.CnV0y9bI.js";import"./zap.BNbCfd_G.js";function nt(b){const[m,S]=r.useState(""),[L,c]=r.useState(!0),[w,d]=r.useState(""),[A,I]=r.useState(!1),[U,x]=r.useState(""),[p,E]=r.useState(""),[j,g]=r.useState({title:"",modules:[],done:[]}),{data:a}=C(T({aiCourseSlug:p}),h),{isPaidUser:q,isLoading:M}=D(),{data:n,isLoading:P}=C(R(),h);r.useEffect(()=>{a&&g(a)},[a]);const f=M||P;r.useEffect(()=>{if(m||f)return;if(!q&&n&&n?.course?.used>=n?.course?.limit){d("You have reached the limit for this format"),c(!1),I(!0);return}const t=F(),o=t?.term,u=t?.src||"search";if(!o)return;S(o);const i=t?.id;let e=[];i&&(e=v(i)),l({term:o,src:u,questionAndAnswers:e})},[m,f]);const l=async t=>{const{term:o,isForce:u,prompt:i,src:e,questionAndAnswers:y}=t;if(!O()){window.location.href="/ai";return}await G({term:o,slug:p,onCourseSlugChange:E,onCreatorIdChange:x,onCourseChange:g,onLoadingChange:c,onError:d,questionAndAnswers:y,isForce:u,prompt:i,src:e})};return s.jsxs(s.Fragment,{children:[A&&s.jsx(Y,{onClose:()=>{window.location.href="/ai"}}),s.jsx(Q,{courseSlug:p,creatorId:U,course:j,isLoading:L,error:w,onRegenerateOutline:t=>{l({term:m,isForce:!0,prompt:t})}})]})}export{nt as GenerateAICourse};
