import{j as e}from"./jsx-runtime.D_zvdyIk.js";/* empty css                        */import{r as t}from"./index.Z3BHPS3u.js";import{u as pe}from"./use-toast.BdCcSTJE.js";import{generateAIRoadmapFromText as me,renderFlowJSON as ke}from"./index.Dgut0sTl.js";import{r as Ie}from"./dom.B_TnKQIa.js";import{i as z,r as xe,a as Ce,v as Ae}from"./jwt.1xGNZsvU.js";import{s as G}from"./popup.CdCAhVM2.js";import{c as M}from"./classname.y9b8gBZq.js";import{u as ue}from"./use-outside-click.DYGsxgbd.js";import{u as Te}from"./use-debounce.CXZLeMbB.js";import{a as se,h as Le}from"./http.BJhNQusg.js";import{S as ae}from"./Spinner.CPY-6wbR.js";import{U as fe}from"./UpgradeAccountModal.fZmxo5nD.js";import{u as he}from"./billing.D5yrowA9.js";import{c as ge}from"./createLucideIcon.BSLrQS80.js";import{B as re}from"./ban.BRPE8iYC.js";import{A as W}from"./arrow-up-right.CWJoE-FU.js";import{T as Q}from"./RoadmapAlert.rjvsIjnq.js";import{ShareRoadmapButton as Ee}from"./ShareRoadmapButton.C32XbsMw.js";import{p as F}from"./page.DyYQD7MX.js";import{g as Oe,d as Z}from"./browser.3c2kCsRM.js";import{a as De}from"./download-image.G3Mts95j.js";import{u as Ge}from"./use-keydown.r409VyJJ.js";import{m as ze}from"./markdown.CL3gtrVM.js";import{a as Me,I as Ue,b as Fe,g as Pe}from"./ai.DmXEK0i3.js";import{X as ce}from"./x.BOdyWiWF.js";import{A as _e}from"./arrow-right.BkJRCAfQ.js";import{F as $e}from"./file-text.BpqfdBL4.js";import{A as Ve}from"./AIRoadmapAlert.D0uIaTNH.js";import{AuthenticationForm as qe}from"./AuthenticationForm.DcPQtuUg.js";import{D as Be}from"./download.CmjyTBkv.js";import{S as He}from"./save.DQvlv1cT.js";import{S as Ke}from"./square-pen.CCkK4Twl.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.CznIeghd.js";import"./query-client.zrB8z_yM.js";import"./useMutation.BxVH4XRI.js";import"./query-http.BQfMbvYq.js";import"./Modal.NtjGPDbq.js";import"./UpdatePlanConfirmation.CPFKRCnq.js";import"./VerifyUpgrade.ButUjaV5.js";import"./circle-check-big.CnV0y9bI.js";import"./loader-circle.DfB4mNyf.js";import"./zap.BNbCfd_G.js";import"./message-circle.C1uJbl19.js";import"./map.DuWy2ZcB.js";import"./heart-handshake.ChP6KiKS.js";import"./use-copy-text.D2rWbbuk.js";import"./TwitterIcon.D4xHZP6Y.js";import"./index.BlfZEqDn.js";import"./roadmap.DwTTnFhR.js";import"./index.BHh4vvK5.js";import"./check.DflWYpXj.js";import"./copy.CgTXj779.js";import"./facebook.Diu2wQCs.js";import"./linkedin.DR3T_WSD.js";import"./preload-helper.BlTxHScW.js";import"./index.browser.OxPLOBIU.js";import"./bot.CQ2bIWO6.js";import"./GitHubButton.DYI50C4w.js";import"./GitHubIcon.NZCYHAdm.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]],Xe=ge("contact",Ye);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M15 4V2",key:"z1p9b7"}],["path",{d:"M15 16v-2",key:"px0unx"}],["path",{d:"M8 9h2",key:"1g203m"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M17.8 11.8 19 13",key:"yihg8r"}],["path",{d:"M15 9h.01",key:"x1ddxp"}],["path",{d:"M17.8 6.2 19 5",key:"fd4us0"}],["path",{d:"m3 21 9-9",key:"1jfql5"}],["path",{d:"M12.2 6.2 11 5",key:"i3da3b"}]],H=ge("wand",Je);function be(D){const{value:m,onValueChange:y,onSelect:c,inputClassName:p,wrapperClassName:h,placeholder:k,...w}=D;t.useMemo(()=>new Map,[]);const[f,I]=t.useState([]),g=pe(),A=t.useRef(null),j=t.useRef(null),x=t.useRef(!0),[b,l]=t.useState(!1),[T,U]=t.useState(!1),[a,L]=t.useState([]),[v,C]=t.useState(m),[E,N]=t.useState(0),P=Te(v,300),q=async()=>{if(f.length>0)return f;const{error:o,response:n}=await se("/pages.json");if(o){g.error(o.message||"Something went wrong");return}if(!n)return[];const B=n.filter(O=>O.group==="Roadmaps").sort((O,K)=>O.title==="Android"?1:O.title.localeCompare(K.title)).map(O=>({_id:O.id,term:O.title,title:O.title,isOfficial:!0}));return I(B),B};t.useEffect(()=>{x.current&&(x.current=!1,q().finally(()=>{}))},[]),ue(j,()=>{l(!1)});const S=P===v;return e.jsxs("div",{className:M("relative",h),children:[e.jsx("input",{...w,ref:A,type:"text",value:m,className:M("w-full rounded-md border border-gray-400 px-3 py-2.5 pr-8 transition-colors focus:border-black focus:outline-hidden",p),placeholder:k,autoComplete:"off",onChange:o=>{const n=o.target.value;C(n),y(n)},onFocus:()=>{l(!0)},onKeyDown:o=>{if(o.key==="ArrowDown"){const n=E<a.length-1;N(n?E+1:0)}else if(o.key==="ArrowUp"){const n=E>0;N(n?E-1:a.length-1)}else if(o.key==="Tab")b&&o.preventDefault();else if(o.key==="Escape")C(""),l(!1);else if(o.key==="Enter"){if(!a.length||!S)return;o.preventDefault();const n=a[E];if(n){if(n.isOfficial){window.open(`/${n._id}`,"_blank")?.focus();return}y(n.term),c?.(n._id,n.title),l(!1)}}}}),T&&e.jsx("div",{className:"absolute right-3 top-0 flex h-full items-center",children:e.jsx(ae,{isDualRing:!1,className:"h-5 w-5 animate-spin stroke-[2.5]"})}),b&&S&&a.length>0&&v.length>0&&e.jsx("div",{className:"absolute top-full z-50 mt-1 w-full rounded-md border bg-white p-1 shadow-sm",ref:j,children:e.jsx("div",{className:"flex flex-col",children:a.map((o,n)=>e.jsxs("button",{type:"button",className:M("flex w-full items-start rounded-sm p-2 text-left text-sm",n===E?"bg-gray-100":""),onMouseOver:()=>N(n),onClick:()=>{if(o.isOfficial){window.location.href=`/${o._id}`;return}y(o?.term),c?.(o._id,o.title),C(""),l(!1)},children:[e.jsx("span",{className:M("mr-2 whitespace-nowrap rounded-full p-1 px-1.5 text-xs leading-none",o.isOfficial?"bg-green-500 text-green-50":"bg-blue-400 text-blue-50"),children:o.isOfficial?"Official":"AI Generated"}),o?.title||o?.term]},o?._id))})})]})}function We(D){const{roadmapTerm:m,setRoadmapTerm:y,handleSubmit:c,limit:p=0,limitUsed:h=0,onLoadTerm:k,loadAIRoadmapLimit:w,isKeyOnly:f}=D,{isPaidUser:I}=he(),g=h<p,[A,j]=t.useState(!1),[x,b]=t.useState(!1),[l,T]=t.useState(!1);t.useEffect(()=>{b(z())},[]);const U=["OAuth","UI / UX","SRE","DevRel"];return e.jsxs("div",{className:"flex grow flex-col items-center px-4 py-6 sm:px-6 md:my-24 lg:my-32",children:[A&&e.jsx(fe,{onClose:()=>{j(!1),w()}}),e.jsxs("div",{className:"flex flex-col gap-0 text-center sm:gap-2",children:[e.jsxs("h1",{className:"relative text-2xl font-medium sm:text-3xl",children:[e.jsx("span",{className:"hidden sm:inline",children:"Generate roadmaps with AI"}),e.jsx("span",{className:"inline sm:hidden",children:"AI Roadmap Generator"})]}),e.jsxs("p",{className:"text-base text-gray-500 sm:text-lg",children:[e.jsx("span",{className:"hidden sm:inline",children:"Enter a topic and let the AI generate a roadmap for you"}),e.jsx("span",{className:"inline sm:hidden",children:"Enter a topic to generate a roadmap"})]})]}),e.jsxs("div",{className:"my-3 flex w-full max-w-[600px] flex-col items-center gap-3 sm:my-5",children:[e.jsxs("form",{onSubmit:a=>{p>0&&g?c(a):a.preventDefault()},className:"flex w-full flex-col gap-2 sm:flex-row",children:[e.jsx(be,{autoFocus:!0,value:m,onValueChange:a=>y(a),placeholder:"Enter a topic to generate a roadmap for",wrapperClassName:"w-full",onSelect:(a,L)=>{k(L)}}),e.jsxs("button",{className:M("flex min-w-[154px] shrink-0 items-center justify-center gap-2 rounded-md bg-black px-4 py-2 text-white","disabled:cursor-not-allowed disabled:opacity-50"),onClick:a=>{x||(a.preventDefault(),G())},disabled:l||x&&(!p||!m||h>=p||f),children:[l&&e.jsx(e.Fragment,{children:e.jsx("span",{children:"Please wait.."})}),!l&&e.jsxs(e.Fragment,{children:[!x&&e.jsxs(e.Fragment,{children:[e.jsx(H,{size:20}),"Generate"]}),x&&e.jsxs(e.Fragment,{children:[(!p||g)&&e.jsxs(e.Fragment,{children:[e.jsx(H,{size:20}),"Generate"]}),p>0&&!g&&e.jsxs("span",{className:"flex items-center text-base",children:[e.jsx(re,{size:15,className:"mr-2"}),"Limit reached"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-row flex-wrap items-center justify-center gap-2",children:[U.map(a=>e.jsxs("button",{disabled:x&&(!p||!g),type:"button",onClick:()=>{if(!x){G();return}k(a)},className:"flex items-center gap-1.5 rounded-full border px-2 py-0.5 text-sm transition-colors hover:border-black hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50",children:[a," ",e.jsx(W,{size:17})]},a)),e.jsxs("a",{href:"/ai-roadmaps/explore",className:"flex items-center gap-1.5 rounded-full border border-black bg-gray-700 px-2 py-0.5 text-sm text-white transition-colors hover:border-black hover:bg-black",children:["Explore AI Roadmaps ",e.jsx(Q,{size:17})]})]})]}),!x&&e.jsxs("div",{className:"mt-8 flex max-w-[500px] flex-col items-center gap-3 rounded-xl border border-gray-400 px-4 pb-4 pt-3",children:[e.jsxs("p",{className:"text-center text-gray-500",children:[e.jsx("button",{onClick:G,className:"font-medium text-purple-600 underline underline-offset-2 hover:text-purple-800",children:"Sign up (free and takes 2s) or login"})," ","to start generating roadmaps. Or explore the ones made by the community."]}),e.jsxs("p",{className:"flex flex-col gap-2 text-center text-gray-500 sm:flex-row",children:[e.jsxs("a",{href:"/ai-roadmaps/explore",className:"flex items-center gap-1.5 rounded-full border border-purple-600 px-2.5 py-0.5 text-sm text-purple-600 transition-colors hover:bg-purple-600 hover:text-white",children:["Explore AI Generated Roadmaps ",e.jsx(Q,{size:15})]}),e.jsxs("a",{href:"/roadmaps",className:"flex items-center gap-1.5 rounded-full border border-purple-600 px-2.5 py-0.5 text-sm text-purple-600 transition-colors hover:bg-purple-600 hover:text-white",children:["Visit Official Roadmaps ",e.jsx(W,{size:15})]})]})]}),f&&x&&!I&&e.jsxs("div",{className:"mx-auto mt-12 flex max-w-[450px] flex-col items-center gap-4",children:[e.jsxs("p",{className:"text-center text-red-500",children:["We have hit the limit for AI roadmap generation. Please try again again later or"," ",e.jsx("button",{onClick:()=>j(!0),className:"font-semibold text-purple-600 underline underline-offset-2",children:"get more credits."})]}),e.jsxs("p",{className:"flex flex-col gap-2 text-center text-gray-500 sm:flex-row",children:[e.jsxs("a",{href:"/ai-roadmaps/explore",className:"flex items-center gap-1.5 rounded-full border border-purple-600 px-2.5 py-0.5 text-sm text-purple-600 transition-colors hover:bg-purple-600 hover:text-white",children:["Explore AI Roadmaps ",e.jsx(Q,{size:15})]}),e.jsxs("a",{href:"/roadmaps",className:"flex items-center gap-1.5 rounded-full border border-purple-600 px-2.5 py-0.5 text-sm text-purple-600 transition-colors hover:bg-purple-600 hover:text-white",children:["Visit Official Roadmaps ",e.jsx(W,{size:15})]})]})]}),!f&&p>0&&x&&!I&&e.jsxs("div",{className:"mt-12 flex flex-col items-center gap-4",children:[e.jsxs("p",{className:"text-center text-gray-500",children:["You have generated"," ",e.jsxs("span",{className:"inline-block min-w-[50px] rounded-xl border px-1.5 text-center text-sm tabular-nums text-gray-800",children:[h," of ",p]})," ","roadmaps today."]}),e.jsx("p",{className:"flex items-center text-sm",children:e.jsxs("button",{onClick:()=>j(!0),className:"rounded-xl border border-current px-2 py-0.5 text-sm text-blue-500 transition-colors hover:bg-blue-400 hover:text-white",children:["Need to generate more?"," ",e.jsx("span",{className:"font-semibold",children:"Click here."})]})})]})]})}function Qe(D){const{onClose:m,roadmapId:y,nodeTitle:c,parentTitle:p,topicLimit:h,topicLimitUsed:k,onTopicContentGenerateComplete:w,onConfigureOpenAI:f}=D,[I,g]=t.useState(!1),[A,j]=t.useState(""),[x,b]=t.useState(""),[l,T]=t.useState(!1),U=t.useRef(null),a=t.useMemo(()=>new AbortController,[]),L=async()=>{if(g(!0),j(""),!z())return;if(!y||!c){g(!1),j("Invalid roadmap id or node title");return}const C=await fetch(`https://api.roadmap.sh/v1-generate-ai-roadmap-content/${y}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({nodeTitle:c,parentTitle:p}),signal:a.signal});if(!C.ok){const N=await C.json();j(N?.message||"Something went wrong"),g(!1),N.status===401&&(xe(),window.location.reload())}const E=C.body?.getReader();if(!E){g(!1),j("Something went wrong");return}g(!1),T(!0),await Me(E,{onStream:async N=>{b(ze(N,!1))},onStreamEnd(N){T(!1)}}),w?.()};ue(U,()=>{m?.()}),Ge("Escape",()=>{m?.()}),t.useEffect(()=>{if(U?.current)return U?.current?.focus(),L().finally(()=>{}),()=>{a.abort()}},[]);const v=x?.length>0;return e.jsxs("div",{className:"relative z-92",children:[e.jsxs("div",{ref:U,tabIndex:0,className:"fixed right-0 top-0 z-40 h-screen w-full overflow-y-auto bg-white p-4 focus:outline-0 sm:max-w-[600px] sm:p-6",children:[z()&&e.jsxs("div",{className:"flex flex-col items-start gap-2 sm:flex-row",children:[e.jsxs("span",{children:[e.jsxs("span",{className:M("mr-0.5 inline-block rounded-xl border px-1.5 text-center text-sm tabular-nums text-gray-800",{"animate-pulse border-zinc-300 bg-zinc-300 text-zinc-300":!h}),children:[k," of ",h]})," ","topics generated"]}),e.jsxs("button",{className:"rounded-xl border border-current px-1.5 py-0.5 text-left text-sm font-medium text-blue-500 sm:text-center",onClick:f,children:["Need more? ",e.jsx("span",{className:"font-semibold",children:"Click here."})]})]}),z()&&I&&e.jsx("div",{className:"mt-6 flex w-full justify-center",children:e.jsx(ae,{outerFill:"#d1d5db",className:"h-6 w-6 sm:h-12 sm:w-12",innerFill:"#2563eb"})}),!z()&&e.jsxs("div",{className:"flex h-full flex-col items-center justify-center",children:[e.jsx(Xe,{className:"mb-3.5 h-14 w-14 text-gray-200"}),e.jsx("h2",{className:"text-xl font-medium",children:"You must be logged in"}),e.jsx("p",{className:"text-base text-gray-400",children:"Sign up or login to generate topic content."}),e.jsx("button",{className:"mt-3.5 w-full max-w-[300px] rounded-md bg-black px-3 py-2 text-base font-medium text-white",onClick:G,children:"Sign up / Login"})]}),!I&&!A&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:e.jsx("button",{type:"button",id:"close-topic",className:"absolute right-2.5 top-2.5 inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900",onClick:m,children:e.jsx(ce,{className:"h-5 w-5"})})}),v?e.jsxs("div",{className:"prose prose-quoteless prose-h1:mb-2.5 prose-h1:mt-7 prose-h2:mb-3 prose-h2:mt-0 prose-h3:mb-[5px] prose-h3:mt-[10px] prose-p:mb-2 prose-p:mt-0 prose-blockquote:font-normal prose-blockquote:not-italic prose-blockquote:text-gray-700 prose-li:m-0 prose-li:mb-0.5",children:[e.jsx("div",{id:"topic-content",dangerouslySetInnerHTML:{__html:x}}),!l&&e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:"/ai",className:"mb-1 mt-2 inline-flex items-center rounded-md bg-yellow-400 px-3 py-2 text-sm font-medium text-gray-800 no-underline hover:bg-yellow-500",children:["Dive deeper using AI Tutor",e.jsx(_e,{className:"ml-2 h-4 w-4"})]})})]}):e.jsxs("div",{className:"flex h-[calc(100%-38px)] flex-col items-center justify-center",children:[e.jsx($e,{className:"h-16 w-16 text-gray-300"}),e.jsx("p",{className:"mt-2 text-lg font-medium text-gray-500",children:"Empty Content"})]})]}),!I&&A&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",id:"close-topic",className:"absolute right-2.5 top-2.5 inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900",onClick:m,children:e.jsx(ce,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex h-full flex-col items-center justify-center",children:[e.jsx(re,{className:"h-16 w-16 text-red-500"}),e.jsx("p",{className:"mt-2 text-lg font-medium text-red-500",children:A})]})]})]}),e.jsx("div",{className:"fixed inset-0 z-30 bg-gray-900/50"})]})}const ee=new RegExp("@ROADMAPID:(\\w+)@"),te=new RegExp(/@ROADMAPSLUG:([\w-]+)@/);function Ze(D){const m=D?.closest("g")||{},y=m?.dataset?.nodeId,c=m?.dataset?.type,p=m?.dataset?.title,h=m?.dataset?.parentTitle,k=m?.dataset?.parentId;return!y||!c?null:{nodeId:y,nodeType:c,targetGroup:m,nodeTitle:p,parentTitle:h,parentId:k}}const et=["topic","subtopic","button","link-item"];function ps(D){const{roadmapId:m,slug:y,isAuthenticatedUser:c=z()}=D,p=t.useRef(null),{isPaidUser:h}=he(),{rc:k}=Oe(),w=pe(),[f,I]=t.useState(m),[g,A]=t.useState(y),[j,x]=t.useState(!!f),[b,l]=t.useState(!1),[T,U]=t.useState(!1),[a,L]=t.useState(""),[v,C]=t.useState(null),[E,N]=t.useState(""),[P,q]=t.useState(null),[S,o]=t.useState(0),[n,B]=t.useState(0),[O,K]=t.useState(0),[ye,we]=t.useState(0),[je,Y]=t.useState(!1),X=Ue,oe=async s=>{Pe(s);const{nodes:u,edges:d}=me(),i=await ke();p?.current&&Ie(p?.current,i)},J=async s=>{l(!0),x(!0),Z("id"),C(null);const u=window.location.origin,d=await fetch("https://api.roadmap.sh/v1-generate-ai-roadmap",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({term:s})});if(!d.ok){const r=await d.json();w.error(r?.message||"Something went wrong"),l(!1),r.status===401&&(xe(),window.location.reload())}const i=d.body?.getReader();if(!i){l(!1),w.error("Something went wrong");return}await Fe(i,{onStream:async r=>{if(r.includes("@ROADMAPID")||r.includes("@ROADMAPSLUG")){const R=r.match(ee)?.[1]||"",$=r.match(te)?.[1]||"";$&&window.history.pushState({roadmapId:R,roadmapSlug:$},"",`${u}/ai-roadmaps/${$}`),r=r.replace(ee,"").replace(te,""),I(R),A($);const V=r.trim().split(`
`)[0]?.replace("#","")?.trim()||s;L(V),C({id:R,term:a,title:V,data:r})}await oe(r)},onStreamEnd:async r=>{r=r.replace(ee,"").replace(te,""),N(r),_().finally(()=>{})}}),l(!1)},ne=async s=>{s.preventDefault(),!(!a||T)&&a!==v?.term&&J(a).finally(()=>null)},ie=async()=>{if(!z()){G();return}F.set("Redirecting to Editor");const{nodes:s,edges:u}=me(),{response:d,error:i}=await Le(`https://api.roadmap.sh/v1-save-ai-roadmap/${v?.id}`,{title:a,nodes:s.map(r=>({...r,width:void 0,height:void 0,style:{...r.style,width:void 0,height:void 0},measured:{width:void 0,height:void 0}})),edges:u});if(i||!d){w.error(i?.message||"Something went wrong"),F.set(""),l(!1);return}return l(!1),F.set(""),{roadmapId:d.roadmapId,roadmapSlug:d.roadmapSlug}},ve=async()=>{if(!z()){G();return}F.set("Downloading Roadmap");const s=document.getElementById("roadmap-container");if(!s){w.error("Something went wrong");return}try{await De(a,s),F.set("")}catch(u){console.error(u),w.error("Something went wrong")}},_=async()=>{const{response:s,error:u}=await se("https://api.roadmap.sh/v1-get-ai-roadmap-limit");if(u||!s){w.error(u?.message||"Something went wrong");return}const{limit:d,used:i,topicLimit:r,topicUsed:R}=s;o(d),B(i),K(r),we(R)},le=async s=>{F.set("Loading Roadmap");const{response:u,error:d}=await se(`https://api.roadmap.sh/v1-get-ai-roadmap/${s}`);if(d||!u){w.error(d?.message||"Something went wrong"),l(!1);return}const{term:i,title:r,data:R}=u;await oe(R),C({id:s,title:r,term:i,data:R}),L(r||i),N(R),Ae(s)},Ne=t.useCallback(s=>{if(b)return;const u=s.target,{nodeId:d,nodeType:i,targetGroup:r,nodeTitle:R,parentTitle:$}=Ze(u)||{};if(!(!d||!i||!et.includes(i)||!R)){if(i==="button"||i==="link-item"){const V=r?.dataset?.link||"";V.startsWith("http")?window.open(V,"_blank"):window.location.href=V;return}q({nodeId:d,nodeType:i,nodeTitle:R,...i==="subtopic"&&{parentTitle:$}})}},[b]);if(t.useEffect(()=>{_().finally(()=>{})},[]),t.useEffect(()=>{if(!k||z()){Z("rc");return}Ce(k),Z("rc"),G()},[]),t.useEffect(()=>{!f||f===v?.id||le(f).finally(()=>{F.set("")})},[f,v]),t.useEffect(()=>{const s=u=>{const{roadmapId:d,roadmapSlug:i}=u.state||{};if(!d||!i){window.location.reload();return}l(!0),x(!0),I(d),A(i),le(d).finally(()=>{l(!1),F.set("")})};return window.addEventListener("popstate",s),()=>{window.removeEventListener("popstate",s)}},[]),!j)return e.jsx(We,{roadmapTerm:a,setRoadmapTerm:L,handleSubmit:ne,limit:S,limitUsed:n,loadAIRoadmapLimit:_,isKeyOnly:X,onLoadTerm:s=>{L(s),J(s).finally(()=>{})}});const Se=`https://roadmap.sh/ai-roadmaps/${g}`,de=n<S||h,Re=T||c&&(!S||!a||n>=S&&!h||a===v?.term||X);return e.jsxs(e.Fragment,{children:[je&&e.jsx(fe,{onClose:()=>{Y(!1),_().finally(()=>null)}}),P&&v&&!b&&e.jsx(Qe,{nodeId:P.nodeId,nodeType:P.nodeType,nodeTitle:P.nodeTitle,parentTitle:P.parentTitle,onConfigureOpenAI:()=>{q(null),Y(!0)},onClose:()=>{q(null),_().finally(()=>{})},roadmapId:v?.id||"",topicLimit:O,topicLimitUsed:ye,onTopicContentGenerateComplete:async()=>{await _()}}),e.jsxs("section",{className:"flex grow flex-col bg-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-center border-b bg-white py-3 sm:py-6",children:[b&&e.jsxs("span",{className:"flex items-center gap-2 rounded-full bg-black px-3 py-1 text-white",children:[e.jsx(ae,{isDualRing:!1,innerFill:"white"}),"Generating roadmap .."]}),!b&&e.jsxs("div",{className:"container flex grow flex-col items-start",children:[e.jsx(Ve,{}),X,c&&!h&&e.jsxs("div",{className:"mt-2 flex w-full flex-col items-start justify-between gap-2 text-sm sm:flex-row sm:items-center sm:gap-0",children:[e.jsxs("span",{children:[e.jsxs("span",{className:M("mr-0.5 inline-block rounded-xl border px-1.5 text-center text-sm tabular-nums text-gray-800",{"animate-pulse border-zinc-300 bg-zinc-300 text-zinc-300":!S}),children:[n," of ",S]})," ","roadmaps generated today."]}),e.jsxs("button",{onClick:()=>Y(!0),className:"rounded-xl border border-current px-2 py-0.5 text-left text-sm text-blue-500 transition-colors hover:bg-blue-400 hover:text-white",children:["Need to generate more?"," ",e.jsx("span",{className:"font-semibold",children:"Click here."})]})]}),!c&&e.jsx("button",{className:"mt-2 rounded-xl border border-current px-2.5 py-0.5 text-left text-sm font-medium text-blue-500 transition-colors hover:bg-blue-500 hover:text-white sm:text-center",onClick:G,children:"Login to generate your own roadmaps"}),e.jsxs("form",{onSubmit:ne,className:"my-3 flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:justify-center",children:[e.jsx(be,{value:a,onValueChange:s=>L(s),placeholder:"e.g. Try searching for Ansible or DevOps",wrapperClassName:"grow",onSelect:(s,u)=>{J(u).finally(()=>null)}}),e.jsxs("button",{type:"submit",className:M("flex min-w-[127px] shrink-0 items-center justify-center gap-2 rounded-md bg-black px-4 py-2.5 text-white","disabled:cursor-not-allowed disabled:opacity-50"),onClick:s=>{c||(s.preventDefault(),G())},disabled:Re,children:[T&&e.jsx(e.Fragment,{children:e.jsx("span",{children:"Please wait.."})}),!T&&e.jsxs(e.Fragment,{children:[!c&&e.jsxs(e.Fragment,{children:[e.jsx(H,{size:20}),"Generate"]}),c&&e.jsxs(e.Fragment,{children:[S>0&&de&&e.jsxs(e.Fragment,{children:[e.jsx(H,{size:20}),"Generate"]}),S===0&&e.jsx("span",{children:"Please wait.."}),S>0&&!de&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(re,{size:15,className:"mr-2"}),"Limit reached"]})]})]})]})]}),e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 rounded-md bg-yellow-400 py-1.5 pl-2.5 pr-3 text-xs font-medium transition-opacity duration-300 hover:bg-yellow-500 sm:text-sm",onClick:ve,children:[e.jsx(Be,{size:15}),"Download"]}),f&&e.jsx(Ee,{description:`Check out ${a} roadmap I generated on roadmap.sh`,pageUrl:Se})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("button",{className:"inline-flex items-center justify-center gap-2 rounded-md bg-gray-200 py-1.5 pl-2.5 pr-3 text-xs font-medium text-black transition-colors duration-300 hover:bg-gray-300 sm:text-sm",onClick:async()=>{const s=await ie();s?.roadmapSlug&&(window.location.href=`/r/${s.roadmapSlug}`)},disabled:b,children:[e.jsx(He,{size:15}),e.jsx("span",{className:"hidden sm:inline",children:"Save and Start Learning"}),e.jsx("span",{className:"inline sm:hidden",children:"Start Learning"})]}),e.jsxs("button",{className:"hidden items-center justify-center gap-2 rounded-md bg-gray-200 py-1.5 pl-2.5 pr-3 text-xs font-medium text-black transition-colors duration-300 hover:bg-gray-300 sm:inline-flex sm:text-sm",onClick:async()=>{const s=await ie();s?.roadmapId&&window.open(`https://draw.roadmap.sh/${s?.roadmapId}`,"_blank")},disabled:b,children:[e.jsx(Ke,{size:15}),"Edit in Editor"]})]})]})]})]}),e.jsxs("div",{className:M({"relative mb-20 max-h-[800px] min-h-[800px] overflow-hidden sm:max-h-[1000px] md:min-h-[1000px] lg:max-h-[1200px] lg:min-h-[1200px]":!c}),children:[e.jsx("div",{ref:p,id:"roadmap-container",onClick:Ne,className:"relative min-h-[400px] px-4 py-5 [&>svg]:mx-auto [&>svg]:max-w-[1300px]"}),!c&&e.jsxs("div",{className:"absolute bottom-0 left-0 right-0",children:[e.jsx("div",{className:"h-80 w-full bg-linear-to-t from-gray-100 to-transparent"}),e.jsx("div",{className:"bg-gray-100",children:e.jsxs("div",{className:"mx-auto max-w-[600px] flex-col items-center justify-center bg-gray-100 px-5 pt-px",children:[e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("h2",{className:"mb-0.5 text-xl font-medium sm:mb-3 sm:text-2xl",children:"Sign up to View the full roadmap"}),e.jsx("p",{className:"mb-6 text-balance text-sm text-gray-600 sm:text-base",children:"You must be logged in to view the complete roadmap"})]}),e.jsxs("div",{className:"mx-auto max-w-[350px]",children:[e.jsx(qe,{type:"signup"}),e.jsxs("div",{className:"mt-6 text-center text-sm text-slate-600",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"font-medium text-blue-700 hover:text-blue-600",children:"Login"})]})]})]})})]})]})]})]})}export{ps as GenerateRoadmap};
