import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.Z3BHPS3u.js";import{G as V}from"./GitHubIcon.NZCYHAdm.js";import{F as N,C as R,s as L,i as q,a as K}from"./jwt.1xGNZsvU.js";import{c as G}from"./classname.y9b8gBZq.js";import{a as v,h as B}from"./http.BJhNQusg.js";import{S as T}from"./Spinner.CPY-6wbR.js";import{M}from"./Modal.NtjGPDbq.js";import{u as P,c as k,t as F,g as z,d as O}from"./browser.3c2kCsRM.js";function Z(h){const{className:f}=h;return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 90 92",fill:"none",className:f,children:[e.jsx("path",{d:"M90 47.1c0-3.1-.3-6.3-.8-9.3H45.9v17.7h24.8c-1 5.7-4.3 10.7-9.2 13.9l14.8 11.5C85 72.8 90 61 90 47.1z",fill:"#4280ef"}),e.jsx("path",{d:"M45.9 91.9c12.4 0 22.8-4.1 30.4-11.1L61.5 69.4c-4.1 2.8-9.4 4.4-15.6 4.4-12 0-22.1-8.1-25.8-18.9L4.9 66.6c7.8 15.5 23.6 25.3 41 25.3z",fill:"#34a353"}),e.jsx("path",{d:"M20.1 54.8c-1.9-5.7-1.9-11.9 0-17.6L4.9 25.4c-6.5 13-6.5 28.3 0 41.2l15.2-11.8z",fill:"#f6b704"}),e.jsx("path",{d:"M45.9 18.3c6.5-.1 12.9 2.4 17.6 6.9L76.6 12C68.3 4.2 57.3 0 45.9.1c-17.4 0-33.2 9.8-41 25.3l15.2 11.8c3.7-10.9 13.8-18.9 25.8-18.9z",fill:"#e54335"})]})}const C="googleRedirectAt",E="googleLastPage";function Y(h){const{isDisabled:f,setIsDisabled:o,className:d}=h,[l,a]=s.useState(!1),[w,n]=s.useState("");s.useEffect(()=>{const t=new URLSearchParams(window.location.search),c=t.get("code"),u=t.get("state"),S=t.get("provider");if(!c||!u||S!=="google")return;a(!0),o?.(!0);const m=localStorage.getItem(E);v(`https://api.hnmdevs.com/v1-google-callback${window.location.search}&src=${P(m||k()||window.location.pathname)}`).then(({response:i,error:g})=>{if(!i?.token){n(g?.message||"Something went wrong."),a(!1),o?.(!1);return}F();let r=new URL("/",window.location.origin);const x=localStorage.getItem(C);if(x&&m){const I=parseInt(x,10);Date.now()-I<30*1e3&&(r=new URL(m,window.location.origin))}const b=localStorage.getItem("authRedirect");b&&(localStorage.removeItem("authRedirect"),r=new URL(b,window.location.origin)),r.searchParams.set(N,i?.isNewUser?"1":"0");const j=localStorage.getItem(y)!=="0";r.pathname.includes("/courses/sql")&&j&&(r.searchParams.set(R,"1"),localStorage.removeItem(y)),localStorage.removeItem(C),localStorage.removeItem(E),L(i.token),window.location.href=r.toString()}).catch(i=>{n("Something went wrong. Please try again later."),a(!1),o?.(!1)})},[]);const p=()=>{a(!0),o?.(!0),v("https://api.hnmdevs.com/v1-google-login").then(({response:t,error:c})=>{if(!t?.loginUrl){n(c?.message||"Something went wrong."),a(!1),o?.(!1);return}if(!["/login","/signup"].includes(window.location.pathname)){const u=["/respond-invite","/befriend","/r","/ai-roadmaps"].includes(window.location.pathname)?window.location.pathname+window.location.search:window.location.pathname;localStorage.setItem(C,Date.now().toString()),localStorage.setItem(E,u)}window.location.href=t.loginUrl}).catch(t=>{n("Something went wrong. Please try again later."),a(!1),o?.(!1)})};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:G("inline-flex h-10 w-full items-center justify-center gap-2 rounded-sm border border-slate-300 bg-white p-2 text-sm font-medium text-black outline-hidden hover:border-gray-400 hover:bg-gray-50 focus:ring-2 focus:ring-[#333] focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60",d),disabled:l||f,onClick:p,children:[l?e.jsx(T,{className:"h-[18px] w-[18px]",isDualRing:!1}):e.jsx(Z,{className:"h-[18px] w-[18px]"}),"Continue with Google"]}),w&&e.jsx("p",{className:"mb-2 mt-1 text-sm font-medium text-red-600",children:w})]})}function W(h){const{className:f}=h;return e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:f,children:[e.jsx("g",{clipPath:"url(#clip0_2344_20)",children:e.jsx("path",{d:"M0 0V24H24V0H0ZM8 19H5V8H8V19ZM6.5 6.732C5.534 6.732 4.75 5.942 4.75 4.968C4.75 3.994 5.534 3.204 6.5 3.204C7.466 3.204 8.25 3.994 8.25 4.968C8.25 5.942 7.467 6.732 6.5 6.732ZM20 19H17V13.396C17 10.028 13 10.283 13 13.396V19H10V8H13V9.765C14.397 7.179 20 6.988 20 12.241V19Z",fill:"currentColor"})}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_2344_20",children:e.jsx("rect",{width:"24",height:"24",rx:"2",fill:"white"})})})]})}const U="linkedInRedirectAt",A="linkedInLastPage";function J(h){const{isDisabled:f,setIsDisabled:o,className:d}=h,[l,a]=s.useState(!1),[w,n]=s.useState("");s.useEffect(()=>{const t=new URLSearchParams(window.location.search),c=t.get("code"),u=t.get("state"),S=t.get("provider");if(!c||!u||S!=="linkedin")return;a(!0),o?.(!0);const m=localStorage.getItem(A);v(`https://api.hnmdevs.com/v1-linkedin-callback${window.location.search}&src=${P(m||k()||window.location.pathname)}`).then(({response:i,error:g})=>{if(!i?.token){n(g?.message||"Something went wrong."),a(!1),o?.(!1);return}F();let r=new URL("/",window.location.origin);const x=localStorage.getItem(U);if(x&&m){const I=parseInt(x,10);Date.now()-I<30*1e3&&(r=new URL(m,window.location.origin))}const b=localStorage.getItem("authRedirect");b&&(localStorage.removeItem("authRedirect"),r=new URL(b,window.location.origin)),r.searchParams.set(N,i?.isNewUser?"1":"0");const j=localStorage.getItem(y)!=="0";r.pathname.includes("/courses/sql")&&j&&(r.searchParams.set(R,"1"),localStorage.removeItem(y)),localStorage.removeItem(U),localStorage.removeItem(A),L(i.token),window.location.href=r.toString()}).catch(i=>{n("Something went wrong. Please try again later."),a(!1),o?.(!1)})},[]);const p=()=>{a(!0),o?.(!0),v("https://api.hnmdevs.com/v1-linkedin-login").then(({response:t,error:c})=>{if(!t?.loginUrl){n(c?.message||"Something went wrong."),a(!1),o?.(!1);return}if(!["/login","/signup"].includes(window.location.pathname)){const u=["/respond-invite","/befriend","/r","/ai-roadmaps"].includes(window.location.pathname)?window.location.pathname+window.location.search:window.location.pathname;localStorage.setItem(U,Date.now().toString()),localStorage.setItem(A,u)}window.location.href=t.loginUrl}).catch(t=>{n("Something went wrong. Please try again later."),a(!1),o?.(!1)})};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:G("inline-flex h-10 w-full items-center justify-center gap-2 rounded-sm border border-slate-300 bg-white p-2 text-sm font-medium text-black outline-hidden hover:border-gray-400 focus:ring-2 focus:ring-[#333] focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60",d),disabled:l||f,onClick:p,children:[l?e.jsx(T,{className:"h-[18px] w-[18px]",isDualRing:!1}):e.jsx(W,{className:"h-[18px] w-[18px] text-blue-700"}),"Continue with LinkedIn"]}),w&&e.jsx("p",{className:"mb-2 mt-1 text-sm font-medium text-red-600",children:w})]})}function Q(h){const{isDisabled:f,setIsDisabled:o}=h,[d,l]=s.useState(""),[a,w]=s.useState(""),[n,p]=s.useState(""),[t,c]=s.useState(!1),u=async i=>{i.preventDefault(),c(!0),o?.(!0),p("");const{response:g,error:r}=await B("https://api.hnmdevs.com/v1-login",{email:d,password:a});if(g?.token){L(g.token);const x=window.location.href,b=new URL(x,window.location.origin);b.searchParams.set(N,g?.isNewUser?"1":"0"),b.searchParams.set(R,"1"),window.location.href=b.toString();return}if(r.type==="user_not_verified"){window.location.href=`/verification-pending?email=${encodeURIComponent(d)}`;return}c(!1),o?.(!1),p(r?.message||"Something went wrong. Please try again later.")},S=`form:${s.useId()}`,m=`form:${s.useId()}`;return e.jsxs("form",{className:"w-full",onSubmit:u,suppressHydrationWarning:!0,children:[e.jsx("label",{htmlFor:S,className:"sr-only",children:"Email address"}),e.jsx("input",{id:S,name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Email Address",value:d,onInput:i=>l(String(i.target.value))}),e.jsx("label",{htmlFor:m,className:"sr-only",children:"Password"}),e.jsx("input",{id:m,name:"password",type:"password",autoComplete:"current-password",required:!0,className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Password",value:a,onInput:i=>w(String(i.target.value))}),e.jsx("p",{className:"mt-2 mb-3 text-sm text-gray-500",children:e.jsx("a",{href:"/forgot-password",className:"text-blue-800 hover:text-blue-600",children:"Reset your password?"})}),n&&e.jsx("p",{className:"mb-2 rounded-md bg-red-100 p-2 text-red-800",children:n}),e.jsx("button",{type:"submit",disabled:t||f,className:"inline-flex w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-hidden focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",children:t?"Please wait...":"Continue"})]})}function X(h){const{isDisabled:f,setIsDisabled:o}=h,{rc:d}=z(),[l,a]=s.useState(""),[w,n]=s.useState(""),[p,t]=s.useState(""),[c,u]=s.useState(""),[S,m]=s.useState(!1),i=async g=>{g.preventDefault(),m(!0),o?.(!0),u("");const{response:r,error:x}=await B("https://api.hnmdevs.com/v1-register",{email:l,password:w,name:p,src:P(k()||window.location.pathname)});if(x||r?.status!=="ok"){m(!1),o?.(!1),u(x?.message||"Something went wrong. Please try again later.");return}window.location.href=`/verification-pending?email=${encodeURIComponent(l)}`};return s.useEffect(()=>{if(!d||q()){O("rc");return}K(d),O("rc")},[]),e.jsxs("form",{className:"flex w-full flex-col gap-2",onSubmit:i,children:[e.jsx("label",{htmlFor:"name",className:"sr-only",children:"Name"}),e.jsx("input",{name:"name",type:"text",autoComplete:"name",min:3,max:50,required:!0,className:"block w-full rounded-lg border border-gray-300 px-3 py-2 outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Full Name",value:p,onInput:g=>t(String(g.target.value))}),e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsx("input",{name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full rounded-lg border border-gray-300 px-3 py-2 outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Email Address",value:l,onInput:g=>a(String(g.target.value))}),e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{name:"password",type:"password",autoComplete:"current-password",min:6,max:50,required:!0,className:"block w-full rounded-lg border border-gray-300 px-3 py-2 outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Password",value:w,onInput:g=>n(String(g.target.value))}),c&&e.jsxs("p",{className:"rounded-lg bg-red-100 p-2 text-red-700",children:[c,"."]}),e.jsx("button",{type:"submit",disabled:S||f,className:"inline-flex w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-hidden focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",children:S?"Please wait...":"Continue to Verify Email"})]})}const y="checkoutAfterLogin",ee="sampleAfterLogin";function me(h){const{onClose:f,checkoutAfterLogin:o=!0}=h,[d,l]=s.useState(!1),[a,w]=s.useState(!1),[n,p]=s.useState(null);function t(){localStorage.removeItem(y),localStorage.removeItem(ee),f()}if(s.useEffect(()=>{localStorage.setItem(y,o?"1":"0")},[o]),n){const c=e.jsxs("div",{className:"mb-7 text-center",children:[e.jsx("p",{className:"mb-3.5 pt-2 text-2xl leading-5 font-semibold text-slate-900",children:n==="login"?"Login to your account":"Create an account"}),e.jsx("p",{className:"mt-2 text-sm leading-4 text-slate-600",children:"Fill in the details below to continue"})]});return e.jsxs(M,{onClose:t,bodyClassName:"p-5 h-auto",children:[c,n==="login"&&e.jsx(Q,{isDisabled:d,setIsDisabled:l}),n==="signup"&&e.jsx(X,{isDisabled:d,setIsDisabled:l}),e.jsx("button",{className:"mt-2 w-full rounded-md border border-gray-400 py-2 text-center text-sm text-gray-600 hover:bg-gray-100",onClick:()=>p(null),children:"Back to Options"})]})}return e.jsxs(M,{onClose:t,bodyClassName:"p-5 h-auto",children:[e.jsxs("div",{className:"mb-7 text-center",children:[e.jsx("p",{className:"mb-3.5 pt-2 text-2xl leading-5 font-semibold text-slate-900",children:"Create or login to Enroll"}),e.jsx("p",{className:"mt-2 text-sm leading-4 text-slate-600",children:"Login or sign up for an account to start learning"})]}),e.jsxs("div",{className:"flex w-full flex-col gap-2",children:[e.jsx(te,{className:"rounded-md border-gray-400 hover:bg-gray-100",isDisabled:d,setIsDisabled:l}),e.jsx(Y,{className:"rounded-md border-gray-400 hover:bg-gray-100",isDisabled:d,setIsDisabled:l}),e.jsx(J,{className:"rounded-md border-gray-400 hover:bg-gray-100",isDisabled:d,setIsDisabled:l})]}),e.jsxs("div",{className:"flex w-full items-center gap-4 py-6 text-sm text-gray-600",children:[e.jsx("div",{className:"h-px w-full bg-gray-200"}),"OR",e.jsx("div",{className:"h-px w-full bg-gray-200"})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[!a&&e.jsx("button",{className:"grow rounded-md border border-gray-400 px-4 py-2 text-sm text-gray-600 hover:bg-gray-100",onClick:()=>w(!0),children:"Use your email address"}),a&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"grow rounded-md border border-gray-400 px-4 py-2 text-sm text-gray-600 hover:bg-gray-100",onClick:()=>p("login"),children:"Already have an account"}),e.jsx("button",{className:"grow rounded-md border border-gray-400 px-4 py-2 text-sm text-gray-600 hover:bg-gray-100",onClick:()=>p("signup"),children:"Create an account"})]})]})]})}const D="githubRedirectAt",_="githubLastPage";function te(h){const{isDisabled:f,setIsDisabled:o,className:d}=h,[l,a]=s.useState(!1),[w,n]=s.useState("");s.useEffect(()=>{const t=new URLSearchParams(window.location.search),c=t.get("code"),u=t.get("state"),S=t.get("provider");if(!c||!u||S!=="github")return;a(!0),o?.(!0);const m=localStorage.getItem(_);v(`https://api.hnmdevs.com/v1-github-callback${window.location.search}&src=${P(m||k()||window.location.pathname)}`).then(({response:i,error:g})=>{if(!i?.token){const I=g?.message||"Something went wrong.";n(I),a(!1),o?.(!1);return}F();let r=new URL("/",window.location.origin);const x=localStorage.getItem(D);if(x&&m){const I=parseInt(x,10);Date.now()-I<30*1e3&&(r=new URL(m,window.location.origin))}const b=localStorage.getItem("authRedirect");b&&(localStorage.removeItem("authRedirect"),r=new URL(b,window.location.origin)),localStorage.removeItem(D),localStorage.removeItem(_),L(i.token),r.searchParams.set(N,i?.isNewUser?"1":"0");const j=localStorage.getItem(y)!=="0";r.pathname.includes("/courses/sql")&&j&&(r.searchParams.set(R,"1"),localStorage.removeItem(y)),window.location.href=r.toString()}).catch(i=>{n("Something went wrong. Please try again later."),a(!1),o?.(!1)})},[]);const p=async()=>{a(!0),o?.(!0);const{response:t,error:c}=await v("https://api.hnmdevs.com/v1-github-login");if(c||!t?.loginUrl){n(c?.message||"Something went wrong. Please try again later."),a(!1),o?.(!1);return}if(!["/login","/signup"].includes(window.location.pathname)){const u=["/respond-invite","/befriend","/r","/ai-roadmaps"].includes(window.location.pathname)?window.location.pathname+window.location.search:window.location.pathname;localStorage.setItem(D,Date.now().toString()),localStorage.setItem(_,u)}window.location.href=t.loginUrl};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:G("inline-flex h-10 w-full items-center justify-center gap-2 rounded-sm border border-slate-300 bg-white p-2 text-sm font-medium text-black outline-hidden hover:border-gray-400 hover:bg-gray-50 focus:ring-2 focus:ring-[#333] focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60",d),disabled:l||f,onClick:p,children:[l?e.jsx(T,{className:"h-[18px] w-[18px]",isDualRing:!1}):e.jsx(V,{className:"h-[18px] w-[18px]"}),"Continue with GitHub"]}),w&&e.jsx("p",{className:"mb-2 mt-1 text-sm font-medium text-red-600",children:w})]})}export{me as C,Q as E,te as G,J as L,ee as S,Y as a,X as b};
