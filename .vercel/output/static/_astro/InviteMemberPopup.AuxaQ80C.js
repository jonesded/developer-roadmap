import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.Z3BHPS3u.js";import{h as j}from"./http.BJhNQusg.js";import{u as N}from"./use-team-id.DuJRAVKZ.js";import{u as I}from"./use-outside-click.DYGsxgbd.js";import{R}from"./RoleDropdown.DDwwSyDi.js";function L(p){const{onClose:f,onInvited:x,teamId:h}=p,i=t.useRef(null),d=t.useRef(null),[m,b]=t.useState("member"),[r,g]=t.useState(""),[l,s]=t.useState(!1),[c,o]=t.useState(""),{teamId:v=h}=N();t.useEffect(()=>{d?.current?.focus()},[]);const w=async n=>{n.preventDefault(),s(!0),o("");const{response:y,error:u}=await j(`https://api.hnmdevs.com/v1-invite-member/${v}`,{email:r,role:m});if(u||!y){s(!1),o(u?.message||"Something went wrong");return}s(!1),a(),x()},a=()=>{s(!1),o(""),f()};return I(i,a),e.jsx("div",{className:"popup fixed left-0 right-0 top-0 z-50 flex h-full items-center justify-center overflow-y-auto overflow-x-hidden bg-black/50",children:e.jsx("div",{className:"relative h-full w-full max-w-md p-4 md:h-auto",children:e.jsxs("div",{ref:i,className:"popup-body relative rounded-lg bg-white p-4 shadow-sm",children:[e.jsx("h3",{className:"mb-1.5 text-xl font-medium sm:text-2xl",children:"Invite Member"}),e.jsx("p",{className:"mb-3 hidden text-sm leading-none text-gray-400 sm:block",children:"Enter the email and role below to invite a member."}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"my-4 mt-0 flex flex-col gap-2 sm:mt-4",children:[e.jsx("input",{ref:d,type:"email",name:"invite-member",id:"invite-member",className:"mt-2 block w-full rounded-md border border-gray-300 px-3 py-2 outline-hidden placeholder:text-gray-400 focus:border-gray-400",placeholder:"Enter email address",required:!0,autoFocus:!0,value:r,onInput:n=>g(n.target.value)}),e.jsx("div",{className:"flex h-[42px] w-full flex-col",children:e.jsx(R,{className:"h-full w-full",selectedRole:m,setSelectedRole:b})}),c&&e.jsx("p",{className:"rounded-md border border-red-300 bg-red-50 p-2 text-sm text-red-700",children:c})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:l,onClick:a,className:"grow cursor-pointer rounded-lg bg-gray-200 py-2 text-center",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!r,className:"grow cursor-pointer rounded-lg bg-black py-2 text-center text-white disabled:opacity-40",children:l?"Please wait ..":"Invite"})]})]})]})})})}export{L as I};
