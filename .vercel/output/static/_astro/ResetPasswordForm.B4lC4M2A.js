import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.Z3BHPS3u.js";import{h as w}from"./http.BJhNQusg.js";import"./js.cookie.Cz0CWeBA.js";import{s as h}from"./jwt.1xGNZsvU.js";import"./fp.esm.CznIeghd.js";function j(){const[c,f]=t.useState(""),[a,m]=t.useState(""),[n,p]=t.useState(""),[d,o]=t.useState(!1),[l,i]=t.useState("");t.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("code");s?f(s):window.location.href="/login"},[]);const g=async e=>{if(e.preventDefault(),o(!0),a!==n){o(!1),i("Passwords do not match.");return}const{response:s,error:u}=await w("https://api.hnmdevs.com/v1-reset-forgotten-password",{newPassword:a,confirmPassword:n,code:c});if(u?.message){o(!1),i(u.message);return}if(!s?.token){o(!1),i("Something went wrong. Please try again later.");return}s.token,h(s.token),window.location.href="/"};return r.jsxs("form",{className:"mx-auto w-full",onSubmit:g,children:[r.jsx("input",{type:"password",className:"mb-2 mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,minLength:6,placeholder:"New Password",value:a,onInput:e=>m(e.target.value)}),r.jsx("input",{type:"password",className:"mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,minLength:6,placeholder:"Confirm New Password",value:n,onInput:e=>p(e.target.value)}),l&&r.jsx("p",{className:"mt-2 rounded-lg bg-red-100 p-2 text-red-700",children:l}),r.jsx("button",{type:"submit",disabled:d,className:"mt-2 inline-flex w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-hidden focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",children:d?"Please wait...":"Reset Password"})]})}export{j as ResetPasswordForm};
