import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as u}from"./index.Z3BHPS3u.js";import{u as j}from"./use-copy-text.D2rWbbuk.js";import{u as w}from"./use-auth.Bw1nhFr_.js";import{a as v,b as N}from"./http.BJhNQusg.js";import{p as k}from"./page.DyYQD7MX.js";import{S as p}from"./SelectionButton.BqgEBFYF.js";import{d as C}from"./download-image.G3Mts95j.js";import{C as y}from"./copy.CgTXj779.js";import{u as S}from"./use-toast.BdCcSTJE.js";import"./js.cookie.Cz0CWeBA.js";import"./jwt.1xGNZsvU.js";import"./fp.esm.CznIeghd.js";import"./index.3whys8t3.js";import"./classname.y9b8gBZq.js";import"./preload-helper.BlTxHScW.js";import"./createLucideIcon.BSLrQS80.js";import"./toast.DlejBBdi.js";function R(r){const{selectedRoadmaps:t,setSelectedRoadmaps:i}=r,[d,n]=u.useState(),c=async()=>{const{response:s,error:l}=await v("https://api.hnmdevs.com/v1-get-user-all-progress");l||!s||n(s)};u.useEffect(()=>{c().finally(()=>{k.set("")})},[]);const o=t.length<4,x=d?.filter(s=>s.resourceType==="roadmap"&&s.resourceId&&s.resourceTitle)||[];return e.jsxs("div",{className:"flex flex-wrap gap-1",children:[x?.length===0&&e.jsx("p",{className:"text-sm italic text-gray-400",children:"No progress tracked so far."}),x?.map(s=>{const l=t.includes(s.resourceId),m=l||o;return e.jsx(p,{text:s.resourceTitle,isDisabled:!m,isSelected:l,onClick:()=>{l?i(t.filter(a=>a!==s.resourceId)):t.length<4&&i([...t,s.resourceId])}},s.resourceId)})]})}function D(){return e.jsxs("p",{className:"mt-3 rounded-md border p-2 text-sm w-full bg-yellow-100 border-yellow-400 text-yellow-900",children:["Add this badge to your"," ",e.jsx("a",{href:"https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-profile/customizing-your-profile/managing-your-profile-readme",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:"GitHub profile readme."})]})}function f(r){const{step:t}=r;return e.jsx("span",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-gray-300 text-white",children:t})}function b(r){const{text:t,title:i,onCopy:d}=r,{isCopied:n,copyText:c}=j();return e.jsxs("div",{className:"flex w-full grow flex-col overflow-hidden rounded-sm border border-gray-300 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-gray-300 px-3 py-2",children:[e.jsx("span",{className:"text-xs uppercase leading-none text-gray-400",children:i}),e.jsxs("button",{className:"flex items-center",onClick:()=>{c(t),d?.()},children:[n&&e.jsx("span",{className:"mr-1 text-xs leading-none text-gray-700",children:"Copied!Â "}),e.jsx(y,{className:"inline-block h-4 w-4"})]})]}),e.jsx("textarea",{className:"no-scrollbar block h-12 w-full overflow-x-auto whitespace-nowrap bg-gray-200/70 p-3 text-sm text-gray-900 focus:bg-gray-50 focus:outline-0",readOnly:!0,onClick:o=>{o.target.select(),c(o.target.value),d?.()},value:t})]})}function g(r){const{label:t}=r;return e.jsx("span",{className:"mb-3 flex items-center gap-2 text-sm leading-none text-gray-400",children:t})}function q(){const r=w(),t=S(),{isCopied:i,copyText:d}=j(),[n,c]=u.useState([]),[o,x]=u.useState("tall"),[s,l]=u.useState("dark"),m=async()=>{const{error:h}=await N("https://api.hnmdevs.com/v1-update-onboarding-config",{id:"roadCard",status:"done"});h&&t.error(h?.message||"Something went wrong")};if(!r)return null;const a=new URL(`undefined/card/${o}/${r?.id}`);return a.searchParams.set("variant",s),n.length>0&&a.searchParams.set("roadmaps",n.join(",")),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mx-0 flex items-start gap-4 border-b px-0 pb-4 pt-2 sm:-mx-10 sm:px-10",children:[e.jsx(f,{step:1}),e.jsxs("div",{children:[e.jsx(g,{label:"Pick progress to show (Max. 4)"}),e.jsx("div",{className:"flex flex-wrap",children:e.jsx(R,{selectedRoadmaps:n,setSelectedRoadmaps:c})})]})]}),e.jsxs("div",{className:"mx-0 flex items-start gap-4 border-b px-0 py-4 sm:-mx-10 sm:px-10",children:[e.jsx(f,{step:2}),e.jsxs("div",{children:[e.jsx(g,{label:"Select Mode (Dark vs Light)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{text:"Dark",isDisabled:!1,isSelected:s==="dark",onClick:()=>{l("dark")}}),e.jsx(p,{text:"Light",isDisabled:!1,isSelected:s==="light",onClick:()=>{l("light")}})]})]})]}),e.jsxs("div",{className:"mx-0 flex items-start gap-4 border-b px-0 py-4 sm:-mx-10 sm:px-10",children:[e.jsx(f,{step:3}),e.jsxs("div",{children:[e.jsx(g,{label:"Select Version"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{text:"Tall",isDisabled:!1,isSelected:o==="tall",onClick:()=>{x("tall")}}),e.jsx(p,{text:"Wide",isDisabled:!1,isSelected:o==="wide",onClick:()=>{x("wide")}})]})]})]}),e.jsxs("div",{className:"mx-0 flex items-start gap-4 border-b px-0 py-4 sm:-mx-10 sm:px-10",children:[e.jsx(f,{step:4}),e.jsxs("div",{className:"grow",children:[e.jsx(g,{label:"Share your #RoadCard with others"}),e.jsx("div",{className:"rounded-md border bg-gray-50 p-2 text-center",children:e.jsx("a",{href:a.toString(),target:"_blank",rel:"noopener noreferrer",className:`relative block hover:cursor-pointer ${o==="tall"?" max-w-[270px] ":" w-full "}`,children:e.jsx("img",{src:a.toString(),alt:"RoadCard"})})}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[e.jsx("button",{className:"flex items-center justify-center rounded-sm border border-gray-300 p-1.5 px-2 text-sm font-medium",onClick:()=>{C({url:a.toString(),name:"road-card",scale:4}),m()},children:"Download"}),e.jsxs("button",{disabled:i,className:"flex cursor-pointer items-center justify-center rounded-sm border border-gray-300 p-1.5 px-2 text-sm font-medium disabled:bg-blue-50",onClick:()=>{d(a.toString()),m()},children:[e.jsx(y,{size:16,className:"mr-1 inline-block h-4 w-4"}),i?"Copied!":"Copy Link"]})]}),e.jsxs("div",{className:"mt-3 flex flex-col gap-3",children:[e.jsx(b,{title:"HTML",text:`<a href="https://roadmap.sh"><img src="${a}" alt="roadmap.sh"/></a>`.trim(),onCopy:()=>m()}),e.jsx(b,{title:"Markdown",text:`[![roadmap.sh](${a})](https://roadmap.sh)`.trim(),onCopy:()=>m()})]}),e.jsx(D,{})]})]})]})}export{q as RoadCardPage};
