import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.Z3BHPS3u.js";import{a as N}from"./http.BJhNQusg.js";import{u as b}from"./use-auth.Bw1nhFr_.js";import{u as y}from"./use-outside-click.DYGsxgbd.js";import{S as L}from"./Spinner.CPY-6wbR.js";import{a as x,c as h}from"./team.D9_M1CfW.js";import{u as g}from"./index.BlfZEqDn.js";import{u as T}from"./use-team-id.DuJRAVKZ.js";import{u as $}from"./use-toast.BdCcSTJE.js";import{c as k}from"./classname.y9b8gBZq.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.CznIeghd.js";import"./jwt.1xGNZsvU.js";import"./index.BHh4vvK5.js";import"./index.3whys8t3.js";import"./toast.DlejBBdi.js";function I(o){const{className:r}=o;return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:k("h-5 w-5",r),children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})}function J(){const o=b(),{teamId:r}=T(),a=g(h),i=g(x),j=$(),c=n.useRef(null),[l,d]=n.useState(!0),[u,p]=n.useState(!1),f=i?i.avatar:o?.avatar,w=i?i.name:o?.name;y(c,()=>{p(!1)});async function v(){const{response:s,error:t}=await N("https://api.imoogleai.xyz/v1-get-user-teams");if(t||!s){j.error(t?.message||"Something went wrong");return}h.set(s)}n.useEffect(()=>{!r||!a||x.set(a.find(s=>s._id===r))},[a,r]),n.useEffect(()=>{d(!0),v().finally(()=>{d(!1)})},[]);const m=a.filter(s=>s.status==="invited").map(s=>s._id);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mr-2",children:[e.jsx("span",{className:"mb-2 flex items-center justify-between text-xs uppercase text-gray-400",children:e.jsx("span",{children:"Choose Team"})}),e.jsxs("button",{className:"relative flex w-full cursor-pointer items-center justify-between rounded-sm border p-2 text-sm hover:bg-gray-100",onClick:()=>p(!u),children:[m.length>0&&e.jsx("span",{className:"absolute -left-1.5 -top-1.5 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs font-medium text-white",children:m.length}),e.jsxs("div",{className:"mr-1.5 inline-grid grid-cols-[16px_auto] items-center gap-1.5",children:[l&&e.jsx(L,{className:"h-4 w-4",isDualRing:!1}),!l&&e.jsx("img",{src:f?`https://dodrc8eu8m09s.cloudfront.net/avatars/${f}`:"/images/default-avatar.png",alt:"",className:"h-4 w-4 rounded-full object-cover"}),e.jsxs("span",{className:"truncate",children:[!l&&w,l&&"Loading .."]})]}),e.jsx(I,{className:"h-4 w-4"})]}),u&&e.jsxs("div",{ref:c,className:"absolute top-full z-50 mt-2 w-full rounded-md bg-slate-800 px-2 py-2 text-white shadow-md",children:[e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("a",{className:"flex w-full cursor-pointer items-center gap-2 truncate rounded-sm p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",href:"/account",children:e.jsx("span",{className:"truncate",children:"Personal Account"})})}),a.map(s=>{let t="";return s.status==="invited"?t=`/respond-invite?i=${s.memberId}`:s.status==="joined"&&(t=`/team/activity?t=${s._id}`),e.jsx("li",{children:e.jsxs("a",{className:"flex w-full cursor-pointer items-center gap-2 rounded-sm p-2 text-sm font-medium text-slate-100 hover:bg-slate-700",href:`${t}`,children:[e.jsx("span",{className:"min-w-0 grow truncate",children:s.name}),m.includes(s._id)&&e.jsx("span",{className:"flex rounded-md bg-red-500 px-2 text-xs text-white",children:"Invite"})]})},s?._id)})]}),e.jsxs("a",{className:"mt-2 flex w-full cursor-pointer items-center justify-center gap-2 rounded-sm bg-gray-100 p-2 text-sm font-medium text-slate-800 hover:opacity-90",href:"/team/new",children:[e.jsx("span",{children:"+"}),e.jsx("span",{children:"New Team"})]})]})]}),e.jsx("hr",{className:"my-4"})]})}export{J as TeamDropdown};
