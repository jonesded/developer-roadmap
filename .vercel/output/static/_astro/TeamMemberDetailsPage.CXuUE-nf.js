import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.Z3BHPS3u.js";import{a as x}from"./http.BJhNQusg.js";import{p}from"./page.DyYQD7MX.js";import{g as M}from"./browser.3c2kCsRM.js";import{u as I}from"./use-toast.BdCcSTJE.js";import{R as N}from"./ResourceProgress.EkrxCvT0.js";import{A as S}from"./ActivityStream.itmNdBzm.js";import{R as w}from"./RoadmapIcon.x-v-C98i.js";import{P as A}from"./Pagination.DomnIFR-.js";import{M as T,a as $}from"./MemberCustomProgressModal.CcjuW5Jl.js";import{u as k}from"./index.BlfZEqDn.js";import{a as F}from"./team.D9_M1CfW.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.CznIeghd.js";import"./jwt.1xGNZsvU.js";import"./index.3whys8t3.js";import"./toast.DlejBBdi.js";import"./use-outside-click.DYGsxgbd.js";import"./use-keydown.r409VyJJ.js";import"./ProgressShareButton.OUQB_89_.js";import"./use-auth.Bw1nhFr_.js";import"./use-copy-text.D2rWbbuk.js";import"./CheckIcon.D4OhQ5l1.js";import"./ShareIcon._wHpzMFh.js";import"./classname.y9b8gBZq.js";import"./ellipsis-vertical.Di0fjBX0.js";import"./createLucideIcon.BSLrQS80.js";import"./x.BOdyWiWF.js";import"./number.DnDLgi2j.js";import"./date.2wIYh-wy.js";import"./list.CXlwBFwN.js";import"./Modal.NtjGPDbq.js";import"./arrow-up-right.CWJoE-FU.js";import"./check.DflWYpXj.js";import"./book-open.Dsgc4gH7.js";import"./ActivityTopicTitles.DLMiyJNa.js";import"./ellipsis.BcvtAoad.js";/* empty css                       *//* empty css                       */import"./index.gjAxZpWu.js";import"./Spinner.CPY-6wbR.js";import"./resource-progress.Ow4RVjGh.js";import"./roadmap.DwTTnFhR.js";import"./index.BHh4vvK5.js";import"./dom.B_TnKQIa.js";import"./index.Dgut0sTl.js";import"./vue.BIhB9hsv.js";import"./transition.MUZrSsh7.js";import"./head.CbjsIJ-A.js";function E(o){const{teamId:c}=o;return t.jsx("div",{className:"rounded-md",children:t.jsxs("div",{className:"flex flex-col items-center p-7 text-center",children:[t.jsx(w,{className:"mb-2 h-14 w-14 opacity-10"}),t.jsx("h2",{className:"text-lg font-bold sm:text-xl",children:"No Progress"}),t.jsx("p",{className:"my-1 max-w-[400px] text-balance text-sm text-gray-500 sm:my-2 sm:text-base",children:"Progress will appear here as they start tracking their roadmaps."})]})})}function $e(){const{t:o,m:c}=M(),d=I(),f=k(F),[r,h]=l.useState(null),[a,P]=l.useState(null),[y,b]=l.useState(1),[i,u]=l.useState(null),v=async()=>{const{response:e,error:s}=await x(`https://api.hnmdevs.com/v1-get-team-member-progresses/${o}/${c}`);if(s||!e){p.set(""),d.error(s?.message||"Failed to load team member");return}h(e)},g=async(e=1)=>{const{response:s,error:m}=await x(`https://api.hnmdevs.com/v1-get-team-member-activity/${o}/${c}`,{currPage:e});if(m||!s){p.set(""),d.error(m?.message||"Failed to load team member activity");return}P(s),b(s?.currPage||1)};if(l.useEffect(()=>{o&&Promise.allSettled([v(),g()]).finally(()=>{p.set("")})},[o]),!o||!c||!r||!a)return null;const j=r?.avatar?`https://dodrc8eu8m09s.cloudfront.net/avatars/${r?.avatar}`:"/images/default-avatar.png",C=i&&!i.isCustomResource?T:$;return t.jsxs(t.Fragment,{children:[i&&t.jsx(C,{teamId:o,member:{...r,_id:c,updatedAt:new Date(r.updatedAt).toISOString(),progress:r.progresses},resourceId:i.resourceId,resourceType:i.resourceType,isCustomResource:i.isCustomResource,onClose:()=>u(null),onShowMyProgress:()=>{window.location.href=`/team/member?t=${o}&m=${f?.memberId}`}}),t.jsxs("div",{className:"mb-8 flex items-center gap-3",children:[t.jsx("img",{src:j,alt:r?.name,className:"h-14 w-14 rounded-full"}),t.jsxs("div",{children:[t.jsx("h1",{className:"mt-1 text-2xl font-medium",children:r?.name}),t.jsx("p",{className:"text-sm text-gray-500",children:r?.email})]})]}),r?.progresses&&r?.progresses?.length>0?t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"mb-3 text-xs uppercase text-gray-400",children:"Progress Overview"}),t.jsx("div",{className:"grid grid-cols-1 gap-1.5 sm:grid-cols-2",children:r?.progresses?.map(e=>{const s=e.learning||0,m=e.done||0,n=e.total||0,R=e.skipped||0;return t.jsx(N,{isCustomResource:e.isCustomResource,doneCount:m>n?n:m,learningCount:s>n?n:s,totalCount:n,skippedCount:R,resourceId:e.resourceId,resourceType:"roadmap",updatedAt:e.updatedAt,title:e.resourceTitle,roadmapSlug:e.roadmapSlug,showActions:!1,onResourceClick:()=>{u({resourceId:e.resourceId,resourceType:e.resourceType,isCustomResource:e.isCustomResource})}},e.resourceId)})})]}):t.jsx(E,{teamId:o}),a?.data&&a?.data?.length>0?t.jsxs(t.Fragment,{children:[t.jsx(S,{className:"mt-8 p-0 md:m-0 md:mb-4 md:mt-8 md:p-0",activities:a?.data?.flatMap(e=>e.activity)||[],onResourceClick:(e,s,m)=>{u({resourceId:e,resourceType:s,isCustomResource:m})}}),t.jsx(A,{currPage:y,totalPages:a?.totalPages||1,totalCount:a?.totalCount||0,perPage:a?.perPage||10,onPageChange:e=>{p.set("Loading Activity"),g(e).finally(()=>{p.set("")})}})]}):null]})}export{$e as TeamMemberDetailsPage};
