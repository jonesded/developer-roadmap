import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.Z3BHPS3u.js";import{u as te}from"./use-keydown.r409VyJJ.js";import{u as Ce}from"./use-outside-click.DYGsxgbd.js";import{a as Ye}from"./http.BJhNQusg.js";import{i as k,r as yt}from"./jwt.1xGNZsvU.js";import{g as jt,u as Ve,r as Xe,b as Ze,i as wt}from"./resource-progress.DCfaB68F.js";import{p as Ue}from"./page.DyYQD7MX.js";import{s as se}from"./popup.CdCAhVM2.js";import{u as Te}from"./use-toast.BdCcSTJE.js";import{a as kt,s as vt,m as Nt}from"./markdown.CL3gtrVM.js";import{g as St,p as Ct}from"./browser.3c2kCsRM.js";import{S as Tt}from"./Spinner.CPY-6wbR.js";import{G as $e}from"./GitHubIcon.NZCYHAdm.js";import"./vue.BIhB9hsv.js";import{l as Fe}from"./dom.B_TnKQIa.js";import{c as h}from"./classname.y9b8gBZq.js";import{X as ke}from"./x.BOdyWiWF.js";import{E as Lt}from"./earth.ApD3nwNq.js";import{W as Le}from"./wand-sparkles.8eLpe3am.js";import{u as ge,q as Q}from"./query-client.zrB8z_yM.js";import{r as be}from"./index.BlPpvBlM.js";import{i as It}from"./react-textarea-autosize.browser.esm.CREEQHIU.js";import{r as Et}from"./ai.DmXEK0i3.js";import{g as At}from"./number.DnDLgi2j.js";import{a as ye}from"./ai-course.DKL-z0Ix.js";import{b as Mt}from"./billing.CL3NoBuc.js";import{r as Pt,u as Rt}from"./roadmap-tree.BV1VY9GJ.js";import{c as je}from"./AICourseLessonChat.UzDpStvn.js";/* empty css                        */import{A as Ht}from"./AILimitsPopup.CRBmq9em.js";import{c as Ie}from"./createLucideIcon.BSLrQS80.js";import{L as Dt}from"./list.CXlwBFwN.js";import{S as et}from"./star.B-cQRnHp.js";import{B as zt}from"./book-open-text.BTmii8Os.js";import{B as Ut}from"./brain.DU33CjMf.js";import{C as tt}from"./chevron-down.pBq1owZr.js";import{L as ve}from"./loader-circle.DfB4mNyf.js";import{C as $t}from"./chevron-right.B-RYTm0N.js";import{B as qe}from"./bot.CQ2bIWO6.js";import{T as Ft}from"./trash-2.CIQaIo_h.js";import{G as qt}from"./gift.C1ExsHI3.js";import{L as Oe}from"./lock.C0C-BW9S.js";import{S as Ot}from"./send.BVE6djDn.js";import{U as Bt}from"./UpgradeAccountModal.DvmOKAPu.js";import{M as _t}from"./Modal.NtjGPDbq.js";import{F as Wt}from"./file-text.BpqfdBL4.js";import{H as Be}from"./heart-handshake.ChP6KiKS.js";import{B as Gt}from"./ban.BRPE8iYC.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],Qt=Ie("baby",Kt);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],Yt=Ie("notebook-pen",Jt);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]],Xt=Ie("pencil-line",Vt);function Zt(a){r.useEffect(()=>{function s(t){const{resourceType:o,resourceId:i,topicId:c,isCustomResource:m=!1}=t.detail;a({resourceType:o,resourceId:i,topicId:c,isCustomResource:m})}return window.addEventListener("roadmap.topic.click",s),window.addEventListener("best-practice.topic.click",s),window.addEventListener("roadmap.node.click",s),()=>{window.removeEventListener("roadmap.topic.click",s),window.removeEventListener("best-practice.topic.click",s),window.removeEventListener("roadmap.node.click",s)}},[])}function es(a){r.useEffect(()=>{function s(t){const{resourceType:o,resourceId:i,topicId:c}=t.detail;a({resourceType:o,resourceId:i,topicId:c})}return window.addEventListener("roadmap.topic.toggle",s),window.addEventListener("best-practice.topic.toggle",s),()=>{window.removeEventListener("best-practice.topic.toggle",s)}},[])}const ts={article:"bg-yellow-300",course:"bg-green-400",opensource:"bg-black text-white","roadmap.sh":"bg-black text-white",roadmap:"bg-black text-white",podcast:"bg-purple-300",video:"bg-purple-300",website:"bg-blue-300",official:"bg-blue-600 text-white",feed:"bg-[#ce3df3] text-white"},ss={course:"bg-yellow-300"};function _e(a){const{isPaid:s,type:t,className:o}=a,i=t==="opensource"?"OpenSource":t,c=t.includes("% off");return e.jsx("span",{className:h("mr-2",o),children:e.jsx("span",{className:h("inline-block rounded-sm px-1.5 py-0.5 text-xs capitalize no-underline",(s?ss[t]:ts[t])||"bg-gray-200",c&&"bg-green-300"),children:i})})}function We(a){const{url:s,onClick:t,type:o,title:i,isPaid:c=!1}=a,m=s.toLowerCase().includes("scrimba.com");return e.jsxs("a",{href:s,target:"_blank",className:"group font-medium text-gray-800 underline underline-offset-1 hover:text-black",onClick:t,children:[e.jsx(_e,{isPaid:c,type:o,discountText:m?"20% off":void 0,className:m?"mr-1":"mr-2"}),m&&e.jsx(_e,{isPaid:c,type:"20% off"}),i]})}function Ge(a){const{text:s,icon:t,className:o="",labelClassName:i=""}=a;return e.jsxs("p",{className:h("relative mt-6 flex items-center justify-start text-purple-600",o),children:[e.jsxs("span",{className:h("relative left-3 z-50 inline-flex items-center gap-1 rounded-md border border-current bg-white px-2 py-0.5 text-xs font-medium",i),children:[t&&e.jsx(t,{className:"inline-block h-3 w-3 fill-current"}),s]}),e.jsx("span",{className:"absolute inset-x-0 h-px w-full grow bg-current"})]})}function rs(a){const{onClose:s}=a;return e.jsxs("div",{className:"relative ml-3 mt-4 rounded-md bg-gray-100 p-3 px-3 text-xs text-gray-500",children:[e.jsx("button",{className:"absolute right-1 top-1",onClick:s,children:e.jsx(ke,{size:16,className:"absolute right-2 top-2 cursor-pointer"})}),e.jsx("p",{className:"mb-1 font-medium text-gray-800",children:"Note on Premium Resources"}),e.jsx("p",{className:"mb-1",children:"These are optional paid resources vetted by the roadmap team."}),e.jsx("p",{children:"If you purchase a resource, we may receive a small commission at no extra cost to you. This helps us offset the costs of running this site and keep it free for everyone."})]})}function as(a){const{activeTab:s,setActiveTab:t,hasAITutor:o=!0}=a;return e.jsxs("div",{className:"flex w-max gap-1.5",children:[e.jsx(Ke,{isActive:s==="content",icon:Lt,label:"Resources",onClick:()=>t("content")}),e.jsx(Ke,{isActive:s==="ai",icon:Le,label:"AI Tutor",isNew:!0,isDisabled:!o,onClick:()=>t("ai")})]})}function Ke(a){const{isActive:s,icon:t,label:o,isNew:i,isDisabled:c,onClick:m}=a;return e.jsxs("button",{className:"flex select-none disabled:pointer-events-none items-center gap-2 rounded-md border border-gray-300 px-2 py-1 text-sm text-gray-500 hover:border-gray-400 data-[state=active]:border-black data-[state=active]:bg-black data-[state=active]:text-white","data-state":s?"active":"inactive",onClick:m,disabled:c,type:"button",children:[e.jsx(t,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:block",children:o}),i&&!c&&e.jsx("span",{className:"hidden rounded-sm bg-yellow-400 px-1 text-xs text-black 2xl:block",children:"New"}),c&&e.jsx("span",{className:"hidden rounded-sm bg-gray-400 px-1 text-xs text-white sm:block",children:"Soon"})]})}function ns(a){const{label:s,icon:t,actions:o,onSelect:i}=a,[c,m]=r.useState(!1),x=r.useRef(null);return Ce(x,()=>{m(!1)}),e.jsxs("div",{className:"relative",ref:x,children:[e.jsx(Ne,{label:s,icon:t,onClick:()=>m(!c),isGroup:!0}),c&&e.jsx("div",{className:"absolute top-full left-0 z-20 mt-1 divide-y overflow-hidden rounded-md border border-gray-200 bg-white p-0",children:o.map(f=>e.jsx(Ne,{...f,className:"py-2 pl-2.5 pr-5 w-full rounded-none bg-transparent hover:bg-gray-200",onClick:()=>{i(f),m(!1)}},f.label))})]})}const st=[{icon:zt,label:"Explain",children:[{icon:Yt,label:"Explain the topic",prompt:"Explain this topic in detail"},{icon:Dt,label:"List the key points",prompt:"List the key points to remember from this topic"},{icon:Xt,label:"Summarize the topic",prompt:"Briefly explain the topic in a few sentences. Treat it as a brief answer to an interview question. Your response should just be the answer to the question, nothing else."},{icon:Qt,label:"Explain like I am five",prompt:"Explain this topic like I am a 5 years old"},{icon:et,label:"Why is it important?",prompt:"Why is this topic important? What are the real world applications (only add if appropriate)?"}]},{icon:Ut,label:"Test my Knowledge",prompt:"Act as an interviewer and test my understanding of this topic. Ask me a single question at a time and evaluate my answer. Question number should be bold. After evaluating my answer, immediately proceed to the next question without asking if I'm ready or want another question. Continue asking questions until I explicitly tell you to stop."}],Qe=st.reduce((a,s)=>(s.prompt&&(a[s.prompt]=s.label),s.children&&s.children.forEach(t=>{t.prompt&&(a[t.prompt]=t.label)}),a),{});function os(a){const{onSelect:s}=a;return e.jsx("div",{className:"flex items-center gap-2 border-gray-200 px-3 py-1 text-sm",children:st.map(t=>t.children?e.jsx(ns,{label:t.label,icon:t.icon,actions:t.children,onSelect:s},t.label):e.jsx(Ne,{icon:t.icon,label:t.label,onClick:()=>{s(t)}},t.label))})}function Ne(a){const{label:s,icon:t,onClick:o,isGroup:i=!1,className:c}=a;return e.jsxs("button",{className:h("flex shrink-0 items-center gap-1.5 rounded-md bg-gray-200 px-2 py-1 text-sm whitespace-nowrap hover:bg-gray-300",c),onClick:o,children:[t&&e.jsx(t,{className:"mr-1 size-3.5"}),s,i&&e.jsx(tt,{className:"size-3.5"})]})}function is(a){const{aiChatHistory:s,setAiChatHistory:t,resourceId:o,resourceType:i,topicId:c,hasUpgradeButtons:m=!0,onUpgrade:x,onLogin:f,onShowSubjectSearchModal:p}=a,F=r.useRef(null),L=r.useRef(null),I=r.useRef(null),R=c?.includes("@")?c?.split("@")?.[1]:c,H=Te(),[b,v]=r.useState(""),[D,y]=r.useState(!1),[E,l]=r.useState(""),[N,q]=r.useState(!1),{data:O,isLoading:B}=ge(ye(),Q),{data:J,isLoading:me}=ge(Mt(),Q),{data:A,isLoading:re}=ge({...Pt(o),select:n=>n.find(g=>g.nodeId===R)},Q),M=(O?.used||0)>=(O?.limit||0),_=J?.status==="active",Y=n=>{const u=(n??b).trim();if(!u||D||!k()||M||B)return;const g=[...s,{role:"user",content:u}];be.flushSync(()=>{t(g),v("")}),V(),pe(g)},V=r.useCallback(()=>{L.current?.scrollTo({top:L.current.scrollHeight,behavior:"smooth"})},[L]),pe=async n=>{try{y(!0);const u=await fetch("https://api.imoogleai.xyz/v1-topic-detail-chat",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({resourceId:o,resourceType:i,topicId:R,messages:n.slice(-10)})});if(!u.ok){const S=await u.json();H.error(S?.message||"Something went wrong"),t([...n].slice(0,n.length-1)),y(!1),S.status===401&&(yt(),window.location.reload()),Q.invalidateQueries(ye());return}const g=u.body?.getReader();if(!g){y(!1),H.error("Something went wrong");return}await Et(g,{onStream:async S=>{be.flushSync(()=>{l(S)}),V()},onStreamEnd:async S=>{const ue=[...n,{role:"assistant",content:S,html:await kt(S)}];be.flushSync(()=>{l(""),y(!1),t(ue)}),Q.invalidateQueries(ye()),V()}}),y(!1)}catch{H.error("Something went wrong"),y(!1)}};r.useEffect(()=>{V()},[]);const W=B||me||re,ae=At(O?.used||0,O?.limit||0),z=s.length>1,G=A?.text?.split(">")||[],X=A?.subjects&&A?.subjects?.length>0||G.length>1;return e.jsxs("div",{className:"relative mt-4 flex grow flex-col overflow-hidden rounded-lg border border-gray-200",children:[W&&e.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center gap-2 bg-white text-black",children:e.jsx(ve,{className:"size-8 animate-spin stroke-3 text-gray-500"})}),N&&e.jsx(Ht,{onClose:()=>q(!1),onUpgrade:()=>{q(!1),x()}}),X&&e.jsxs("div",{className:"border-b border-gray-200 p-3",children:[e.jsx("h4",{className:"flex items-center gap-2 text-sm",children:"Complete the following AI Tutor courses"}),e.jsxs("div",{className:"mt-2.5 flex flex-wrap gap-1 text-sm",children:[A?.subjects?.map(n=>e.jsx("a",{target:"_blank",onClick:u=>{if(!k()){u.preventDefault(),f();return}if(M){u.preventDefault(),x();return}},href:`/ai/course?term=${n}&difficulty=beginner&src=topic`,className:"flex items-center gap-1 gap-2 rounded-md border border-gray-300 bg-gray-100 px-2 py-1 hover:bg-gray-200 hover:text-black",children:n},n)),A?.subjects?.length===0&&e.jsx("a",{target:"_blank",href:`/ai/course?term=${A?.text}&difficulty=beginner&src=topic`,className:"flex items-center gap-1 rounded-md border border-gray-300 bg-gray-100 px-2 py-1 hover:bg-gray-200 hover:text-black [&>svg:last-child]:hidden",children:G.slice(-2).map((n,u)=>e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex items-center",children:n},n),e.jsx($t,{className:"h-3 w-3 text-gray-400"})]}))}),e.jsxs("button",{onClick:p,className:"flex items-center gap-1.5 rounded-md border border-dashed border-gray-300 bg-transparent px-2 py-1 text-gray-400 hover:border-solid hover:bg-gray-200 hover:text-black",children:[e.jsx(Le,{className:"h-3 w-3"}),"Learn another topic"]})]})]}),e.jsxs("div",{className:h("flex min-h-[46px] items-center justify-between gap-2 border-gray-200 px-3 py-2 text-sm"),children:[X&&e.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[e.jsx(qe,{className:"relative -top-[1px] size-4 shrink-0 text-black",strokeWidth:2.5}),e.jsx("span",{className:"hidden sm:block",children:"Chat with AI"}),e.jsx("span",{className:"block sm:hidden",children:"AI Tutor"})]}),!X&&e.jsxs("h4",{className:"flex items-center gap-2 text-base font-medium",children:[e.jsx(qe,{className:"relative -top-[1px] size-5 shrink-0 text-black",strokeWidth:2.5}),"AI Tutor"]}),!W&&e.jsxs("div",{className:"flex gap-1.5",children:[z&&e.jsx("button",{className:"rounded-md bg-white px-2 py-2 text-xs font-medium text-black hover:bg-gray-200",onClick:()=>{t(Se)},children:e.jsx(Ft,{className:"size-3.5"})}),!_&&m&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"hidden rounded-md bg-gray-200 px-2 py-1 text-sm hover:bg-gray-300 sm:block",onClick:()=>{if(!k()){f();return}q(!0)},children:[e.jsxs("span",{className:"font-medium",children:[ae,"%"]})," ","credits used"]}),e.jsxs("button",{className:"flex items-center gap-1 rounded-md bg-yellow-400 px-2 py-1 text-sm text-black hover:bg-yellow-500",onClick:()=>{if(!k()){f();return}x()},children:[e.jsx(qt,{className:"size-4"}),"Upgrade"]})]})]})]}),e.jsx(os,{onSelect:n=>{if(!k()){f();return}if(M){x();return}if(!n?.prompt){H.error("Something went wrong");return}v(n.prompt),Y(n.prompt)}}),e.jsx("div",{className:"scrollbar-thumb-gray-300 scrollbar-track-transparent scrollbar-thin relative grow overflow-y-auto",ref:L,children:e.jsx("div",{className:"absolute inset-0 flex flex-col",children:e.jsx("div",{className:"relative flex grow flex-col justify-end",children:e.jsxs("div",{className:"flex flex-col justify-end gap-2 px-3 py-2",children:[s.map((n,u)=>{let g=n.content;return n.role==="user"&&Qe[n.content]&&(g=Qe[n.content]),e.jsx(r.Fragment,{children:e.jsx(je,{role:n.role,content:g,html:n.html})},`chat-${u}`)}),D&&!E&&e.jsx(je,{role:"assistant",content:"Thinking..."}),E&&e.jsx(je,{role:"assistant",content:E})]})})})}),e.jsxs("form",{ref:I,className:"relative flex items-start border-t border-gray-200 text-sm",onSubmit:n=>{n.preventDefault(),Y()},children:[M&&k()&&e.jsxs("div",{className:"absolute inset-0 z-10 flex items-center justify-center gap-2 bg-black text-white",children:[e.jsx(Oe,{className:"size-4 cursor-not-allowed",strokeWidth:2.5}),e.jsxs("p",{className:"cursor-not-allowed",children:["Limit reached for today",_?". Please wait until tomorrow.":""]}),!_&&e.jsx("button",{onClick:x,className:"rounded-md bg-white px-2 py-1 text-xs font-medium text-black hover:bg-gray-300",children:"Upgrade for more"})]}),!k()&&e.jsxs("div",{className:"absolute inset-0 z-10 flex items-center justify-center gap-2 bg-black text-white",children:[e.jsx(Oe,{className:"size-4 cursor-not-allowed",strokeWidth:2.5}),e.jsx("p",{className:"cursor-not-allowed",children:"Please login to continue"}),e.jsx("button",{onClick:()=>{se()},className:"rounded-md bg-white px-2 py-1 text-xs font-medium text-black hover:bg-gray-300",children:"Login / Register"})]}),W&&e.jsxs("div",{className:"absolute inset-0 z-10 flex items-center justify-center gap-2 bg-black text-white",children:[e.jsx(ve,{className:"size-4 animate-spin"}),e.jsx("p",{children:"Loading..."})]}),e.jsx(It,{className:h("h-full min-h-[41px] grow resize-none bg-transparent px-4 py-2 focus:outline-hidden"),placeholder:"Ask AI anything about the lesson...",value:b,onChange:n=>v(n.target.value),autoFocus:!0,onKeyDown:n=>{n.key==="Enter"&&!n.shiftKey&&(n.preventDefault(),Y())},ref:F}),e.jsx("button",{type:"submit",disabled:D||M,className:"flex aspect-square size-[41px] items-center justify-center text-zinc-500 hover:text-black disabled:cursor-not-allowed disabled:opacity-50",children:e.jsx(Ot,{className:"size-4 stroke-[2.5]"})})]})]})}const rt={done:"bg-green-500",learning:"bg-yellow-500",pending:"bg-gray-300",skipped:"bg-black",removed:""};function de(a){const{status:s,shortcutKey:t,label:o,onClick:i}=a;return e.jsxs("button",{className:"inline-flex justify-between px-3 py-1.5 text-left text-sm text-gray-800 hover:bg-gray-100",onClick:i,children:[e.jsxs("span",{children:[e.jsx("span",{className:`mr-2 inline-block h-2 w-2 rounded-full ${rt[s]}`}),o]}),e.jsx("span",{className:"text-xs text-gray-500",children:t})]})}function ls(a){const{topicId:s,resourceId:t,resourceType:o,onClose:i,dropdownClassName:c}=a,m=Te(),[x,f]=r.useState(!0),[p,F]=r.useState("pending"),[L,I]=r.useState(!1),R=r.useRef(null);Ce(R,()=>{I(!1)});const H=r.useMemo(()=>!k(),[]);r.useEffect(()=>{!s||!t||!o||(f(!0),jt({topicId:s,resourceId:t,resourceType:o}).then(l=>{f(!1),F(l)}).catch(console.error))},[s,t,o]),te("d",l=>{if(!(l.target instanceof HTMLTextAreaElement||l.target instanceof HTMLInputElement||l.target instanceof HTMLSelectElement)){if(p==="done"){i();return}b("done")}},[p]),te("l",l=>{l.target instanceof HTMLTextAreaElement||l.target instanceof HTMLInputElement||l.target instanceof HTMLSelectElement||p!=="learning"&&b("learning")},[p]),te("s",l=>{if(!(l.target instanceof HTMLTextAreaElement||l.target instanceof HTMLInputElement||l.target instanceof HTMLSelectElement)){if(p==="skipped"){i();return}b("skipped")}},[p]),te("r",l=>{l.target instanceof HTMLTextAreaElement||l.target instanceof HTMLInputElement||l.target instanceof HTMLSelectElement||p!=="pending"&&b("pending")},[p]);const b=l=>{if(I(!1),H){i(),se();return}f(!0),Ve({topicId:s,resourceId:t,resourceType:o},l).then(()=>{F(l),l!=="learning"&&i(),Xe(s,l),Ze()}).catch(N=>{m.error(N.message||"Error updating progress"),console.error(N)}).finally(()=>{I(!1),f(!1),Q.invalidateQueries(Rt(o,t))})},v=["pending","learning","done"].includes(p),D=["skipped","pending","learning"].includes(p),y=["done","skipped","pending"].includes(p),E=["skipped","done","learning"].includes(p);return e.jsxs("div",{className:"relative inline-flex",children:[e.jsxs("button",{disabled:x,className:h("flex 2xl:min-w-[135px] cursor-default cursor-pointer items-center rounded-md border border-gray-300 p-1 px-2 text-sm text-black hover:border-gray-400 disabled:pointer-events-none disabled:opacity-50"),onClick:()=>I(!0),children:[!x&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex h-2 w-2",children:e.jsx("span",{className:h("relative inline-flex h-2 w-2 rounded-full",rt[p],x&&"animate-pulse")})}),e.jsx("span",{className:"ml-2 mr-2 capitalize",children:p==="learning"?"In Progress":p})]}),x&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(ve,{strokeWidth:3,className:"size-3 flex-shrink-0 animate-spin"}),e.jsx("span",{className:"ml-2 text-sm",children:"Updating.."})]}),e.jsx(tt,{className:"ml-auto h-4 w-4"})]}),L&&e.jsxs("div",{className:h("absolute top-full right-0 z-50 mt-1 flex min-w-[160px] flex-col divide-y rounded-md border border-gray-200 bg-white shadow-md [&>button:first-child]:rounded-t-md [&>button:last-child]:rounded-b-md",c),ref:R,children:[D&&e.jsx(de,{status:"done",shortcutKey:"D",label:"Done",onClick:()=>b("done")}),y&&e.jsx(de,{status:"learning",shortcutKey:"L",label:"In Progress",onClick:()=>b("learning")}),E&&e.jsx(de,{status:"pending",shortcutKey:"R",label:"Reset",onClick:()=>b("pending")}),v&&e.jsx(de,{status:"skipped",shortcutKey:"S",label:"Skip",onClick:()=>b("skipped")})]})]})}function cs(a){const{onClose:s}=a,[t,o]=r.useState("");return e.jsx(_t,{onClose:s,wrapperClassName:"h-auto mt-20",overlayClassName:"items-start",bodyClassName:"p-1.5",children:e.jsxs("form",{onSubmit:i=>{i.preventDefault();const m=new FormData(i.target).get("subject");window.location.href=`/ai/course?term=${m}&difficulty=beginner&src=topic`,s()},children:[e.jsx("label",{className:"mb-2.5 ml-1 inline-block text-sm leading-none",htmlFor:"subject",children:"Ask AI to Teach You"}),e.jsxs("div",{className:"relative flex items-center gap-2 overflow-hidden",children:[e.jsx("input",{id:"subject",type:"text",className:"w-full bg-white p-2.5 pr-8 text-sm focus:outline-hidden",placeholder:"Enter a topic to learn",name:"subject",autoFocus:!0,value:t,onChange:i=>o(i.target.value)}),e.jsxs("button",{disabled:!t.trim(),className:"flex h-full disabled:opacity-40 items-center justify-center gap-2 rounded-md bg-black px-3 py-1 text-sm text-white hover:opacity-80",children:["Generate",e.jsx(Le,{className:"size-4"})]})]})]})})}const we={},ds="close-topic-detail",Se=[{role:"assistant",content:"Hey, I am your AI instructor. How can I help you today? ðŸ¤–",isDefault:!0}];async function ms(a){if(we[a])return we[a];const{response:s,error:t}=await Ye(`https://api.imoogleai.xyz/v1-list-roadmap-paid-resources/${a}`);return!s||t?(console.error(t),[]):(we[a]=s,s)}const Je="paid-resource-disclaimer-hidden";function lr(a){const{hasUpgradeButtons:s=!0,canSubmitContribution:t,resourceId:o,isEmbed:i=!1,renderer:c="balsamiq",wrapperClassName:m,bodyClassName:x,overlayClassName:f,closeButtonClassName:p,onClose:F,shouldCloseOnBackdropClick:L=!0,shouldCloseOnEscape:I=!0,defaultActiveTab:R="content"}=a,[H,b]=r.useState(!1),[v,D]=r.useState(""),[y,E]=r.useState(!1),[l,N]=r.useState(!1),[q,O]=r.useState(!1),[B,J]=r.useState(""),[me,A]=r.useState(""),[re,M]=r.useState(!1),[_,Y]=r.useState(""),[V,pe]=r.useState(""),[W,ae]=r.useState([]),[z,G]=r.useState(R),[X,n]=r.useState(Se),[u,g]=r.useState(!1),[S,ue]=r.useState(!1),[at,he]=r.useState(!1),nt=Te(),[ot,Ee]=r.useState(!1),{secret:Ae}=St(),it=r.useMemo(()=>!k(),[]),xe=r.useRef(null),[P,lt]=r.useState(""),[ne,ct]=r.useState(""),[Z,dt]=r.useState("roadmap"),[Me,mt]=r.useState([]),ee=()=>{F?.(),E(!1),O(!1),g(!1),n(Se),G("content"),he(!1),Fe(!1),window.dispatchEvent(new Event(ds))};if(Ce(xe,L?ee:void 0),te("Escape",I?ee:void 0),r.useEffect(()=>{Z!=="roadmap"||!o||(Ee(localStorage.getItem(Je)!=="true"),ms(o).then(d=>{mt(d)}))},[o]),es(({topicId:d,resourceType:C,resourceId:U})=>{if(it){se();return}Ue.set("Updating"),wt({topicId:d,resourceId:U,resourceType:C}).then(j=>Ve({topicId:d,resourceId:U,resourceType:C},j?"pending":"done")).then(({done:j=[]})=>{Xe(d,j.includes(d)?"done":"pending"),Ze()}).catch(j=>{nt.error(j.message),console.error(j)}).finally(()=>{Ue.set("")})}),Zt(({topicId:d,resourceType:C,resourceId:U,isCustomResource:j})=>{J(""),N(!0),E(!0),lt(d),dt(C),ct(U),ue(j);const Re=d.replaceAll(":","/");let He=C==="roadmap"?`/${U}/${Re}`:`/best-practices/${U}/${Re}`;j&&(He=`https://api.imoogleai.xyz/v1-get-node-content/${U}/${d}${Ae?`?secret=${Ae}`:""}`),Ye(He,{},{...!j&&{headers:{Accept:"text/html"}}}).then(({response:K})=>{if(!K){J("Topic not found."),N(!1);return}let fe="";if(j){ae(K?.links||[]),Y(K?.title||"");const T=vt(K.description||"");M(T?.length>0),fe=Nt(T,!1)}else{const T=new DOMParser().parseFromString(K,"text/html"),ut=T.querySelectorAll("a"),ht=T.querySelector("[data-github-url]")?.dataset?.githubUrl||"",xt=T.querySelector("h1"),ft=T.querySelectorAll("body > *:not(h1, div)");let ie=document.createElement("ul");T.querySelectorAll("ul").forEach($=>{Array.from($.querySelectorAll("li")).filter(w=>w.children.length===1&&w.children[0].tagName==="A"&&w.children[0].textContent===w.textContent).length>0&&(ie=$)});const gt=Array.from(ie.querySelectorAll("li > a")).map(($,le)=>{const w=/@([a-z.]+)@/;let ce=$.textContent||"";const ze=$.getAttribute("href")||"",bt=ce.match(w)?.[1]||"article";return ce=ce.replace(w,""),{id:`link-${ze}-${le}`,title:ce,url:ze,type:bt}}).sort(($,le)=>{const w=["official","opensource","article","video","feed"];return w.indexOf($.type)-w.indexOf(le.type)});ie&&ie.remove(),fe=T.body.innerHTML;const De=ft.length>0;ae(gt),M(De),D(ht),b(ut.length>=3),pe(xt?.textContent||""),!De&&c==="editor"&&G("ai")}N(!1),A(fe)}).catch(K=>{J("Something went wrong. Please try again later."),N(!1)})}),r.useEffect(()=>{y&&(Fe(!0),xe?.current?.focus())},[y]),!y)return null;const Pe=Me.filter(d=>{const C=P.indexOf("@")!==-1?P.split("@")[1]:P;return d.topicIds.includes(C)}),oe=!S&&Z==="roadmap",pt=Me.some(d=>d.title.toLowerCase().includes("datacamp"));return e.jsxs("div",{className:h("relative z-92",m),children:[e.jsxs("div",{ref:xe,tabIndex:0,className:h("fixed top-0 right-0 z-40 flex h-screen w-full flex-col overflow-y-auto bg-white p-4 focus:outline-0 sm:max-w-[600px] sm:p-6",x),children:[u&&e.jsx(Bt,{onClose:()=>g(!1)}),at&&e.jsx(cs,{onClose:()=>he(!1)}),l&&e.jsx("div",{className:"flex h-full w-full justify-center",children:e.jsx(Tt,{outerFill:"#d1d5db",className:"h-6 w-6 sm:h-8 sm:w-8",innerFill:"#2563eb",isDualRing:!1})}),!q&&!l&&!B&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:h("flex-1",{"flex flex-col":z==="ai"}),children:[e.jsxs("div",{className:"flex justify-between",children:[oe&&e.jsx(as,{activeTab:z,setActiveTab:G,hasAITutor:c==="editor"}),e.jsxs("div",{className:h("flex flex-grow justify-end gap-1",{"justify-between":!oe}),children:[!i&&e.jsx(ls,{topicId:P.indexOf("@")!==-1?P.split("@")[1]:P,dropdownClassName:oe?"right-0":"left-0",resourceId:ne,resourceType:Z,onClose:()=>null}),e.jsx("button",{type:"button",id:"close-topic",className:h("flex items-center gap-1.5 rounded-lg bg-gray-200 px-1.5 py-1 text-xs text-black hover:bg-gray-300 hover:text-gray-900",p),onClick:ee,children:e.jsx(ke,{className:"size-4"})})]})]}),z==="ai"&&oe&&e.jsx(is,{resourceId:ne,resourceType:Z,topicId:P,aiChatHistory:X,setAiChatHistory:n,hasUpgradeButtons:s,onUpgrade:()=>g(!0),onLogin:()=>{ee(),se()},onShowSubjectSearchModal:()=>{if(!k()){se();return}he(!0)}}),z==="content"&&e.jsxs(e.Fragment,{children:[re?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"prose prose-quoteless prose-h1:mb-2.5 prose-h1:mt-7 prose-h1:text-balance prose-h2:mb-3 prose-h2:mt-0 prose-h3:mb-[5px] prose-h3:mt-[10px] prose-p:mb-2 prose-p:mt-0 prose-blockquote:font-normal prose-blockquote:not-italic prose-blockquote:text-gray-700 prose-li:m-0 prose-li:mb-0.5",children:[_&&e.jsx("h1",{children:_}),e.jsx("div",{id:"topic-content",dangerouslySetInnerHTML:{__html:me}})]})}):e.jsxs(e.Fragment,{children:[!t&&e.jsxs("div",{className:"flex h-[calc(100%-38px)] flex-col items-center justify-center",children:[e.jsx(Wt,{className:"h-16 w-16 text-gray-300"}),e.jsx("p",{className:"mt-2 text-lg font-medium text-gray-500",children:"Empty Content"})]}),t&&e.jsxs("div",{className:"mx-auto flex h-[calc(100%-38px)] max-w-[400px] flex-col items-center justify-center text-center",children:[e.jsx(Be,{className:"mb-2 h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Help us write this content"}),e.jsx("p",{className:"mt-2 mb-3 text-sm text-gray-500",children:"Write a brief introduction to this topic and submit a link to a good article, podcast, video, or any other self-vetted resource that helped you understand this topic better."}),e.jsxs("a",{href:v,target:"_blank",className:"flex w-full items-center justify-center rounded-md bg-gray-800 p-2 text-sm text-white transition-colors hover:bg-black hover:text-white disabled:bg-green-200 disabled:text-black",children:[e.jsx($e,{className:"mr-2 inline-block h-4 w-4 text-white"}),"Help us Write this Content"]})]})]}),ne==="ai-data-scientist"&&pt&&e.jsxs("div",{className:"mt-5 rounded-md bg-yellow-100 px-4 py-3 text-sm text-gray-600",children:[e.jsx("p",{className:"text-balance",children:"Follow the resources listed on the roadmap or check out the premium courses by DataCamp listed below."}),e.jsxs("p",{className:"mt-3 text-balance",children:["They also have an"," ",e.jsx("a",{href:"https://datacamp.pxf.io/POk5PY",className:"font-medium text-blue-600 underline hover:text-blue-800",target:"_blank",children:"Associate Data Scientist in Python"})," ","track that covers all the key data scientist skills in one place."]})]}),W.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{text:"Free Resources",className:"text-green-600",icon:Be}),e.jsx("ul",{className:"mt-4 ml-3 space-y-1",children:W.map(d=>e.jsx("li",{children:e.jsx(We,{url:d.url,type:d.type,title:d.title,onClick:()=>{if(t){const C=Ct(d.url);window.fireEvent({category:"TopicResourceClick",action:`Click: ${C.hostname}`,label:`${Z} / ${ne} / ${P} / ${d.url}`})}}})},d.id))})]}),Pe.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ge,{text:"Premium Resources",icon:et}),e.jsx("ul",{className:"mt-3 ml-3 space-y-1",children:Pe.map(d=>e.jsx("li",{children:e.jsx(We,{url:d.url,type:d.type,title:d.title,isPaid:!0})},d._id))}),ot&&e.jsx(rs,{onClose:()=>{localStorage.setItem(Je,"true"),Ee(!1)}})]})]})]}),t&&v&&z==="content"&&re&&e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:v,target:"_blank",className:"hidden items-center justify-center rounded-md px-2 py-2 text-sm transition-all hover:bg-gray-200 sm:flex",children:[e.jsx($e,{className:"mr-2 inline-block h-4 w-4 text-current"}),"Help us add resources to this topic"]})})]}),!q&&!l&&B&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",id:"close-topic",className:"absolute top-2.5 right-2.5 inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900",onClick:()=>{ee()},children:e.jsx(ke,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex h-full flex-col items-center justify-center",children:[e.jsx(Gt,{className:"h-16 w-16 text-red-500"}),e.jsx("p",{className:"mt-2 text-lg font-medium text-red-500",children:B})]})]})]}),e.jsx("div",{className:h("fixed inset-0 z-30 bg-gray-900/50",f)})]})}export{ds as C,lr as T};
