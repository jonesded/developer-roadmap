import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.Z3BHPS3u.js";import"./js.cookie.Cz0CWeBA.js";import{h as x}from"./http.BJhNQusg.js";import{s as f,F as h}from"./jwt.1xGNZsvU.js";import{S as u}from"./Spinner.CPY-6wbR.js";import{E as g}from"./ErrorIcon2.CKS6u1cj.js";import{t as w}from"./browser.3c2kCsRM.js";import"./fp.esm.CznIeghd.js";function R(){const[i,r]=o.useState(!0),[s,a]=o.useState(""),c=n=>{r(!0),x("https://api.hnmdevs.com/v1-verify-account",{code:n}).then(({response:e,error:l})=>{if(!e?.token){a(l?.message||"Something went wrong. Please try again."),r(!1);return}w(),f(e.token);const m=new URL("/",window.location.origin);m.searchParams.set(h,e?.isNewUser?"1":"0"),window.location.href=m.toString()}).catch(e=>{r(!1),a("Something went wrong. Please try again.")})};return o.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("code");if(!e){r(!1),a("Something went wrong. Please try again later.");return}c(e)},[]),t.jsx("div",{className:"mx-auto flex max-w-md flex-col items-center pt-0 sm:pt-12",children:t.jsxs("div",{className:"mx-auto max-w-md text-center",children:[i&&t.jsx(u,{className:"mx-auto h-16 w-16"}),s&&t.jsx(g,{className:"mx-auto h-16 w-16"}),t.jsx("h2",{className:"mb-1 mt-4 text-center text-xl font-semibold sm:mb-3 sm:mt-4 sm:text-2xl",children:"Verifying your account"}),t.jsxs("div",{className:"text-sm sm:text-base",children:[i&&t.jsx("p",{children:"Please wait while we verify your account.."}),s&&t.jsx("p",{className:"text-red-700",children:s})]})]})})}export{R as TriggerVerifyAccount};
