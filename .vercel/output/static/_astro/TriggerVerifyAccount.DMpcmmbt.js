import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.Z3BHPS3u.js";import"./js.cookie.Cz0CWeBA.js";import{h as x}from"./http.BJhNQusg.js";import{s as f,F as u}from"./jwt.1xGNZsvU.js";import{S as g}from"./Spinner.CPY-6wbR.js";import{E as d}from"./ErrorIcon2.CKS6u1cj.js";import{t as h}from"./browser.3c2kCsRM.js";import"./fp.esm.CznIeghd.js";function R(){const[n,r]=o.useState(!0),[s,a]=o.useState(""),c=i=>{r(!0),x("undefined/v1-verify-account",{code:i}).then(({response:t,error:l})=>{if(!t?.token){a(l?.message||"Something went wrong. Please try again."),r(!1);return}h(),f(t.token);const m=new URL("/",window.location.origin);m.searchParams.set(u,t?.isNewUser?"1":"0"),window.location.href=m.toString()}).catch(t=>{r(!1),a("Something went wrong. Please try again.")})};return o.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("code");if(!t){r(!1),a("Something went wrong. Please try again later.");return}c(t)},[]),e.jsx("div",{className:"mx-auto flex max-w-md flex-col items-center pt-0 sm:pt-12",children:e.jsxs("div",{className:"mx-auto max-w-md text-center",children:[n&&e.jsx(g,{className:"mx-auto h-16 w-16"}),s&&e.jsx(d,{className:"mx-auto h-16 w-16"}),e.jsx("h2",{className:"mb-1 mt-4 text-center text-xl font-semibold sm:mb-3 sm:mt-4 sm:text-2xl",children:"Verifying your account"}),e.jsxs("div",{className:"text-sm sm:text-base",children:[n&&e.jsx("p",{children:"Please wait while we verify your account.."}),s&&e.jsx("p",{className:"text-red-700",children:s})]})]})})}export{R as TriggerVerifyAccount};
