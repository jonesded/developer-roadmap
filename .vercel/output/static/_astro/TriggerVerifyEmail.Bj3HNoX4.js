import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.Z3BHPS3u.js";import{b as d}from"./http.BJhNQusg.js";import{s as h}from"./jwt.1xGNZsvU.js";import{S as p}from"./Spinner.CPY-6wbR.js";import{E as f}from"./ErrorIcon2.CKS6u1cj.js";import{g as u}from"./browser.3c2kCsRM.js";import{C as g}from"./CheckIcon.D4OhQ5l1.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.CznIeghd.js";function C(){const{code:s}=u(),[i,t]=o.useState("loading"),[r,a]=o.useState(""),l=c=>{t("loading"),d(`https://api.roadmap.sh/v1-verify-new-email/${c}`,{}).then(({response:m,error:x})=>{if(!m?.token){a(x?.message||"Something went wrong. Please try again."),t("error");return}h(m.token),t("success")}).catch(m=>{t("error"),a("Something went wrong. Please try again.")})};o.useEffect(()=>{if(!s){t("error"),a("Something went wrong. Please try again later.");return}l(s)},[s]);const n=i==="loading";return i==="success"?e.jsxs("div",{className:"mx-auto flex max-w-md flex-col items-center pt-0 sm:pt-12",children:[e.jsx(g,{additionalClasses:"h-16 w-16 opacity-100"}),e.jsx("h2",{className:"mb-1 mt-4 text-center text-xl font-semibold sm:mb-3 sm:mt-4 sm:text-2xl",children:"Email Update Successful"}),e.jsx("p",{className:"text-sm sm:text-base",children:"Your email has been changed successfully. Happy learning!"})]}):e.jsx("div",{className:"mx-auto flex max-w-md flex-col items-center pt-0 sm:pt-12",children:e.jsxs("div",{className:"mx-auto max-w-md text-center",children:[n&&e.jsx(p,{className:"mx-auto h-16 w-16"}),r&&e.jsx(f,{className:"mx-auto h-16 w-16"}),e.jsx("h2",{className:"mb-1 mt-4 text-center text-xl font-semibold sm:mb-3 sm:mt-4 sm:text-2xl",children:"Verifying your new Email"}),e.jsxs("div",{className:"text-sm sm:text-base",children:[n&&e.jsx("p",{children:"Please wait while we verify your new Email."}),r&&e.jsx("p",{className:"text-red-700",children:r})]})]})})}export{C as TriggerVerifyEmail};
