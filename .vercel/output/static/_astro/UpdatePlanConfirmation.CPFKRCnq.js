import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{u as m}from"./useMutation.BxVH4XRI.js";import{M as p}from"./Modal.NtjGPDbq.js";import{q as u}from"./query-client.zrB8z_yM.js";import{u as b}from"./use-toast.BdCcSTJE.js";import{V as x}from"./VerifyUpgrade.ButUjaV5.js";import{a as f}from"./query-http.BQfMbvYq.js";import{L as h}from"./loader-circle.DfB4mNyf.js";function w(o){const{planDetails:a,onClose:i,onCancel:n}=o,l=b(),{mutate:d,isPending:t,status:c}=m({mutationFn:r=>f("/v1-update-subscription-plan",r),onError:r=>{console.error(r),l.error(r?.message||"Failed to Create Customer Portal")}},u);if(!a)return null;const s=a;return c==="success"?e.jsx(x,{newPriceId:s.priceId}):e.jsxs(p,{onClose:t?()=>{}:i,bodyClassName:"rounded-xl bg-white p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-black",children:"Subscription Update"}),e.jsxs("p",{className:"mt-2 text-balance text-gray-600",children:["Your plan will be updated to the"," ",e.jsx("b",{className:"text-black",children:a.interval})," plan, and will be charged"," ",e.jsxs("b",{className:"text-black",children:["$",s.amount,"/",s.interval]}),"."]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[e.jsx("button",{className:"rounded-md border border-gray-200 py-2 text-sm font-semibold transition-colors hover:bg-gray-50 disabled:opacity-50",onClick:n,disabled:t,children:"Cancel"}),e.jsxs("button",{className:"flex items-center justify-center rounded-md bg-purple-600 py-2 text-sm font-semibold text-white transition-colors hover:bg-purple-500 disabled:opacity-50",disabled:t,onClick:()=>{d({priceId:s.priceId})},children:[t&&e.jsx(h,{className:"mr-2 size-4 animate-spin stroke-[2.5]"}),!t&&"Confirm"]})]})]})}export{w as U};
