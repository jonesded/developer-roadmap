import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.Z3BHPS3u.js";import{b as me,h as Ce,a as ae}from"./http.BJhNQusg.js";import{p as H}from"./page.DyYQD7MX.js";import{S as b}from"./SelectionButton.BqgEBFYF.js";import{u as I}from"./use-toast.BdCcSTJE.js";import{C as Se}from"./CreateRoadmapModal.4jjEH5QG.js";import"./js.cookie.Cz0CWeBA.js";import{u as Pe}from"./use-outside-click.DYGsxgbd.js";import{c as P}from"./classname.y9b8gBZq.js";import{G as re}from"./globe.B6R113av.js";import{L as ie}from"./lock.C0C-BW9S.js";import{C as Re}from"./chevron-down.pBq1owZr.js";import{u as Ue}from"./use-debounce.CXZLeMbB.js";import{L as Ve}from"./loader-circle.DfB4mNyf.js";import{X as Fe}from"./x.BOdyWiWF.js";import{C as ue}from"./check.DflWYpXj.js";import{U as Ae}from"./UploadProfilePicture.vs0rko0v.js";import{c as Ee}from"./createLucideIcon.BSLrQS80.js";import{C as pe}from"./circle-check-big.CnV0y9bI.js";import{u as Le}from"./use-copy-text.D2rWbbuk.js";import{A as oe}from"./arrow-up-right.CWJoE-FU.js";import{C as ne}from"./copy.CgTXj779.js";import{E as ce}from"./eye.mqNm1dCT.js";import{E as de}from"./eye-off.oVBqHexY.js";import"./fp.esm.CznIeghd.js";import"./jwt.1xGNZsvU.js";import"./index.3whys8t3.js";import"./toast.DlejBBdi.js";import"./Modal.NtjGPDbq.js";import"./use-keydown.r409VyJJ.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"12ixgl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",key:"u0c8gj"}],["path",{d:"M7 16.5 8 22l-3-1-3 1 1-5.5",key:"5gm2nr"}]],$e=Ee("file-badge",De);function He(i){const{visibility:l,setVisibility:x}=i,y=I(),r=t.useRef(null);Pe(r,()=>{u(!1)});const[o,u]=t.useState(!1);async function p(n){H.set("Updating profile visibility"),u(!1);const{error:d}=await me("undefined/v1-update-public-profile-visibility",{profileVisibility:n});if(d){y.error(d.message||"Something went wrong");return}H.set(""),x(n)}return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{u(!0)},className:P("flex items-center gap-1 rounded-lg border border-black py-1 pl-1.5 pr-2 text-sm capitalize text-black",{invisible:o}),children:[l==="public"&&e.jsx(re,{className:"mr-1",size:13}),l==="private"&&e.jsx(ie,{className:"mr-1",size:13}),l,e.jsx(Re,{size:13,className:"ml-1"})]}),o&&e.jsxs("div",{className:"absolute right-0 top-0 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-lg",ref:r,children:[e.jsxs("button",{className:P("flex w-full items-center gap-2 py-2.5 pl-3 pr-3.5 text-left text-sm hover:bg-gray-100",{"bg-gray-200":l==="public"}),onClick:()=>p("public"),children:[e.jsx(re,{size:13}),"Public"]}),e.jsxs("button",{className:P("flex w-full items-center gap-2 py-2.5 pl-3 pr-3.5 text-left text-sm hover:bg-gray-100",{"bg-gray-200":l==="private"}),onClick:()=>p("private"),children:[e.jsx(ie,{size:13}),"Private"]})]})]})}function Ie(i){const{username:l,setUsername:x,profileVisibility:y,currentUsername:r}=i,o=I(),[u,p]=t.useState(!1),[n,d]=t.useState(null),w=Ue(l,500);t.useEffect(()=>{R(w).then()},[w]);const R=async a=>{if(u||!a)return;if(a.length<3){d(!1);return}if(r&&a===r&&n!==!1){d(!0);return}p(!0);const{response:m,error:V}=await Ce("undefined/v1-check-is-unique-username",{username:a});if(V||!m){d(null),p(!1),o.error(V?.message||"Something went wrong. Please try again.");return}d(m.isUnique),p(!1)},U=/^[a-zA-Z0-9]*$/,j=a=>U.test(a)&&a.length<=20;return e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("label",{htmlFor:"username",className:"flex min-h-[16.5px] items-center justify-between text-sm leading-none text-slate-500",children:[e.jsx("span",{children:"Profile URL"}),!u&&e.jsxs("span",{className:"flex items-center",children:[r&&(r===l||!l||!n)&&e.jsxs("span",{className:"text-xs",children:["Current URL"," ",e.jsxs("a",{href:`https://roadmap.sh/u/${r}`,target:"_blank",className:"ml-0.5 rounded-md border border-purple-500 px-1.5 py-0.5 font-mono text-xs font-medium text-purple-700 transition-colors hover:bg-purple-500 hover:text-white",children:["roadmap.sh/u/",r]})]}),r!==l&&l&&n&&e.jsxs("span",{className:"text-xs text-green-600",children:["URL after update"," ",e.jsxs("span",{className:"ml-0.5 rounded-md border border-purple-500 px-1.5 py-0.5 text-xs font-medium text-purple-700 transition-colors",children:["roadmap.sh/u/",l]})]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center overflow-hidden rounded-lg border border-gray-300",children:[e.jsx("span",{className:"border-r border-gray-300 bg-gray-100 p-2",children:"roadmap.sh/u/"}),e.jsxs("div",{className:"relative grow",children:[e.jsx("input",{type:"text",name:"username",id:"username",className:"w-full px-3 py-2 outline-hidden placeholder:text-gray-400",placeholder:"johndoe",spellCheck:!1,value:l,title:"Username must be at least 3 characters long and can only contain letters, numbers, and underscores",onKeyDown:a=>{const m=a.key;!j(m)&&!["Backspace","Delete","ArrowLeft","ArrowRight"].includes(m)&&a.preventDefault()},onInput:a=>{const m=a.target.value?.trim();j(m)&&x(a.target.value.toLowerCase())},required:y==="public"}),l&&e.jsx("span",{className:"absolute bottom-0 right-0 top-0 flex items-center px-2",children:u?e.jsx(Ve,{className:"h-4 w-4 animate-spin"}):n===!1?e.jsx(Fe,{className:"h-4 w-4 text-red-500"}):n===!0?e.jsx(ue,{className:"h-4 w-4 text-green-500"}):null})]})]})]})}const qe=["Add a link to your profile in your social media bio","Include your profile link in your resume to showcase your skills","Add a link to your profile in your email signature","Showcase your skills in your GitHub profile","Share your profile with potential employers"];function ze(){return e.jsxs("div",{className:"relative mb-5 rounded-lg bg-yellow-200 px-3 py-3 text-sm text-yellow-800",children:[e.jsx($e,{className:"absolute hidden sm:block bottom-3 right-3 h-20 w-20 stroke-2 text-yellow-500 opacity-50"}),e.jsxs("h2",{className:"mb-1 text-base font-semibold",children:["Announcing Skill Profiles!"," "]}),e.jsx("p",{className:"text-sm",children:"Create your skill profile to showcase your skills or learning progress. Here are some of the ways you can use your skill profile:"}),e.jsx("div",{className:"my-3 ml-2 flex flex-col gap-1 sm:ml-3",children:qe.map(i=>e.jsxs("p",{className:"flex flex-row items-start gap-1.5 sm:items-center",children:[e.jsx(pe,{className:"relative top-[3px] h-3.5 w-3.5 shrink-0 stroke-[2.5] sm:top-0"}),e.jsx("span",{children:i})]},i))}),e.jsxs("p",{className:"text-sm",children:["Make sure to mark your expertise"," ",e.jsx("a",{href:"/roadmaps",target:"_blank",className:"font-semibold underline underline-offset-2",children:"in the roadmaps."})]})]})}function bs(){const[i,l]=t.useState("public"),x=I(),[y,r]=t.useState(!1),[o,u]=t.useState(""),[p,n]=t.useState(!1),[d,w]=t.useState(!0),[R,U]=t.useState(""),[j,a]=t.useState(""),[m,V]=t.useState(""),[F,A]=t.useState("all"),[E,L]=t.useState("all"),[v,k]=t.useState([]),[N,C]=t.useState([]),[xe,fe]=t.useState(""),[q,z]=t.useState(""),[M,he]=t.useState(""),[_,G]=t.useState(""),[O,T]=t.useState(""),[B,W]=t.useState(""),[X,Z]=t.useState(""),[J,K]=t.useState(""),[Y,ge]=t.useState([]),[Q,f]=t.useState(!1),[be,ye]=t.useState(!1),{isCopied:g,copyText:ee}=Le(),we=async s=>{s.preventDefault(),f(!0);const{response:c,error:D}=await me("undefined/v1-update-public-profile-config",{isAvailableForHire:p,isEmailVisible:d,profileVisibility:i,headline:R,username:j,roadmapVisibility:F,customRoadmapVisibility:E,roadmaps:v,customRoadmaps:N,github:_,twitter:O,linkedin:B,website:J,name:q,email:m,dailydev:X});if(D||!c){f(!1),x.error(D?.message||"Something went wrong");return}await se(),x.success("Profile updated successfully"),ye(!0)},se=async()=>{f(!0);const{error:s,response:c}=await ae("undefined/v1-get-profile-settings");if(s||!c){f(!1),x.error(s?.message||"Something went wrong");return}const{name:D,email:ve,links:S,username:$,profileVisibility:ke,publicConfig:h,avatar:Ne}=c;he(Ne||""),u($?`/u/${$}`:""),a($||""),fe($||""),z(D||""),V(ve||""),G(S?.github||""),T(S?.twitter||""),W(S?.linkedin||""),Z(S?.dailydev||""),K(S?.website||""),l(ke||"public"),U(h?.headline||""),A(h?.roadmapVisibility||"all"),L(h?.customRoadmapVisibility||"all"),C(h?.customRoadmaps||[]),k(h?.roadmaps||[]),n(h?.isAvailableForHire||!1),w(h?.isEmailVisible??!0),f(!1)},je=async()=>{f(!0);const{error:s,response:c}=await ae("undefined/v1-get-profile-roadmaps");if(s||!c){f(!1),x.error(s?.message||"Something went wrong");return}ge(c?.roadmaps||[]),f(!1)};t.useEffect(()=>{Promise.all([se(),je()]).finally(()=>{H.set("")})},[]);const te=Y.filter(s=>s.isCustomResource&&s.id&&s.title),le=Y.filter(s=>!s.isCustomResource&&s.id&&s.title);return e.jsxs("div",{children:[y&&e.jsx(Se,{onClose:()=>r(!1)}),e.jsx(ze,{}),e.jsxs("div",{className:"mb-8 flex flex-col justify-between gap-2 sm:mb-1 sm:flex-row",children:[e.jsxs("div",{className:"flex grow flex-row items-center gap-2 sm:items-center",children:[e.jsx("h3",{className:"mr-1 text-xl font-bold sm:text-3xl",children:"Skill Profile"}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:o,target:"_blank",className:"flex shrink-0 flex-row items-center gap-1 rounded-lg border border-black py-0.5 pl-1.5 pr-2.5 text-xs uppercase transition-colors hover:bg-black hover:text-white",children:[e.jsx(oe,{className:"h-3 w-3 stroke-3"}),"Visit"]}),e.jsxs("button",{onClick:()=>{ee(`${window.location.origin}${o}`)},className:P("flex shrink-0 flex-row items-center gap-1 rounded-lg border border-black py-0.5 pl-1.5 pr-2.5 text-xs uppercase transition-colors hover:bg-black hover:text-white",{"bg-black text-white":g}),children:[!g&&e.jsx(ne,{className:"h-3 w-3 stroke-[2.5]"}),g&&e.jsx(ue,{className:"h-3 w-3 stroke-[2.5]"}),g?"Copied!":"Copy URL"]})]})]}),e.jsx(He,{visibility:i,setVisibility:l})]}),e.jsx("p",{className:"mb-8 mt-2 hidden text-sm text-gray-400 sm:mt-0 sm:block sm:text-base",children:"Create your skill profile to showcase your skills."}),e.jsx(Ae,{type:"avatar",label:"Profile picture",avatarUrl:M?`undefined/${M}`:"/images/default-avatar.png"}),e.jsxs("form",{className:"mt-6 space-y-4 pb-10",onSubmit:we,children:[e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"name",className:'text-sm leading-none text-slate-500 after:text-red-400 after:content-["*"]',children:"Name"}),e.jsx("input",{type:"text",name:"name",id:"name",className:"mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,placeholder:"John Doe",value:q,onInput:s=>z(s.target.value)})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:"email",className:'text-sm leading-none text-slate-500 after:text-red-400 after:content-["*"]',children:"Email"}),e.jsx("a",{href:"/account/settings",className:"text-xs text-purple-700 underline hover:text-purple-800",children:"Visit settings page to change email"})]}),e.jsx("input",{type:"email",name:"email",id:"email",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,disabled:!0,placeholder:"john@example.com",value:m}),e.jsx("div",{className:"flex items-center justify-end gap-2 rounded-md text-xs text-gray-400",children:e.jsxs("div",{className:"flex select-none items-center justify-end gap-2 rounded-md text-xs text-gray-400",children:[e.jsx("input",{type:"checkbox",name:"isEmailVisible",id:"isEmailVisible",checked:d,onChange:s=>w(s.target.checked)}),e.jsx("label",{htmlFor:"isEmailVisible",className:"grow cursor-pointer py-1.5",children:"Show my email on profile"})]})})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"headline",className:"text-sm leading-none text-slate-500",children:"Headline"}),e.jsx("input",{type:"text",name:"headline",id:"headline",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"Full Stack Developer",value:R,onChange:s=>U(s.target.value),required:i==="public"})]}),e.jsx(Ie,{username:j,setUsername:a,profileVisibility:i,currentUsername:xe}),e.jsxs("div",{className:"rounded-md border p-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Which roadmap progresses do you want to show on your profile?"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(b,{type:"button",text:"All Progress",icon:ce,isDisabled:!1,isSelected:F==="all",onClick:()=>{A("all"),k([])}}),e.jsx(b,{type:"button",icon:de,text:"Hide my Progress",isDisabled:!1,isSelected:F==="none",onClick:()=>{A("none"),k([])}})]}),e.jsx("h3",{className:"mt-4 text-sm text-gray-400",children:"Or select the roadmaps you want to show"}),le.length>0?e.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:le.map(s=>e.jsx(b,{type:"button",text:s.title,isDisabled:!1,isSelected:v.includes(s.id),onClick:()=>{F!=="selected"&&A("selected"),v.includes(s.id)?k(v.filter(c=>c!==s.id)):k([...v,s.id])}},s.id))}):e.jsxs("p",{className:"mt-2 rounded-lg bg-yellow-100 p-2 text-sm text-yellow-700",children:["Update"," ",e.jsx("a",{target:"_blank",className:"font-medium underline underline-offset-2 hover:text-yellow-800",href:"/roadmaps",children:"your progress on roadmaps"})," ","to show your learning activity."]})]}),e.jsxs("div",{className:"rounded-md border p-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Pick your custom roadmaps to show on your profile"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(b,{type:"button",text:"All Roadmaps",icon:ce,isDisabled:!1,isSelected:E==="all",onClick:()=>{L("all"),C([])}}),e.jsx(b,{type:"button",text:"Hide my Roadmaps",icon:de,isDisabled:!1,isSelected:E==="none",onClick:()=>{L("none"),C([])}})]}),e.jsx("h3",{className:"mt-4 text-sm text-gray-400",children:"Or select the custom roadmaps you want to show"}),te.length>0?e.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:te.map(s=>e.jsx(b,{type:"button",text:s.title,isDisabled:!1,isSelected:N.includes(s.id),onClick:()=>{E!=="selected"&&L("selected"),N.includes(s.id)?C(N.filter(c=>c!==s.id)):C([...N,s.id])}},s.id))}):e.jsxs("p",{className:"mt-2 rounded-lg bg-yellow-100 p-2 text-sm text-yellow-700",children:["You do not have any custom roadmaps."," ",e.jsx("button",{type:"button",className:"font-medium underline underline-offset-2 hover:text-yellow-800",onClick:()=>{r(!0)},children:"Create one now"}),"."]})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"github",className:"text-sm leading-none text-slate-500",children:"Github"}),e.jsx("input",{type:"text",name:"github",id:"github",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://github.com/username",value:_,onChange:s=>G(s.target.value)})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"twitter",className:"text-sm leading-none text-slate-500",children:"Twitter"}),e.jsx("input",{type:"text",name:"twitter",id:"twitter",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://twitter.com/username",value:O,onChange:s=>T(s.target.value)})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"linkedin",className:"text-sm leading-none text-slate-500",children:"LinkedIn"}),e.jsx("input",{type:"text",name:"linkedin",id:"linkedin",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://www.linkedin.com/in/username/",value:B,onChange:s=>W(s.target.value)})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"dailydev",className:"text-sm leading-none text-slate-500",children:"daily.dev"}),e.jsx("input",{type:"text",name:"dailydev",id:"dailydev",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://app.daily.dev/username",value:X,onChange:s=>Z(s.target.value)})]}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("label",{htmlFor:"website",className:"text-sm leading-none text-slate-500",children:"Website"}),e.jsx("input",{type:"text",name:"website",id:"website",className:"mt-2 block w-full rounded-lg border border-gray-300 px-3 py-2 shadow-xs outline-hidden placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",placeholder:"https://example.com",value:J,onChange:s=>K(s.target.value)})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex select-none items-center gap-2 rounded-md border px-3 hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",name:"isAvailableForHire",id:"isAvailableForHire",checked:p,onChange:s=>n(s.target.checked)}),e.jsx("label",{htmlFor:"isAvailableForHire",className:"grow cursor-pointer py-1.5",children:"Available for Hire"})]})}),e.jsx("button",{type:"submit",disabled:Q,className:"inline-flex w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-hidden focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",children:Q?"Please wait..":"Save Profile"}),be&&o&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:P("flex shrink-0 flex-row items-center gap-1 rounded-lg border border-black py-1.5 pl-2.5 pr-3.5 text-xs uppercase text-black transition-colors hover:bg-black hover:text-white",g?"border-green-600 bg-green-600 text-white hover:bg-green-600 hover:text-white":""),onClick:()=>{ee(`${window.location.origin}${o}`)},children:g?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"size-4"}),"Copied Profile URL"]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"size-4"}),"Copy Profile URL"]})}),e.jsxs("a",{className:"flex shrink-0 flex-row items-center gap-1 rounded-lg border border-black py-1.5 pl-2.5 pr-3.5 text-xs uppercase text-black transition-colors hover:bg-black hover:text-white",href:o,target:"_blank",children:[e.jsx(oe,{className:"size-4"}),"View Profile"]})]})]})]})}export{bs as UpdatePublicProfileForm};
