import{j as r}from"./jsx-runtime.D_zvdyIk.js";import{u as g,q as c}from"./query-client.zrB8z_yM.js";import{r as s}from"./index.Z3BHPS3u.js";import{g as U,s as j,d as l}from"./browser.3c2kCsRM.js";import{a as A,b as q}from"./ai-course.DKL-z0Ix.js";import{A as b,a as S}from"./AITutorTallMessage.BWFj9o8p.js";import{U as I}from"./UpgradeAccountModal.DvmOKAPu.js";import{P as w}from"./Pagination.DomnIFR-.js";import{A as N}from"./AICourseCard.Cue6UhZB.js";import{i as E}from"./jwt.1xGNZsvU.js";import{s as v}from"./popup.CdCAhVM2.js";import{u as T}from"./billing.CL3NoBuc.js";import{A as k}from"./AIUsageWarning.DeVtS8bX.js";import{L as B}from"./loader-circle.DfB4mNyf.js";import{B as F}from"./book-open.Dsgc4gH7.js";import"./query-http.DqGTNWG7.js";import"./js.cookie.Cz0CWeBA.js";import"./fp.esm.CznIeghd.js";import"./use-debounce.CXZLeMbB.js";import"./search.CUAljTEc.js";import"./createLucideIcon.BSLrQS80.js";import"./useMutation.BxVH4XRI.js";import"./use-toast.BdCcSTJE.js";import"./toast.DlejBBdi.js";import"./index.3whys8t3.js";import"./Modal.NtjGPDbq.js";import"./use-outside-click.DYGsxgbd.js";import"./use-keydown.r409VyJJ.js";import"./classname.y9b8gBZq.js";import"./x.BOdyWiWF.js";import"./UpdatePlanConfirmation.BOKb_BuU.js";import"./VerifyUpgrade.Du4zKPrg.js";import"./circle-check-big.CnV0y9bI.js";import"./zap.BNbCfd_G.js";import"./message-circle.C1uJbl19.js";import"./map.DuWy2ZcB.js";import"./number.DnDLgi2j.js";import"./ellipsis.BcvtAoad.js";import"./ellipsis-vertical.Di0fjBX0.js";import"./play.-yCdF7S0.js";import"./trash-2.CIQaIo_h.js";import"./date.2wIYh-wy.js";function qr(){const[d,f]=s.useState(!0),[P,u]=s.useState(!1),[t,n]=s.useState({perPage:"21",currPage:"1",query:""}),{isPaidUser:x,isLoading:C}=T(),{data:h,isLoading:y}=g(A(),c),p=h?.course,{data:o,isFetching:L}=g(q(t),c);s.useEffect(()=>{f(!1)},[o]);const m=o?.data??[];s.useEffect(()=>{const e=U();n({...t,currPage:e?.p||"1",query:e?.q||""})},[]),s.useEffect(()=>{t?.currPage!=="1"||t?.query!==""?j({p:t?.currPage||"1",q:t?.query||""}):(l("p"),l("q"))},[t]);const i=E(),a=L||d||C||y;return r.jsxs(r.Fragment,{children:[P&&r.jsx(I,{onClose:()=>u(!1)}),r.jsx(b,{value:t?.query||"",onChange:e=>{n({...t,query:e,currPage:"1"})},disabled:a}),a&&r.jsxs("p",{className:"mb-4 flex flex-row items-center gap-2 text-sm text-gray-500",children:[r.jsx(B,{className:"h-4 w-4 animate-spin"}),"Loading your courses..."]}),!a&&r.jsxs(r.Fragment,{children:[r.jsx(k,{type:"course",totalCount:o?.totalCount,isPaidUser:x,usedCount:p?.used,limitCount:p?.limit,onUpgrade:()=>u(!0)}),i&&!a&&m.length>0&&r.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2 lg:grid-cols-3",children:[m.map(e=>r.jsx(N,{variant:"column",course:e},e._id)),r.jsx(w,{totalCount:o?.totalCount||0,totalPages:o?.totalPages||0,currPage:Number(o?.currPage||1),perPage:Number(o?.perPage||10),onPageChange:e=>{n({...t,currPage:String(e)})},className:"rounded-lg border border-gray-200 bg-white p-4"})]}),!a&&m.length===0&&r.jsx(S,{title:i?"No courses found":"Sign up or login",subtitle:i?"You haven't generated any courses yet.":"Takes 2s to sign up and generate your first course.",icon:F,buttonText:i?"Create your first course":"Sign up or login",onButtonClick:()=>{i?window.location.href="/ai":v()}})]})]})}export{qr as UserCoursesList};
