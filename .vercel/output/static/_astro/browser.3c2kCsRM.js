function d(t){return t.replace(/^https?:\/\//,"").replace("roadmap.sh","").replace(/localhost:[\d]*?/,"").replace(/\?.*$/,"").replace(/\/$/,"").replace(/^\//,"").replace(/[^a-zA-Z0-9]/g,"-").toLowerCase()||"home"}const i="lastPage";function l(){if(typeof window>"u"||["/login","/signup","/verfication-pending","/verify-email","/forgot-password"].includes(window.location.pathname))return;const e=["/respond-invite","/befriend","/r","/ai-roadmaps"].includes(window.location.pathname)?window.location.pathname+window.location.search:window.location.pathname;localStorage.setItem(i,e)}function w(){if(!(typeof window>"u"))return localStorage.getItem(i)||"home"}function u(){if(typeof window>"u")return{};const t=new URLSearchParams(window.location.search),e=t.get("utm_source")??void 0,o=t.get("utm_medium")??void 0,n=t.get("utm_campaign")??void 0,r=t.get("utm_content")??void 0,a=t.get("utm_term")??void 0;return!e||!n?{}:{utmSource:n?e.toLowerCase():void 0,utmMedium:o?o.toLowerCase():void 0,utmCampaign:n?n.toLowerCase():void 0,utmContent:r?r.toLowerCase():void 0,utmTerm:a?a.toLowerCase():void 0}}function g(){const t=s();t.utmSource&&(localStorage.removeItem("utm_params"),window.fireEvent({category:"UserRegistration",action:`Registration: ${t.utmSource||"unknown"}-${t.utmCampaign||"unknown"}`,label:`Registration: ${t.utmSource||"unknown"}-${t.utmCampaign||"unknown"}`}))}function s(){if(typeof window>"u")return{};const t=localStorage.getItem("utm_params");return t?JSON.parse(t):{}}function f(){if(typeof window>"u")return{};const t=new URLSearchParams(window.location.search),e={};for(const[o,n]of t.entries())e[o]=n;return e}function p(t){const e=document.createElement("a");return e.href=t,{protocol:e.protocol,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search,hash:e.hash,host:e.host}}function h(t){if(typeof window>"u")return;const e=new URL(window.location.href);e.searchParams.has(t)&&(e.searchParams.delete(t),window.history.pushState(null,"",e.toString()))}function S(t){if(typeof window>"u")return;const e=new URL(window.location.href);let o=!1;for(const[n,r]of Object.entries(t))e.searchParams.get(n)!==String(r)&&(e.searchParams.delete(n),e.searchParams.set(n,r),o=!0);o&&window.history.pushState(null,"",e.toString())}function m(){if(typeof window>"u")return;const e=new URLSearchParams(window.location.search).get("gclid");return e?(localStorage.setItem("gclid",e),e):localStorage.getItem("gclid")||void 0}function c(){if(typeof window>"u")return"";const t=sessionStorage.getItem("session_id");if(t)return t;const e=`${Date.now()}-${Math.random().toString(36).slice(2,11)}`;return sessionStorage.setItem("session_id",e),e}function P(){if(typeof window>"u")return{};const t=u(),e=s();return{page_location:window.location.href,page_path:window.location.pathname,page_referrer:document.referrer||void 0,page_title:document.title,user_agent:navigator?.userAgent||"",screen_resolution:`${screen.width}x${screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`,session_id:c(),gclid:m(),utm_source:t.utmSource||e.utmSource,utm_medium:t.utmMedium||e.utmMedium,utm_campaign:t.utmCampaign||e.utmCampaign,utm_content:t.utmContent||e.utmContent,utm_term:t.utmTerm||e.utmTerm}}export{l as a,P as b,w as c,h as d,f as g,p,S as s,g as t,d as u};
