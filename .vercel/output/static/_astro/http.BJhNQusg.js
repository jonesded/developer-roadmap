import{a as c}from"./js.cookie.Cz0CWeBA.js";import{i as d}from"./fp.esm.CznIeghd.js";import{T as p,r as u}from"./jwt.1xGNZsvU.js";async function o(e,t){let r=0;try{const i=await(await d.load()).get(),a=await fetch(e,{credentials:"include",...t,headers:new Headers({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${c.get(p)}`,fp:i.visitorId,...t?.headers??{}})});r=a.status;const n=t?.headers?.Accept==="text/html"?await a.text():await a.json();return a.ok?{response:n,error:void 0}:n.status===401?(u(),window.location.reload(),{response:void 0,error:n}):n.status===403?{response:void 0,error:n}:{response:void 0,error:n}}catch(s){return{response:void 0,error:{status:r,message:s.message}}}}async function y(e,t,r){return o(e,{...r,method:"POST",body:JSON.stringify(t)})}async function g(e,t,r){const s=new URLSearchParams(t).toString(),i=s?`${e}?${s}`:e;return o(i,{credentials:"include",method:"GET",...r})}async function P(e,t,r){return o(e,{...r,method:"PATCH",body:JSON.stringify(t)})}async function w(e,t,r){return o(e,{...r,method:"PUT",body:JSON.stringify(t)})}async function T(e,t){return o(e,{...t,method:"DELETE"})}export{g as a,P as b,w as c,T as d,y as h};
