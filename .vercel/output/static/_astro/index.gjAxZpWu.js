function w(t){let e=t>>16&255,o=t>>8&255,s=t&255;return`rgb(${e},${o},${s})`}function i(t,e={},o){let s=document.createElementNS("http://www.w3.org/2000/svg",t);for(let r in e)e.hasOwnProperty(r)&&s.setAttribute(r,e[r]);return o&&o.appendChild(s),s}var y={black:["#000"],gray:["#000","#333","#666","#999","#ccc","#ddd","#eee"],white:["#fff"],red:["#cf2a27","#ea9999","#eo6666","#cc0000","#990000","#660000"],orange:["#ff9900","#f9cb9c","#f6b26b","#e69138","#b45f06","#783f04"],yellow:["#ffff00","#ffe599","#ffd966","#f1c232","#bf9000","#7f6000"],green:["#009e0f","#b6d7a8","#93c47d","#6aa84f","#38761d","#274e13"],cyan:["#00ffff","#a2c4c9","#76a5af","#45818e","#134f5c","#0c343d"],blue:["#2b78e4","#9fc5f8","#6fa8dc","#597eaa","#085394","#073763"],purple:["#9900ff","#b4a7d6","#8e7cc3","#674ea7","#351c75","#20124d"],pink:["#ff00ff","#d5a6bd","#c27ba0","#a64d79","#741b47","#4c1130"]},k=class{svgRoot;fontFamily;canvasRenderingContext2D;constructor(t,e){this.svgRoot=t,this.fontFamily=e,this.canvasRenderingContext2D=document.createElement("canvas").getContext("2d")}render(t,e){let o=t.typeID;o in this?this[o](t,e):console.log(`'${o}' control type not implemented`)}parseColor(t,e){return t===void 0?`rgb(${e})`:w(t)}parseFontProperties(t){return{style:t.properties?.italic?"italic":"normal",weight:t.properties?.bold?"bold":"normal",size:t.properties?.size?t.properties.size+"px":"13px",family:this.fontFamily}}measureText(t,e){return this.canvasRenderingContext2D.font=e,this.canvasRenderingContext2D.measureText(t)}drawRectangle(t,e){i("rect",{x:parseInt(t.x)+2.7/2,y:parseInt(t.y)+2.7/2,width:parseInt(t.w??t.measuredW)-2.7,height:parseInt(t.h??t.measuredH)-2.7,rx:2,fill:this.parseColor(t.properties?.color,"255,255,255"),"fill-opacity":t.properties?.backgroundAlpha??1,stroke:this.parseColor(t.properties?.borderColor,"0,0,0"),"stroke-width":2.7},e)}addText(t,e,o,s){let r=t.properties.text??"",a=parseInt(t.x),p=parseInt(t.y),n=this.parseFontProperties(t),l=this.measureText(r,`${n.style} ${n.weight} ${n.size} ${n.family}`),c=s==="center"?a+(t.w??t.measuredW)/2-l.width/2:a,h=p+t.measuredH/2+l.actualBoundingBoxAscent/2,u=i("text",{x:c,y:h,fill:o,"font-style":n.style,"font-weight":n.weight,"font-size":n.size},e);if(!r.includes("{color:")){let f=i("tspan",{},u);f.textContent=r;return}r.split(/{color:|{color}/).forEach(f=>{if(f.includes("}")){let[d,g]=f.split("}");if(!d.startsWith("#")){let x=parseInt(d.slice(-1));d=isNaN(x)?y[d][0]:y[d][x]}let m=i("tspan",{fill:d},u);m.textContent=g}else{let d=i("tspan",{},u);d.textContent=f}})}TextArea(t,e){this.drawRectangle(t,e)}Canvas(t,e){this.drawRectangle(t,e)}Label(t,e){this.addText(t,e,this.parseColor(t.properties?.color,"0,0,0"),"left")}TextInput(t,e){this.drawRectangle(t,e),this.addText(t,e,this.parseColor(t.properties?.textColor,"0,0,0"),"center")}Arrow(t,e){let o=parseInt(t.x),s=parseInt(t.y),{p0:r,p1:a,p2:p}=t.properties,n;t.properties?.stroke==="dotted"?n="0.8 12":t.properties?.stroke==="dashed"&&(n="28 46");let l={x:(p.x-r.x)*a.x,y:(p.y-r.y)*a.x};i("path",{d:`M${o+r.x} ${s+r.y}Q${o+r.x+l.x+l.y*a.y*3.6} ${s+r.y+l.y+-l.x*a.y*3.6} ${o+p.x} ${s+p.y}`,fill:"none",stroke:this.parseColor(t.properties?.color,"0,0,0"),"stroke-width":4,"stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":n},e)}Icon(t,e){let o=parseInt(t.x),s=parseInt(t.y),r=10;i("circle",{cx:o+r,cy:s+r,r,fill:this.parseColor(t.properties?.color,"0,0,0")},e),t.properties.icon.ID==="check-circle"&&i("path",{d:`M${o+4.5} ${s+r}L${o+8.5} ${s+r+4} ${o+15} ${s+r-2.5}`,fill:"none",stroke:"#fff","stroke-width":3.5,"stroke-linecap":"round","stroke-linejoin":"round"},e)}HRule(t,e){let o=parseInt(t.x),s=parseInt(t.y),r;t.properties?.stroke==="dotted"?r="0.8, 8":t.properties?.stroke==="dashed"&&(r="18, 30"),i("path",{d:`M${o} ${s}L${o+parseInt(t.w??t.measuredW)} ${s}`,fill:"none",stroke:this.parseColor(t.properties?.color,"0,0,0"),"stroke-width":2.7,"stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":r},e)}__group__(t,e){let o=t?.properties?.controlName||"",s=i("g",{...o?{class:"clickable-group","data-group-id":o}:{}},e);t.children.controls.control.sort((r,a)=>r.zOrder-a.zOrder).forEach(r=>{r.x=parseInt(r.x,10)+parseInt(t.x,10),r.y=parseInt(r.y,10)+parseInt(t.y,10),this.render(r,s)})}};async function $(t,e={}){if(e={padding:5,fontFamily:"balsamiq",fontURL:"https://fonts.gstatic.com/s/balsamiqsans/v3/P5sEzZiAbNrN8SB3lQQX7Pncwd4XIA.woff2",...e},e.fontURL){let c=new FontFace(e.fontFamily,`url(${e.fontURL})`);await c.load(),document.fonts.add&&document.fonts.add(c)}let o=t.mockup,s=o.measuredW-o.mockupW-e.padding,r=o.measuredH-o.mockupH-e.padding,a=parseInt(o.mockupW)+e.padding*2,p=parseInt(o.mockupH)+e.padding*2,n=i("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:`${s} ${r} ${a} ${p}`,style:"font-family: balsamiq"}),l=new k(n,e.fontFamily);return o.controls.control.sort((c,h)=>c.zOrder-h.zOrder).forEach(c=>{l.render(c,n)}),n}export{$ as O};
