import{a as p}from"./js.cookie.Cz0CWeBA.js";import{i as u}from"./fp.esm.CznIeghd.js";import{T as f,r as d}from"./jwt.1xGNZsvU.js";class o extends Error{status;message;constructor(t,r){super(r),this.status=t,this.message=r}static isFetchError(t){return t instanceof o}}async function i(e,t){const r=e.startsWith("http")?e:`https://api.hnmdevs.com${e}`;try{const c=await(await u.load()).get(),m=t?.body instanceof FormData,h=new Headers({Accept:"application/json",Authorization:`Bearer ${p.get(f)}`,fp:c.visitorId,...t?.headers??{}});m||h.set("Content-Type","application/json");const n=await fetch(r,{credentials:"include",...t,headers:h}),s=t?.headers?.Accept==="text/html"?await n.text():await n.json();if(s?.status===401)return d(),window.location.href="/login",null;if(!n.ok)throw s.errors?new o(n?.status,s.message):s.message?new o(n?.status,s.message):new Error("An unexpected error occurred");return s}catch(a){throw a}}async function E(e,t,r){return i(e,{...r,method:"POST",body:t instanceof FormData?t:JSON.stringify(t)})}async function A(e,t,r){const a=new URLSearchParams(t).toString(),c=a?`${e}?${a}`:e;return i(c,{credentials:"include",method:"GET",...r})}async function P(e,t,r){return i(e,{...r,method:"PATCH",body:JSON.stringify(t)})}async function T(e,t){return i(e,{...t,method:"DELETE"})}export{o as F,E as a,T as b,P as c,A as h};
